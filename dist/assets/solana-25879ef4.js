var Xu=Object.defineProperty;var Qu=(r,t,e)=>t in r?Xu(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ye=(r,t,e)=>(Qu(r,typeof t!="symbol"?t+"":t,e),e);import{g as bo,c as rn,a as Sr,r as lt,R as vo}from"./vendor-05fe82cf.js";var gt={},Ti={};Ti.byteLength=nl;Ti.toByteArray=il;Ti.fromByteArray=al;var an=[],Ge=[],tl=typeof Uint8Array<"u"?Uint8Array:Array,ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nr=0,el=ws.length;nr<el;++nr)an[nr]=ws[nr],Ge[ws.charCodeAt(nr)]=nr;Ge["-".charCodeAt(0)]=62;Ge["_".charCodeAt(0)]=63;function ec(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function nl(r){var t=ec(r),e=t[0],n=t[1];return(e+n)*3/4-n}function rl(r,t,e){return(t+e)*3/4-e}function il(r){var t,e=ec(r),n=e[0],s=e[1],i=new tl(rl(r,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)t=Ge[r.charCodeAt(u)]<<18|Ge[r.charCodeAt(u+1)]<<12|Ge[r.charCodeAt(u+2)]<<6|Ge[r.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Ge[r.charCodeAt(u)]<<2|Ge[r.charCodeAt(u+1)]>>4,i[o++]=t&255),s===1&&(t=Ge[r.charCodeAt(u)]<<10|Ge[r.charCodeAt(u+1)]<<4|Ge[r.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function sl(r){return an[r>>18&63]+an[r>>12&63]+an[r>>6&63]+an[r&63]}function ol(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(sl(n));return s.join("")}function al(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,a=e-n;o<a;o+=i)s.push(ol(r,o,o+i>a?a:o+i));return n===1?(t=r[e-1],s.push(an[t>>2]+an[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(an[t>>10]+an[t>>4&63]+an[t<<2&63]+"=")),s.join("")}var Eo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Eo.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,g=u>>1,y=-7,b=e?s-1:0,B=e?-1:1,x=r[t+b];for(b+=B,i=x&(1<<-y)-1,x>>=-y,y+=a;y>0;i=i*256+r[t+b],b+=B,y-=8);for(o=i&(1<<-y)-1,i>>=-y,y+=n;y>0;o=o*256+r[t+b],b+=B,y-=8);if(i===0)i=1-g;else{if(i===u)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-g}return(x?-1:1)*o*Math.pow(2,i-n)};Eo.write=function(r,t,e,n,s,i){var o,a,u,g=i*8-s-1,y=(1<<g)-1,b=y>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:i-1,I=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=y):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+b>=1?t+=B/u:t+=B*Math.pow(2,1-b),t*u>=2&&(o++,u/=2),o+b>=y?(a=0,o=y):o+b>=1?(a=(t*u-1)*Math.pow(2,s),o=o+b):(a=t*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;r[e+x]=a&255,x+=I,a/=256,s-=8);for(o=o<<s|a,g+=s;g>0;r[e+x]=o&255,x+=I,o/=256,g-=8);r[e+x-I]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Ti,e=Eo,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const m=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(m,l),m.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(m){if(m>s)throw new RangeError('The value "'+m+'" is invalid for option "size"');const l=new Uint8Array(m);return Object.setPrototypeOf(l,a.prototype),l}function a(m,l,f){if(typeof m=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(m)}return u(m,l,f)}a.poolSize=8192;function u(m,l,f){if(typeof m=="string")return B(m,l);if(ArrayBuffer.isView(m))return I(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(be(m,ArrayBuffer)||m&&be(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(m,SharedArrayBuffer)||m&&be(m.buffer,SharedArrayBuffer)))return R(m,l,f);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=m.valueOf&&m.valueOf();if(_!=null&&_!==m)return a.from(_,l,f);const U=E(m);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return a.from(m[Symbol.toPrimitive]("string"),l,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}a.from=function(m,l,f){return u(m,l,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function g(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function y(m,l,f){return g(m),m<=0?o(m):l!==void 0?typeof f=="string"?o(m).fill(l,f):o(m).fill(l):o(m)}a.alloc=function(m,l,f){return y(m,l,f)};function b(m){return g(m),o(m<0?0:C(m)|0)}a.allocUnsafe=function(m){return b(m)},a.allocUnsafeSlow=function(m){return b(m)};function B(m,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const f=T(m,l)|0;let _=o(f);const U=_.write(m,l);return U!==f&&(_=_.slice(0,U)),_}function x(m){const l=m.length<0?0:C(m.length)|0,f=o(l);for(let _=0;_<l;_+=1)f[_]=m[_]&255;return f}function I(m){if(be(m,Uint8Array)){const l=new Uint8Array(m);return R(l.buffer,l.byteOffset,l.byteLength)}return x(m)}function R(m,l,f){if(l<0||m.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<l+(f||0))throw new RangeError('"length" is outside of buffer bounds');let _;return l===void 0&&f===void 0?_=new Uint8Array(m):f===void 0?_=new Uint8Array(m,l):_=new Uint8Array(m,l,f),Object.setPrototypeOf(_,a.prototype),_}function E(m){if(a.isBuffer(m)){const l=C(m.length)|0,f=o(l);return f.length===0||m.copy(f,0,0,l),f}if(m.length!==void 0)return typeof m.length!="number"||Tt(m.length)?o(0):x(m);if(m.type==="Buffer"&&Array.isArray(m.data))return x(m.data)}function C(m){if(m>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return m|0}function N(m){return+m!=m&&(m=0),a.alloc(+m)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,f){if(be(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),be(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(l)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let _=l.length,U=f.length;for(let O=0,W=Math.min(_,U);O<W;++O)if(l[O]!==f[O]){_=l[O],U=f[O];break}return _<U?-1:U<_?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);let _;if(f===void 0)for(f=0,_=0;_<l.length;++_)f+=l[_].length;const U=a.allocUnsafe(f);let O=0;for(_=0;_<l.length;++_){let W=l[_];if(be(W,Uint8Array))O+W.length>U.length?(a.isBuffer(W)||(W=a.from(W)),W.copy(U,O)):Uint8Array.prototype.set.call(U,W,O);else if(a.isBuffer(W))W.copy(U,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=W.length}return U};function T(m,l){if(a.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||be(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const f=m.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&f===0)return 0;let U=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return Ct(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Lt(m).length;default:if(U)return _?-1:Ct(m).length;l=(""+l).toLowerCase(),U=!0}}a.byteLength=T;function P(m,l,f){let _=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,l>>>=0,f<=l))return"";for(m||(m="utf8");;)switch(m){case"hex":return k(this,l,f);case"utf8":case"utf-8":return c(this,l,f);case"ascii":return w(this,l,f);case"latin1":case"binary":return v(this,l,f);case"base64":return M(this,l,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,l,f);default:if(_)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),_=!0}}a.prototype._isBuffer=!0;function q(m,l,f){const _=m[l];m[l]=m[f],m[f]=_}a.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)q(this,f,f+1);return this},a.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)q(this,f,f+3),q(this,f+1,f+2);return this},a.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)q(this,f,f+7),q(this,f+1,f+6),q(this,f+2,f+5),q(this,f+3,f+4);return this},a.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?c(this,0,l):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){let l="";const f=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,f,_,U,O){if(be(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),_===void 0&&(_=l?l.length:0),U===void 0&&(U=0),O===void 0&&(O=this.length),f<0||_>l.length||U<0||O>this.length)throw new RangeError("out of range index");if(U>=O&&f>=_)return 0;if(U>=O)return-1;if(f>=_)return 1;if(f>>>=0,_>>>=0,U>>>=0,O>>>=0,this===l)return 0;let W=O-U,yt=_-f;const pt=Math.min(W,yt),dt=this.slice(U,O),Ot=l.slice(f,_);for(let ft=0;ft<pt;++ft)if(dt[ft]!==Ot[ft]){W=dt[ft],yt=Ot[ft];break}return W<yt?-1:yt<W?1:0};function D(m,l,f,_,U){if(m.length===0)return-1;if(typeof f=="string"?(_=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Tt(f)&&(f=U?0:m.length-1),f<0&&(f=m.length+f),f>=m.length){if(U)return-1;f=m.length-1}else if(f<0)if(U)f=0;else return-1;if(typeof l=="string"&&(l=a.from(l,_)),a.isBuffer(l))return l.length===0?-1:K(m,l,f,_,U);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(m,l,f):Uint8Array.prototype.lastIndexOf.call(m,l,f):K(m,[l],f,_,U);throw new TypeError("val must be string, number or Buffer")}function K(m,l,f,_,U){let O=1,W=m.length,yt=l.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(m.length<2||l.length<2)return-1;O=2,W/=2,yt/=2,f/=2}function pt(Ot,ft){return O===1?Ot[ft]:Ot.readUInt16BE(ft*O)}let dt;if(U){let Ot=-1;for(dt=f;dt<W;dt++)if(pt(m,dt)===pt(l,Ot===-1?0:dt-Ot)){if(Ot===-1&&(Ot=dt),dt-Ot+1===yt)return Ot*O}else Ot!==-1&&(dt-=dt-Ot),Ot=-1}else for(f+yt>W&&(f=W-yt),dt=f;dt>=0;dt--){let Ot=!0;for(let ft=0;ft<yt;ft++)if(pt(m,dt+ft)!==pt(l,ft)){Ot=!1;break}if(Ot)return dt}return-1}a.prototype.includes=function(l,f,_){return this.indexOf(l,f,_)!==-1},a.prototype.indexOf=function(l,f,_){return D(this,l,f,_,!0)},a.prototype.lastIndexOf=function(l,f,_){return D(this,l,f,_,!1)};function H(m,l,f,_){f=Number(f)||0;const U=m.length-f;_?(_=Number(_),_>U&&(_=U)):_=U;const O=l.length;_>O/2&&(_=O/2);let W;for(W=0;W<_;++W){const yt=parseInt(l.substr(W*2,2),16);if(Tt(yt))return W;m[f+W]=yt}return W}function V(m,l,f,_){return Mt(Ct(l,m.length-f),m,f,_)}function ut(m,l,f,_){return Mt(zt(l),m,f,_)}function tt(m,l,f,_){return Mt(Lt(l),m,f,_)}function et(m,l,f,_){return Mt(er(l,m.length-f),m,f,_)}a.prototype.write=function(l,f,_,U){if(f===void 0)U="utf8",_=this.length,f=0;else if(_===void 0&&typeof f=="string")U=f,_=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(_)?(_=_>>>0,U===void 0&&(U="utf8")):(U=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-f;if((_===void 0||_>O)&&(_=O),l.length>0&&(_<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let W=!1;for(;;)switch(U){case"hex":return H(this,l,f,_);case"utf8":case"utf-8":return V(this,l,f,_);case"ascii":case"latin1":case"binary":return ut(this,l,f,_);case"base64":return tt(this,l,f,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,l,f,_);default:if(W)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),W=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(m,l,f){return l===0&&f===m.length?t.fromByteArray(m):t.fromByteArray(m.slice(l,f))}function c(m,l,f){f=Math.min(m.length,f);const _=[];let U=l;for(;U<f;){const O=m[U];let W=null,yt=O>239?4:O>223?3:O>191?2:1;if(U+yt<=f){let pt,dt,Ot,ft;switch(yt){case 1:O<128&&(W=O);break;case 2:pt=m[U+1],(pt&192)===128&&(ft=(O&31)<<6|pt&63,ft>127&&(W=ft));break;case 3:pt=m[U+1],dt=m[U+2],(pt&192)===128&&(dt&192)===128&&(ft=(O&15)<<12|(pt&63)<<6|dt&63,ft>2047&&(ft<55296||ft>57343)&&(W=ft));break;case 4:pt=m[U+1],dt=m[U+2],Ot=m[U+3],(pt&192)===128&&(dt&192)===128&&(Ot&192)===128&&(ft=(O&15)<<18|(pt&63)<<12|(dt&63)<<6|Ot&63,ft>65535&&ft<1114112&&(W=ft))}}W===null?(W=65533,yt=1):W>65535&&(W-=65536,_.push(W>>>10&1023|55296),W=56320|W&1023),_.push(W),U+=yt}return p(_)}const d=4096;function p(m){const l=m.length;if(l<=d)return String.fromCharCode.apply(String,m);let f="",_=0;for(;_<l;)f+=String.fromCharCode.apply(String,m.slice(_,_+=d));return f}function w(m,l,f){let _="";f=Math.min(m.length,f);for(let U=l;U<f;++U)_+=String.fromCharCode(m[U]&127);return _}function v(m,l,f){let _="";f=Math.min(m.length,f);for(let U=l;U<f;++U)_+=String.fromCharCode(m[U]);return _}function k(m,l,f){const _=m.length;(!l||l<0)&&(l=0),(!f||f<0||f>_)&&(f=_);let U="";for(let O=l;O<f;++O)U+=Ut[m[O]];return U}function L(m,l,f){const _=m.slice(l,f);let U="";for(let O=0;O<_.length-1;O+=2)U+=String.fromCharCode(_[O]+_[O+1]*256);return U}a.prototype.slice=function(l,f){const _=this.length;l=~~l,f=f===void 0?_:~~f,l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),f<l&&(f=l);const U=this.subarray(l,f);return Object.setPrototypeOf(U,a.prototype),U};function S(m,l,f){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+l>f)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,f,_){l=l>>>0,f=f>>>0,_||S(l,f,this.length);let U=this[l],O=1,W=0;for(;++W<f&&(O*=256);)U+=this[l+W]*O;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,f,_){l=l>>>0,f=f>>>0,_||S(l,f,this.length);let U=this[l+--f],O=1;for(;f>0&&(O*=256);)U+=this[l+--f]*O;return U},a.prototype.readUint8=a.prototype.readUInt8=function(l,f){return l=l>>>0,f||S(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||S(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||S(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||S(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||S(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readBigUInt64LE=Ue(function(l){l=l>>>0,Zt(l,"offset");const f=this[l],_=this[l+7];(f===void 0||_===void 0)&&xt(l,this.length-8);const U=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,O=this[++l]+this[++l]*2**8+this[++l]*2**16+_*2**24;return BigInt(U)+(BigInt(O)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ue(function(l){l=l>>>0,Zt(l,"offset");const f=this[l],_=this[l+7];(f===void 0||_===void 0)&&xt(l,this.length-8);const U=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],O=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_;return(BigInt(U)<<BigInt(32))+BigInt(O)}),a.prototype.readIntLE=function(l,f,_){l=l>>>0,f=f>>>0,_||S(l,f,this.length);let U=this[l],O=1,W=0;for(;++W<f&&(O*=256);)U+=this[l+W]*O;return O*=128,U>=O&&(U-=Math.pow(2,8*f)),U},a.prototype.readIntBE=function(l,f,_){l=l>>>0,f=f>>>0,_||S(l,f,this.length);let U=f,O=1,W=this[l+--U];for(;U>0&&(O*=256);)W+=this[l+--U]*O;return O*=128,W>=O&&(W-=Math.pow(2,8*f)),W},a.prototype.readInt8=function(l,f){return l=l>>>0,f||S(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,f){l=l>>>0,f||S(l,2,this.length);const _=this[l]|this[l+1]<<8;return _&32768?_|4294901760:_},a.prototype.readInt16BE=function(l,f){l=l>>>0,f||S(l,2,this.length);const _=this[l+1]|this[l]<<8;return _&32768?_|4294901760:_},a.prototype.readInt32LE=function(l,f){return l=l>>>0,f||S(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,f){return l=l>>>0,f||S(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readBigInt64LE=Ue(function(l){l=l>>>0,Zt(l,"offset");const f=this[l],_=this[l+7];(f===void 0||_===void 0)&&xt(l,this.length-8);const U=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(_<<24);return(BigInt(U)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),a.prototype.readBigInt64BE=Ue(function(l){l=l>>>0,Zt(l,"offset");const f=this[l],_=this[l+7];(f===void 0||_===void 0)&&xt(l,this.length-8);const U=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(U)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_)}),a.prototype.readFloatLE=function(l,f){return l=l>>>0,f||S(l,4,this.length),e.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,f){return l=l>>>0,f||S(l,4,this.length),e.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||S(l,8,this.length),e.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||S(l,8,this.length),e.read(this,l,!1,52,8)};function h(m,l,f,_,U,O){if(!a.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>U||l<O)throw new RangeError('"value" argument is out of bounds');if(f+_>m.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,f,_,U){if(l=+l,f=f>>>0,_=_>>>0,!U){const yt=Math.pow(2,8*_)-1;h(this,l,f,_,yt,0)}let O=1,W=0;for(this[f]=l&255;++W<_&&(O*=256);)this[f+W]=l/O&255;return f+_},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,f,_,U){if(l=+l,f=f>>>0,_=_>>>0,!U){const yt=Math.pow(2,8*_)-1;h(this,l,f,_,yt,0)}let O=_-1,W=1;for(this[f+O]=l&255;--O>=0&&(W*=256);)this[f+O]=l/W&255;return f+_},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,1,255,0),this[f]=l&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function A(m,l,f,_,U){bt(l,_,U,m,f,7);let O=Number(l&BigInt(4294967295));m[f++]=O,O=O>>8,m[f++]=O,O=O>>8,m[f++]=O,O=O>>8,m[f++]=O;let W=Number(l>>BigInt(32)&BigInt(4294967295));return m[f++]=W,W=W>>8,m[f++]=W,W=W>>8,m[f++]=W,W=W>>8,m[f++]=W,f}function j(m,l,f,_,U){bt(l,_,U,m,f,7);let O=Number(l&BigInt(4294967295));m[f+7]=O,O=O>>8,m[f+6]=O,O=O>>8,m[f+5]=O,O=O>>8,m[f+4]=O;let W=Number(l>>BigInt(32)&BigInt(4294967295));return m[f+3]=W,W=W>>8,m[f+2]=W,W=W>>8,m[f+1]=W,W=W>>8,m[f]=W,f+8}a.prototype.writeBigUInt64LE=Ue(function(l,f=0){return A(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ue(function(l,f=0){return j(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(l,f,_,U){if(l=+l,f=f>>>0,!U){const pt=Math.pow(2,8*_-1);h(this,l,f,_,pt-1,-pt)}let O=0,W=1,yt=0;for(this[f]=l&255;++O<_&&(W*=256);)l<0&&yt===0&&this[f+O-1]!==0&&(yt=1),this[f+O]=(l/W>>0)-yt&255;return f+_},a.prototype.writeIntBE=function(l,f,_,U){if(l=+l,f=f>>>0,!U){const pt=Math.pow(2,8*_-1);h(this,l,f,_,pt-1,-pt)}let O=_-1,W=1,yt=0;for(this[f+O]=l&255;--O>=0&&(W*=256);)l<0&&yt===0&&this[f+O+1]!==0&&(yt=1),this[f+O]=(l/W>>0)-yt&255;return f+_},a.prototype.writeInt8=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},a.prototype.writeInt16LE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeInt16BE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeInt32LE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},a.prototype.writeInt32BE=function(l,f,_){return l=+l,f=f>>>0,_||h(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},a.prototype.writeBigInt64LE=Ue(function(l,f=0){return A(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ue(function(l,f=0){return j(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(m,l,f,_,U,O){if(f+_>m.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function X(m,l,f,_,U){return l=+l,f=f>>>0,U||Z(m,l,f,4),e.write(m,l,f,_,23,4),f+4}a.prototype.writeFloatLE=function(l,f,_){return X(this,l,f,!0,_)},a.prototype.writeFloatBE=function(l,f,_){return X(this,l,f,!1,_)};function vt(m,l,f,_,U){return l=+l,f=f>>>0,U||Z(m,l,f,8),e.write(m,l,f,_,52,8),f+8}a.prototype.writeDoubleLE=function(l,f,_){return vt(this,l,f,!0,_)},a.prototype.writeDoubleBE=function(l,f,_){return vt(this,l,f,!1,_)},a.prototype.copy=function(l,f,_,U){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(_||(_=0),!U&&U!==0&&(U=this.length),f>=l.length&&(f=l.length),f||(f=0),U>0&&U<_&&(U=_),U===_||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),l.length-f<U-_&&(U=l.length-f+_);const O=U-_;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,_,U):Uint8Array.prototype.set.call(l,this.subarray(_,U),f),O},a.prototype.fill=function(l,f,_,U){if(typeof l=="string"){if(typeof f=="string"?(U=f,f=0,_=this.length):typeof _=="string"&&(U=_,_=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(l.length===1){const W=l.charCodeAt(0);(U==="utf8"&&W<128||U==="latin1")&&(l=W)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<_)throw new RangeError("Out of range index");if(_<=f)return this;f=f>>>0,_=_===void 0?this.length:_>>>0,l||(l=0);let O;if(typeof l=="number")for(O=f;O<_;++O)this[O]=l;else{const W=a.isBuffer(l)?l:a.from(l,U),yt=W.length;if(yt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(O=0;O<_-f;++O)this[O+f]=W[O%yt]}return this};const at={};function ht(m,l,f){at[m]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}ht("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ht("ERR_INVALID_ARG_TYPE",function(m,l){return`The "${m}" argument must be of type number. Received type ${typeof l}`},TypeError),ht("ERR_OUT_OF_RANGE",function(m,l,f){let _=`The value of "${m}" is out of range.`,U=f;return Number.isInteger(f)&&Math.abs(f)>2**32?U=jt(String(f)):typeof f=="bigint"&&(U=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(U=jt(U)),U+="n"),_+=` It must be ${l}. Received ${U}`,_},RangeError);function jt(m){let l="",f=m.length;const _=m[0]==="-"?1:0;for(;f>=_+4;f-=3)l=`_${m.slice(f-3,f)}${l}`;return`${m.slice(0,f)}${l}`}function Et(m,l,f){Zt(l,"offset"),(m[l]===void 0||m[l+f]===void 0)&&xt(l,m.length-(f+1))}function bt(m,l,f,_,U,O){if(m>f||m<l){const W=typeof l=="bigint"?"n":"";let yt;throw O>3?l===0||l===BigInt(0)?yt=`>= 0${W} and < 2${W} ** ${(O+1)*8}${W}`:yt=`>= -(2${W} ** ${(O+1)*8-1}${W}) and < 2 ** ${(O+1)*8-1}${W}`:yt=`>= ${l}${W} and <= ${f}${W}`,new at.ERR_OUT_OF_RANGE("value",yt,m)}Et(_,U,O)}function Zt(m,l){if(typeof m!="number")throw new at.ERR_INVALID_ARG_TYPE(l,"number",m)}function xt(m,l,f){throw Math.floor(m)!==m?(Zt(m,f),new at.ERR_OUT_OF_RANGE(f||"offset","an integer",m)):l<0?new at.ERR_BUFFER_OUT_OF_BOUNDS:new at.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${l}`,m)}const _t=/[^+/0-9A-Za-z-_]/g;function tr(m){if(m=m.split("=")[0],m=m.trim().replace(_t,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Ct(m,l){l=l||1/0;let f;const _=m.length;let U=null;const O=[];for(let W=0;W<_;++W){if(f=m.charCodeAt(W),f>55295&&f<57344){if(!U){if(f>56319){(l-=3)>-1&&O.push(239,191,189);continue}else if(W+1===_){(l-=3)>-1&&O.push(239,191,189);continue}U=f;continue}if(f<56320){(l-=3)>-1&&O.push(239,191,189),U=f;continue}f=(U-55296<<10|f-56320)+65536}else U&&(l-=3)>-1&&O.push(239,191,189);if(U=null,f<128){if((l-=1)<0)break;O.push(f)}else if(f<2048){if((l-=2)<0)break;O.push(f>>6|192,f&63|128)}else if(f<65536){if((l-=3)<0)break;O.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((l-=4)<0)break;O.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return O}function zt(m){const l=[];for(let f=0;f<m.length;++f)l.push(m.charCodeAt(f)&255);return l}function er(m,l){let f,_,U;const O=[];for(let W=0;W<m.length&&!((l-=2)<0);++W)f=m.charCodeAt(W),_=f>>8,U=f%256,O.push(U),O.push(_);return O}function Lt(m){return t.toByteArray(tr(m))}function Mt(m,l,f,_){let U;for(U=0;U<_&&!(U+f>=l.length||U>=m.length);++U)l[U+f]=m[U];return U}function be(m,l){return m instanceof l||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===l.name}function Tt(m){return m!==m}const Ut=function(){const m="0123456789abcdef",l=new Array(256);for(let f=0;f<16;++f){const _=f*16;for(let U=0;U<16;++U)l[_+U]=m[f]+m[U]}return l}();function Ue(m){return typeof BigInt>"u"?Pt:m}function Pt(){throw new Error("BigInt not supported")}})(gt);function sa(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function cl(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ci(r,...t){if(!cl(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function ul(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sa(r.outputLen),sa(r.blockLen)}function yi(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ll(r,t){Ci(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}const rr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ms(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function on(r,t){return r<<32-t|r>>>t}function fl(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function So(r){return typeof r=="string"&&(r=fl(r)),Ci(r),r}function hl(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Ci(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class nc{clone(){return this._cloneInto()}}function rc(r){const t=n=>r().update(So(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function ic(r=32){if(rr&&typeof rr.getRandomValues=="function")return rr.getRandomValues(new Uint8Array(r));if(rr&&typeof rr.randomBytes=="function")return rr.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function dl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),u=n?4:0,g=n?0:4;r.setUint32(t+u,o,n),r.setUint32(t+g,a,n)}function gl(r,t,e){return r&t^~r&e}function pl(r,t,e){return r&t^r&e^t&e}class sc extends nc{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ms(this.buffer)}update(t){yi(this);const{view:e,buffer:n,blockLen:s}=this;t=So(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=ms(t);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){yi(this),ll(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let b=o;b<s;b++)e[b]=0;dl(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=ms(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=u/4,y=this.get();if(g>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)a.setUint32(4*b,y[b],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const Qr=BigInt(2**32-1),Js=BigInt(32);function oc(r,t=!1){return t?{h:Number(r&Qr),l:Number(r>>Js&Qr)}:{h:Number(r>>Js&Qr)|0,l:Number(r&Qr)|0}}function yl(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=oc(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const wl=(r,t)=>BigInt(r>>>0)<<Js|BigInt(t>>>0),ml=(r,t,e)=>r>>>e,bl=(r,t,e)=>r<<32-e|t>>>e,vl=(r,t,e)=>r>>>e|t<<32-e,El=(r,t,e)=>r<<32-e|t>>>e,Sl=(r,t,e)=>r<<64-e|t>>>e-32,xl=(r,t,e)=>r>>>e-32|t<<64-e,_l=(r,t)=>t,Al=(r,t)=>r,Bl=(r,t,e)=>r<<e|t>>>32-e,Il=(r,t,e)=>t<<e|r>>>32-e,kl=(r,t,e)=>t<<e-32|r>>>64-e,Rl=(r,t,e)=>r<<e-32|t>>>64-e;function Ml(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Tl=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Cl=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Ll=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Nl=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Ul=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Pl=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Ol={fromBig:oc,split:yl,toBig:wl,shrSH:ml,shrSL:bl,rotrSH:vl,rotrSL:El,rotrBH:Sl,rotrBL:xl,rotr32H:_l,rotr32L:Al,rotlSH:Bl,rotlSL:Il,rotlBH:kl,rotlBL:Rl,add:Ml,add3L:Tl,add3H:Cl,add4L:Ll,add4H:Nl,add5H:Pl,add5L:Ul},wt=Ol,[Fl,zl]=(()=>wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),xn=new Uint32Array(80),_n=new Uint32Array(80);class Dl extends sc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:g,El:y,Fh:b,Fl:B,Gh:x,Gl:I,Hh:R,Hl:E}=this;return[t,e,n,s,i,o,a,u,g,y,b,B,x,I,R,E]}set(t,e,n,s,i,o,a,u,g,y,b,B,x,I,R,E){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=g|0,this.El=y|0,this.Fh=b|0,this.Fl=B|0,this.Gh=x|0,this.Gl=I|0,this.Hh=R|0,this.Hl=E|0}process(t,e){for(let T=0;T<16;T++,e+=4)xn[T]=t.getUint32(e),_n[T]=t.getUint32(e+=4);for(let T=16;T<80;T++){const P=xn[T-15]|0,q=_n[T-15]|0,D=wt.rotrSH(P,q,1)^wt.rotrSH(P,q,8)^wt.shrSH(P,q,7),K=wt.rotrSL(P,q,1)^wt.rotrSL(P,q,8)^wt.shrSL(P,q,7),H=xn[T-2]|0,V=_n[T-2]|0,ut=wt.rotrSH(H,V,19)^wt.rotrBH(H,V,61)^wt.shrSH(H,V,6),tt=wt.rotrSL(H,V,19)^wt.rotrBL(H,V,61)^wt.shrSL(H,V,6),et=wt.add4L(K,tt,_n[T-7],_n[T-16]),M=wt.add4H(et,D,ut,xn[T-7],xn[T-16]);xn[T]=M|0,_n[T]=et|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:g,Dl:y,Eh:b,El:B,Fh:x,Fl:I,Gh:R,Gl:E,Hh:C,Hl:N}=this;for(let T=0;T<80;T++){const P=wt.rotrSH(b,B,14)^wt.rotrSH(b,B,18)^wt.rotrBH(b,B,41),q=wt.rotrSL(b,B,14)^wt.rotrSL(b,B,18)^wt.rotrBL(b,B,41),D=b&x^~b&R,K=B&I^~B&E,H=wt.add5L(N,q,K,zl[T],_n[T]),V=wt.add5H(H,C,P,D,Fl[T],xn[T]),ut=H|0,tt=wt.rotrSH(n,s,28)^wt.rotrBH(n,s,34)^wt.rotrBH(n,s,39),et=wt.rotrSL(n,s,28)^wt.rotrBL(n,s,34)^wt.rotrBL(n,s,39),M=n&i^n&a^i&a,c=s&o^s&u^o&u;C=R|0,N=E|0,R=x|0,E=I|0,x=b|0,I=B|0,{h:b,l:B}=wt.add(g|0,y|0,V|0,ut|0),g=a|0,y=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const d=wt.add3L(ut,et,c);n=wt.add3H(d,V,tt,M),s=d|0}({h:n,l:s}=wt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=wt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=wt.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:g,l:y}=wt.add(this.Dh|0,this.Dl|0,g|0,y|0),{h:b,l:B}=wt.add(this.Eh|0,this.El|0,b|0,B|0),{h:x,l:I}=wt.add(this.Fh|0,this.Fl|0,x|0,I|0),{h:R,l:E}=wt.add(this.Gh|0,this.Gl|0,R|0,E|0),{h:C,l:N}=wt.add(this.Hh|0,this.Hl|0,C|0,N|0),this.set(n,s,i,o,a,u,g,y,b,B,x,I,R,E,C,N)}roundClean(){xn.fill(0),_n.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Wl=rc(()=>new Dl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Li=BigInt(0),Ni=BigInt(1),ql=BigInt(2);function Vn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Vr(r){if(!Vn(r))throw new Error("Uint8Array expected")}function bn(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}const Kl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Gn(r){Vr(r);let t="";for(let e=0;e<r.length;e++)t+=Kl[r[e]];return t}function or(r){const t=r.toString(16);return t.length&1?"0"+t:t}function xo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Li:BigInt("0x"+r)}const gn={_0:48,_9:57,A:65,F:70,a:97,f:102};function oa(r){if(r>=gn._0&&r<=gn._9)return r-gn._0;if(r>=gn.A&&r<=gn.F)return r-(gn.A-10);if(r>=gn.a&&r<=gn.f)return r-(gn.a-10)}function gr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=oa(r.charCodeAt(i)),a=oa(r.charCodeAt(i+1));if(o===void 0||a===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function Hn(r){return xo(Gn(r))}function lr(r){return Vr(r),xo(Gn(Uint8Array.from(r).reverse()))}function pr(r,t){return gr(r.toString(16).padStart(t*2,"0"))}function zr(r,t){return pr(r,t).reverse()}function $l(r){return gr(or(r))}function ge(r,t,e){let n;if(typeof t=="string")try{n=gr(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Vn(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function Zn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Vr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}function Hl(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function jl(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const bs=r=>typeof r=="bigint"&&Li<=r;function Ui(r,t,e){return bs(r)&&bs(t)&&bs(e)&&t<=r&&r<e}function Ye(r,t,e,n){if(!Ui(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function ac(r){let t;for(t=0;r>Li;r>>=Ni,t+=1);return t}function Vl(r,t){return r>>BigInt(t)&Ni}function Gl(r,t,e){return r|(e?Ni:Li)<<BigInt(t)}const _o=r=>(ql<<BigInt(r-1))-Ni,vs=r=>new Uint8Array(r),aa=r=>Uint8Array.from(r);function cc(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=vs(r),s=vs(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...b)=>e(s,n,...b),u=(b=vs())=>{s=a(aa([0]),b),n=a(),b.length!==0&&(s=a(aa([1]),b),n=a())},g=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const B=[];for(;b<t;){n=a();const x=n.slice();B.push(x),b+=n.length}return Zn(...B)};return(b,B)=>{o(),u(b);let x;for(;!(x=B(g()));)u();return o(),x}}const Zl={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Vn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function xr(r,t,e={}){const n=(s,i,o)=>{const a=Zl[i];if(typeof a!="function")throw new Error("invalid validator function");const u=r[s];if(!(o&&u===void 0)&&!a(u,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+u)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Yl=()=>{throw new Error("not implemented")};function Dr(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}const Jl=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Ye,abool:bn,abytes:Vr,bitGet:Vl,bitLen:ac,bitMask:_o,bitSet:Gl,bytesToHex:Gn,bytesToNumberBE:Hn,bytesToNumberLE:lr,concatBytes:Zn,createHmacDrbg:cc,ensureBytes:ge,equalBytes:Hl,hexToBytes:gr,hexToNumber:xo,inRange:Ui,isBytes:Vn,memoized:Dr,notImplemented:Yl,numberToBytesBE:pr,numberToBytesLE:zr,numberToHexUnpadded:or,numberToVarBytesBE:$l,utf8ToBytes:jl,validateObject:xr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const me=BigInt(0),$t=BigInt(1),Pn=BigInt(2),Xl=BigInt(3),Xs=BigInt(4),ca=BigInt(5),ua=BigInt(8);function qt(r,t){const e=r%t;return e>=me?e:t+e}function Ql(r,t,e){if(t<me)throw new Error("invalid exponent, negatives unsupported");if(e<=me)throw new Error("invalid modulus");if(e===$t)return me;let n=$t;for(;t>me;)t&$t&&(n=n*r%e),r=r*r%e,t>>=$t;return n}function Vt(r,t,e){let n=r;for(;t-- >me;)n*=n,n%=e;return n}function Qs(r,t){if(r===me)throw new Error("invert: expected non-zero number");if(t<=me)throw new Error("invert: expected positive modulus, got "+t);let e=qt(r,t),n=t,s=me,i=$t;for(;e!==me;){const a=n/e,u=n%e,g=s-i*a;n=e,e=u,s=i,i=g}if(n!==$t)throw new Error("invert: does not exist");return qt(s,t)}function tf(r){const t=(r-$t)/Pn;let e,n,s;for(e=r-$t,n=0;e%Pn===me;e/=Pn,n++);for(s=Pn;s<r&&Ql(s,t,r)!==r-$t;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+$t)/Xs;return function(u,g){const y=u.pow(g,o);if(!u.eql(u.sqr(y),g))throw new Error("Cannot find square root");return y}}const i=(e+$t)/Pn;return function(a,u){if(a.pow(u,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let g=n,y=a.pow(a.mul(a.ONE,s),e),b=a.pow(u,i),B=a.pow(u,e);for(;!a.eql(B,a.ONE);){if(a.eql(B,a.ZERO))return a.ZERO;let x=1;for(let R=a.sqr(B);x<g&&!a.eql(R,a.ONE);x++)R=a.sqr(R);const I=a.pow(y,$t<<BigInt(g-x-1));y=a.sqr(I),b=a.mul(b,I),B=a.mul(B,y),g=x}return b}}function ef(r){if(r%Xs===Xl){const t=(r+$t)/Xs;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%ua===ca){const t=(r-ca)/ua;return function(n,s){const i=n.mul(s,Pn),o=n.pow(i,t),a=n.mul(s,o),u=n.mul(n.mul(a,Pn),o),g=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(g),s))throw new Error("Cannot find square root");return g}}return tf(r)}const nf=(r,t)=>(qt(r,t)&$t)===$t,rf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sf(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=rf.reduce((n,s)=>(n[s]="function",n),t);return xr(r,e)}function of(r,t,e){if(e<me)throw new Error("invalid exponent, negatives unsupported");if(e===me)return r.ONE;if(e===$t)return t;let n=r.ONE,s=t;for(;e>me;)e&$t&&(n=r.mul(n,s)),s=r.sqr(s),e>>=$t;return n}function af(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function uc(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Pi(r,t,e=!1,n={}){if(r<=me)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=uc(r,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:r,isLE:e,BITS:s,BYTES:i,MASK:_o(s),ZERO:me,ONE:$t,create:u=>qt(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return me<=u&&u<r},is0:u=>u===me,isOdd:u=>(u&$t)===$t,neg:u=>qt(-u,r),eql:(u,g)=>u===g,sqr:u=>qt(u*u,r),add:(u,g)=>qt(u+g,r),sub:(u,g)=>qt(u-g,r),mul:(u,g)=>qt(u*g,r),pow:(u,g)=>of(a,u,g),div:(u,g)=>qt(u*Qs(g,r),r),sqrN:u=>u*u,addN:(u,g)=>u+g,subN:(u,g)=>u-g,mulN:(u,g)=>u*g,inv:u=>Qs(u,r),sqrt:n.sqrt||(u=>(o||(o=ef(r)),o(a,u))),invertBatch:u=>af(a,u),cmov:(u,g,y)=>y?g:u,toBytes:u=>e?zr(u,i):pr(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return e?lr(u):Hn(u)}});return Object.freeze(a)}function lc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function fc(r){const t=lc(r);return t+Math.ceil(t/2)}function cf(r,t,e=!1){const n=r.length,s=lc(t),i=fc(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?lr(r):Hn(r),a=qt(o,t-$t)+$t;return e?zr(a,s):pr(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const la=BigInt(0),ti=BigInt(1);function Es(r,t){const e=t.negate();return r?e:t}function hc(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function Ss(r,t){hc(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1);return{windows:e,windowSize:n}}function uf(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function lf(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const xs=new WeakMap,dc=new WeakMap;function _s(r){return dc.get(r)||1}function gc(r,t){return{constTimeNegate:Es,hasPrecomputes(e){return _s(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>la;)n&ti&&(s=s.add(i)),i=i.double(),n>>=ti;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=Ss(n,t),o=[];let a=e,u=a;for(let g=0;g<s;g++){u=a,o.push(u);for(let y=1;y<i;y++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(e,n,s){const{windows:i,windowSize:o}=Ss(e,t);let a=r.ZERO,u=r.BASE;const g=BigInt(2**e-1),y=2**e,b=BigInt(e);for(let B=0;B<i;B++){const x=B*o;let I=Number(s&g);s>>=b,I>o&&(I-=y,s+=ti);const R=x,E=x+Math.abs(I)-1,C=B%2!==0,N=I<0;I===0?u=u.add(Es(C,n[R])):a=a.add(Es(N,n[E]))}return{p:a,f:u}},wNAFUnsafe(e,n,s,i=r.ZERO){const{windows:o,windowSize:a}=Ss(e,t),u=BigInt(2**e-1),g=2**e,y=BigInt(e);for(let b=0;b<o;b++){const B=b*a;if(s===la)break;let x=Number(s&u);if(s>>=y,x>a&&(x-=g,s+=ti),x===0)continue;let I=n[B+Math.abs(x)-1];x<0&&(I=I.negate()),i=i.add(I)}return i},getPrecomputes(e,n,s){let i=xs.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&xs.set(n,s(i))),i},wNAFCached(e,n,s){const i=_s(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=_s(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){hc(n,t),dc.set(e,n),xs.delete(e)}}}function pc(r,t,e,n){if(uf(e,r),lf(n,t),e.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,i=ac(BigInt(e.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,u=new Array(a+1).fill(s),g=Math.floor((t.BITS-1)/o)*o;let y=s;for(let b=g;b>=0;b-=o){u.fill(s);for(let x=0;x<n.length;x++){const I=n[x],R=Number(I>>BigInt(b)&BigInt(a));u[R]=u[R].add(e[x])}let B=s;for(let x=u.length-1,I=s;x>0;x--)I=I.add(u[x]),B=B.add(I);if(y=y.add(B),b!==0)for(let x=0;x<o;x++)y=y.double()}return y}function Ao(r){return sf(r.Fp),xr(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uc(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qe=BigInt(0),Pe=BigInt(1),ei=BigInt(2),ff=BigInt(8),hf={zip215:!0};function df(r){const t=Ao(r);return xr(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function gf(r){const t=df(r),{Fp:e,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=t,g=ei<<BigInt(a*8)-Pe,y=e.create,b=Pi(t.n,t.nBitLength),B=t.uvRatio||((p,w)=>{try{return{isValid:!0,value:e.sqrt(p*e.inv(w))}}catch{return{isValid:!1,value:Qe}}}),x=t.adjustScalarBytes||(p=>p),I=t.domain||((p,w,v)=>{if(bn("phflag",v),w.length||v)throw new Error("Contexts/pre-hash are not supported");return p});function R(p,w){Ye("coordinate "+p,w,Qe,g)}function E(p){if(!(p instanceof T))throw new Error("ExtendedPoint expected")}const C=Dr((p,w)=>{const{ex:v,ey:k,ez:L}=p,S=p.is0();w==null&&(w=S?ff:e.inv(L));const h=y(v*w),A=y(k*w),j=y(L*w);if(S)return{x:Qe,y:Pe};if(j!==Pe)throw new Error("invZ was invalid");return{x:h,y:A}}),N=Dr(p=>{const{a:w,d:v}=t;if(p.is0())throw new Error("bad point: ZERO");const{ex:k,ey:L,ez:S,et:h}=p,A=y(k*k),j=y(L*L),Z=y(S*S),X=y(Z*Z),vt=y(A*w),at=y(Z*y(vt+j)),ht=y(X+y(v*y(A*j)));if(at!==ht)throw new Error("bad point: equation left != right (1)");const jt=y(k*L),Et=y(S*h);if(jt!==Et)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(w,v,k,L){this.ex=w,this.ey=v,this.ez=k,this.et=L,R("x",w),R("y",v),R("z",k),R("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof T)throw new Error("extended point not allowed");const{x:v,y:k}=w||{};return R("x",v),R("y",k),new T(v,k,Pe,y(v*k))}static normalizeZ(w){const v=e.invertBatch(w.map(k=>k.ez));return w.map((k,L)=>k.toAffine(v[L])).map(T.fromAffine)}static msm(w,v){return pc(T,b,w,v)}_setWindowSize(w){D.setWindowSize(this,w)}assertValidity(){N(this)}equals(w){E(w);const{ex:v,ey:k,ez:L}=this,{ex:S,ey:h,ez:A}=w,j=y(v*A),Z=y(S*L),X=y(k*A),vt=y(h*L);return j===Z&&X===vt}is0(){return this.equals(T.ZERO)}negate(){return new T(y(-this.ex),this.ey,this.ez,y(-this.et))}double(){const{a:w}=t,{ex:v,ey:k,ez:L}=this,S=y(v*v),h=y(k*k),A=y(ei*y(L*L)),j=y(w*S),Z=v+k,X=y(y(Z*Z)-S-h),vt=j+h,at=vt-A,ht=j-h,jt=y(X*at),Et=y(vt*ht),bt=y(X*ht),Zt=y(at*vt);return new T(jt,Et,Zt,bt)}add(w){E(w);const{a:v,d:k}=t,{ex:L,ey:S,ez:h,et:A}=this,{ex:j,ey:Z,ez:X,et:vt}=w;if(v===BigInt(-1)){const Lt=y((S-L)*(Z+j)),Mt=y((S+L)*(Z-j)),be=y(Mt-Lt);if(be===Qe)return this.double();const Tt=y(h*ei*vt),Ut=y(A*ei*X),Ue=Ut+Tt,Pt=Mt+Lt,m=Ut-Tt,l=y(Ue*be),f=y(Pt*m),_=y(Ue*m),U=y(be*Pt);return new T(l,f,U,_)}const at=y(L*j),ht=y(S*Z),jt=y(A*k*vt),Et=y(h*X),bt=y((L+S)*(j+Z)-at-ht),Zt=Et-jt,xt=Et+jt,_t=y(ht-v*at),tr=y(bt*Zt),Ct=y(xt*_t),zt=y(bt*_t),er=y(Zt*xt);return new T(tr,Ct,er,zt)}subtract(w){return this.add(w.negate())}wNAF(w){return D.wNAFCached(this,w,T.normalizeZ)}multiply(w){const v=w;Ye("scalar",v,Pe,n);const{p:k,f:L}=this.wNAF(v);return T.normalizeZ([k,L])[0]}multiplyUnsafe(w,v=T.ZERO){const k=w;return Ye("scalar",k,Qe,n),k===Qe?q:this.is0()||k===Pe?this:D.wNAFCachedUnsafe(this,k,T.normalizeZ,v)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return D.unsafeLadder(this,n).is0()}toAffine(w){return C(this,w)}clearCofactor(){const{h:w}=t;return w===Pe?this:this.multiplyUnsafe(w)}static fromHex(w,v=!1){const{d:k,a:L}=t,S=e.BYTES;w=ge("pointHex",w,S),bn("zip215",v);const h=w.slice(),A=w[S-1];h[S-1]=A&-129;const j=lr(h),Z=v?g:e.ORDER;Ye("pointHex.y",j,Qe,Z);const X=y(j*j),vt=y(X-Pe),at=y(k*X-L);let{isValid:ht,value:jt}=B(vt,at);if(!ht)throw new Error("Point.fromHex: invalid y coordinate");const Et=(jt&Pe)===Pe,bt=(A&128)!==0;if(!v&&jt===Qe&&bt)throw new Error("Point.fromHex: x=0 and x_0=1");return bt!==Et&&(jt=y(-jt)),T.fromAffine({x:jt,y:j})}static fromPrivateKey(w){return V(w).point}toRawBytes(){const{x:w,y:v}=this.toAffine(),k=zr(v,e.BYTES);return k[k.length-1]|=w&Pe?128:0,k}toHex(){return Gn(this.toRawBytes())}}T.BASE=new T(t.Gx,t.Gy,Pe,y(t.Gx*t.Gy)),T.ZERO=new T(Qe,Pe,Pe,Qe);const{BASE:P,ZERO:q}=T,D=gc(T,a*8);function K(p){return qt(p,n)}function H(p){return K(lr(p))}function V(p){const w=e.BYTES;p=ge("private key",p,w);const v=ge("hashed private key",i(p),2*w),k=x(v.slice(0,w)),L=v.slice(w,2*w),S=H(k),h=P.multiply(S),A=h.toRawBytes();return{head:k,prefix:L,scalar:S,point:h,pointBytes:A}}function ut(p){return V(p).pointBytes}function tt(p=new Uint8Array,...w){const v=Zn(...w);return H(i(I(v,ge("context",p),!!s)))}function et(p,w,v={}){p=ge("message",p),s&&(p=s(p));const{prefix:k,scalar:L,pointBytes:S}=V(w),h=tt(v.context,k,p),A=P.multiply(h).toRawBytes(),j=tt(v.context,A,S,p),Z=K(h+j*L);Ye("signature.s",Z,Qe,n);const X=Zn(A,zr(Z,e.BYTES));return ge("result",X,e.BYTES*2)}const M=hf;function c(p,w,v,k=M){const{context:L,zip215:S}=k,h=e.BYTES;p=ge("signature",p,2*h),w=ge("message",w),v=ge("publicKey",v,h),S!==void 0&&bn("zip215",S),s&&(w=s(w));const A=lr(p.slice(h,2*h));let j,Z,X;try{j=T.fromHex(v,S),Z=T.fromHex(p.slice(0,h),S),X=P.multiplyUnsafe(A)}catch{return!1}if(!S&&j.isSmallOrder())return!1;const vt=tt(L,Z.toRawBytes(),j.toRawBytes(),w);return Z.add(j.multiplyUnsafe(vt)).subtract(X).clearCofactor().equals(T.ZERO)}return P._setWindowSize(8),{CURVE:t,getPublicKey:ut,sign:et,verify:c,ExtendedPoint:T,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>o(e.BYTES),precompute(p=8,w=T.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),fa=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const pf=BigInt(1),ha=BigInt(2);BigInt(3);const yf=BigInt(5),wf=BigInt(8);function mf(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=Bo,a=r*r%i*r%i,u=Vt(a,ha,i)*a%i,g=Vt(u,pf,i)*r%i,y=Vt(g,yf,i)*g%i,b=Vt(y,t,i)*y%i,B=Vt(b,e,i)*b%i,x=Vt(B,n,i)*B%i,I=Vt(x,s,i)*x%i,R=Vt(I,s,i)*x%i,E=Vt(R,t,i)*y%i;return{pow_p_5_8:Vt(E,ha,i)*r%i,b2:a}}function bf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function vf(r,t){const e=Bo,n=qt(t*t*t,e),s=qt(n*n*t,e),i=mf(r*s).pow_p_5_8;let o=qt(r*n*i,e);const a=qt(t*o*o,e),u=o,g=qt(o*fa,e),y=a===r,b=a===qt(-r,e),B=a===qt(-r*fa,e);return y&&(o=u),(b||B)&&(o=g),nf(o,e)&&(o=qt(-o,e)),{isValid:y||b,value:o}}const Ef=(()=>Pi(Bo,void 0,!0))(),Sf=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ef,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:wf,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Wl,randomBytes:ic,adjustScalarBytes:bf,uvRatio:vf}))(),_r=(()=>gf(Sf))();var Io={exports:{}};const xf={},_f=Object.freeze(Object.defineProperty({__proto__:null,default:xf},Symbol.toStringTag,{value:"Module"})),Af=bo(_f);Io.exports;(function(r){(function(t,e){function n(M,c){if(!M)throw new Error(c||"Assertion failed")}function s(M,c){M.super_=c;var d=function(){};d.prototype=c.prototype,M.prototype=new d,M.prototype.constructor=M}function i(M,c,d){if(i.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(M||0,c||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Af.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,d){return c.cmp(d)>0?c:d},i.min=function(c,d){return c.cmp(d)<0?c:d},i.prototype._init=function(c,d,p){if(typeof c=="number")return this._initNumber(c,d,p);if(typeof c=="object")return this._initArray(c,d,p);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(d===16?this._parseHex(c,w,p):(this._parseBase(c,d,w),p==="le"&&this._initArray(this.toArray(),d,p)))},i.prototype._initNumber=function(c,d,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),d,p)},i.prototype._initArray=function(c,d,p){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v,k,L=0;if(p==="be")for(w=c.length-1,v=0;w>=0;w-=3)k=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[v]|=k<<L&67108863,this.words[v+1]=k>>>26-L&67108863,L+=24,L>=26&&(L-=26,v++);else if(p==="le")for(w=0,v=0;w<c.length;w+=3)k=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[v]|=k<<L&67108863,this.words[v+1]=k>>>26-L&67108863,L+=24,L>=26&&(L-=26,v++);return this._strip()};function a(M,c){var d=M.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+M)}function u(M,c,d){var p=a(M,d);return d-1>=c&&(p|=a(M,d-1)<<4),p}i.prototype._parseHex=function(c,d,p){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v=0,k=0,L;if(p==="be")for(w=c.length-1;w>=d;w-=2)L=u(c,d,w)<<v,this.words[k]|=L&67108863,v>=18?(v-=18,k+=1,this.words[k]|=L>>>26):v+=8;else{var S=c.length-d;for(w=S%2===0?d+1:d;w<c.length;w+=2)L=u(c,d,w)<<v,this.words[k]|=L&67108863,v>=18?(v-=18,k+=1,this.words[k]|=L>>>26):v+=8}this._strip()};function g(M,c,d,p){for(var w=0,v=0,k=Math.min(M.length,d),L=c;L<k;L++){var S=M.charCodeAt(L)-48;w*=p,S>=49?v=S-49+10:S>=17?v=S-17+10:v=S,n(S>=0&&v<p,"Invalid character"),w+=v}return w}i.prototype._parseBase=function(c,d,p){this.words=[0],this.length=1;for(var w=0,v=1;v<=67108863;v*=d)w++;w--,v=v/d|0;for(var k=c.length-p,L=k%w,S=Math.min(k,k-L)+p,h=0,A=p;A<S;A+=w)h=g(c,A,A+w,d),this.imuln(v),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(L!==0){var j=1;for(h=g(c,A,c.length,d),A=0;A<L;A++)j*=d;this.imuln(j),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function y(M,c){M.words=c.words,M.length=c.length,M.negative=c.negative,M.red=c.red}if(i.prototype._move=function(c){y(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{i.prototype.inspect=b}else i.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,d){c=c||10,d=d|0||1;var p;if(c===16||c==="hex"){p="";for(var w=0,v=0,k=0;k<this.length;k++){var L=this.words[k],S=((L<<w|v)&16777215).toString(16);v=L>>>24-w&16777215,w+=2,w>=26&&(w-=26,k--),v!==0||k!==this.length-1?p=B[6-S.length]+S+p:p=S+p}for(v!==0&&(p=v.toString(16)+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var h=x[c],A=I[c];p="";var j=this.clone();for(j.negative=0;!j.isZero();){var Z=j.modrn(A).toString(c);j=j.idivn(A),j.isZero()?p=Z+p:p=B[h-Z.length]+Z+p}for(this.isZero()&&(p="0"+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),i.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var R=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};i.prototype.toArrayLike=function(c,d,p){this._strip();var w=this.byteLength(),v=p||Math.max(1,w);n(w<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0");var k=R(c,v),L=d==="le"?"LE":"BE";return this["_toArrayLike"+L](k,w),k},i.prototype._toArrayLikeLE=function(c,d){for(var p=0,w=0,v=0,k=0;v<this.length;v++){var L=this.words[v]<<k|w;c[p++]=L&255,p<c.length&&(c[p++]=L>>8&255),p<c.length&&(c[p++]=L>>16&255),k===6?(p<c.length&&(c[p++]=L>>24&255),w=0,k=0):(w=L>>>24,k+=2)}if(p<c.length)for(c[p++]=w;p<c.length;)c[p++]=0},i.prototype._toArrayLikeBE=function(c,d){for(var p=c.length-1,w=0,v=0,k=0;v<this.length;v++){var L=this.words[v]<<k|w;c[p--]=L&255,p>=0&&(c[p--]=L>>8&255),p>=0&&(c[p--]=L>>16&255),k===6?(p>=0&&(c[p--]=L>>24&255),w=0,k=0):(w=L>>>24,k+=2)}if(p>=0)for(c[p--]=w;p>=0;)c[p--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var d=c,p=0;return d>=4096&&(p+=13,d>>>=13),d>=64&&(p+=7,d>>>=7),d>=8&&(p+=4,d>>>=4),d>=2&&(p+=2,d>>>=2),p+d},i.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,p=0;return d&8191||(p+=13,d>>>=13),d&127||(p+=7,d>>>=7),d&15||(p+=4,d>>>=4),d&3||(p+=2,d>>>=2),d&1||p++,p},i.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function E(M){for(var c=new Array(M.bitLength()),d=0;d<c.length;d++){var p=d/26|0,w=d%26;c[d]=M.words[p]>>>w&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var p=this._zeroBits(this.words[d]);if(c+=p,p!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=d.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var d,p;this.length>c.length?(d=this,p=c):(d=c,p=this);for(var w=0;w<p.length;w++)this.words[w]=d.words[w]^p.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,p=c%26;this._expand(d),p>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var p=c/26|0,w=c%26;return this._expand(p+1),d?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},i.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var p,w;this.length>c.length?(p=this,w=c):(p=c,w=this);for(var v=0,k=0;k<w.length;k++)d=(p.words[k]|0)+(w.words[k]|0)+v,this.words[k]=d&67108863,v=d>>>26;for(;v!==0&&k<p.length;k++)d=(p.words[k]|0)+v,this.words[k]=d&67108863,v=d>>>26;if(this.length=p.length,v!==0)this.words[this.length]=v,this.length++;else if(p!==this)for(;k<p.length;k++)this.words[k]=p.words[k];return this},i.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,v;p>0?(w=this,v=c):(w=c,v=this);for(var k=0,L=0;L<v.length;L++)d=(w.words[L]|0)-(v.words[L]|0)+k,k=d>>26,this.words[L]=d&67108863;for(;k!==0&&L<w.length;L++)d=(w.words[L]|0)+k,k=d>>26,this.words[L]=d&67108863;if(k===0&&L<w.length&&w!==this)for(;L<w.length;L++)this.words[L]=w.words[L];return this.length=Math.max(this.length,L),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function C(M,c,d){d.negative=c.negative^M.negative;var p=M.length+c.length|0;d.length=p,p=p-1|0;var w=M.words[0]|0,v=c.words[0]|0,k=w*v,L=k&67108863,S=k/67108864|0;d.words[0]=L;for(var h=1;h<p;h++){for(var A=S>>>26,j=S&67108863,Z=Math.min(h,c.length-1),X=Math.max(0,h-M.length+1);X<=Z;X++){var vt=h-X|0;w=M.words[vt]|0,v=c.words[X]|0,k=w*v+j,A+=k/67108864|0,j=k&67108863}d.words[h]=j|0,S=A|0}return S!==0?d.words[h]=S|0:d.length--,d._strip()}var N=function(c,d,p){var w=c.words,v=d.words,k=p.words,L=0,S,h,A,j=w[0]|0,Z=j&8191,X=j>>>13,vt=w[1]|0,at=vt&8191,ht=vt>>>13,jt=w[2]|0,Et=jt&8191,bt=jt>>>13,Zt=w[3]|0,xt=Zt&8191,_t=Zt>>>13,tr=w[4]|0,Ct=tr&8191,zt=tr>>>13,er=w[5]|0,Lt=er&8191,Mt=er>>>13,be=w[6]|0,Tt=be&8191,Ut=be>>>13,Ue=w[7]|0,Pt=Ue&8191,m=Ue>>>13,l=w[8]|0,f=l&8191,_=l>>>13,U=w[9]|0,O=U&8191,W=U>>>13,yt=v[0]|0,pt=yt&8191,dt=yt>>>13,Ot=v[1]|0,ft=Ot&8191,Yt=Ot>>>13,Jo=v[2]|0,Jt=Jo&8191,Xt=Jo>>>13,Xo=v[3]|0,Qt=Xo&8191,te=Xo>>>13,Qo=v[4]|0,ee=Qo&8191,ne=Qo>>>13,ta=v[5]|0,re=ta&8191,ie=ta>>>13,ea=v[6]|0,se=ea&8191,oe=ea>>>13,na=v[7]|0,ae=na&8191,ce=na>>>13,ra=v[8]|0,ue=ra&8191,le=ra>>>13,ia=v[9]|0,fe=ia&8191,he=ia>>>13;p.negative=c.negative^d.negative,p.length=19,S=Math.imul(Z,pt),h=Math.imul(Z,dt),h=h+Math.imul(X,pt)|0,A=Math.imul(X,dt);var Xi=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,S=Math.imul(at,pt),h=Math.imul(at,dt),h=h+Math.imul(ht,pt)|0,A=Math.imul(ht,dt),S=S+Math.imul(Z,ft)|0,h=h+Math.imul(Z,Yt)|0,h=h+Math.imul(X,ft)|0,A=A+Math.imul(X,Yt)|0;var Qi=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,S=Math.imul(Et,pt),h=Math.imul(Et,dt),h=h+Math.imul(bt,pt)|0,A=Math.imul(bt,dt),S=S+Math.imul(at,ft)|0,h=h+Math.imul(at,Yt)|0,h=h+Math.imul(ht,ft)|0,A=A+Math.imul(ht,Yt)|0,S=S+Math.imul(Z,Jt)|0,h=h+Math.imul(Z,Xt)|0,h=h+Math.imul(X,Jt)|0,A=A+Math.imul(X,Xt)|0;var ts=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ts>>>26)|0,ts&=67108863,S=Math.imul(xt,pt),h=Math.imul(xt,dt),h=h+Math.imul(_t,pt)|0,A=Math.imul(_t,dt),S=S+Math.imul(Et,ft)|0,h=h+Math.imul(Et,Yt)|0,h=h+Math.imul(bt,ft)|0,A=A+Math.imul(bt,Yt)|0,S=S+Math.imul(at,Jt)|0,h=h+Math.imul(at,Xt)|0,h=h+Math.imul(ht,Jt)|0,A=A+Math.imul(ht,Xt)|0,S=S+Math.imul(Z,Qt)|0,h=h+Math.imul(Z,te)|0,h=h+Math.imul(X,Qt)|0,A=A+Math.imul(X,te)|0;var es=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(es>>>26)|0,es&=67108863,S=Math.imul(Ct,pt),h=Math.imul(Ct,dt),h=h+Math.imul(zt,pt)|0,A=Math.imul(zt,dt),S=S+Math.imul(xt,ft)|0,h=h+Math.imul(xt,Yt)|0,h=h+Math.imul(_t,ft)|0,A=A+Math.imul(_t,Yt)|0,S=S+Math.imul(Et,Jt)|0,h=h+Math.imul(Et,Xt)|0,h=h+Math.imul(bt,Jt)|0,A=A+Math.imul(bt,Xt)|0,S=S+Math.imul(at,Qt)|0,h=h+Math.imul(at,te)|0,h=h+Math.imul(ht,Qt)|0,A=A+Math.imul(ht,te)|0,S=S+Math.imul(Z,ee)|0,h=h+Math.imul(Z,ne)|0,h=h+Math.imul(X,ee)|0,A=A+Math.imul(X,ne)|0;var ns=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ns>>>26)|0,ns&=67108863,S=Math.imul(Lt,pt),h=Math.imul(Lt,dt),h=h+Math.imul(Mt,pt)|0,A=Math.imul(Mt,dt),S=S+Math.imul(Ct,ft)|0,h=h+Math.imul(Ct,Yt)|0,h=h+Math.imul(zt,ft)|0,A=A+Math.imul(zt,Yt)|0,S=S+Math.imul(xt,Jt)|0,h=h+Math.imul(xt,Xt)|0,h=h+Math.imul(_t,Jt)|0,A=A+Math.imul(_t,Xt)|0,S=S+Math.imul(Et,Qt)|0,h=h+Math.imul(Et,te)|0,h=h+Math.imul(bt,Qt)|0,A=A+Math.imul(bt,te)|0,S=S+Math.imul(at,ee)|0,h=h+Math.imul(at,ne)|0,h=h+Math.imul(ht,ee)|0,A=A+Math.imul(ht,ne)|0,S=S+Math.imul(Z,re)|0,h=h+Math.imul(Z,ie)|0,h=h+Math.imul(X,re)|0,A=A+Math.imul(X,ie)|0;var rs=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(rs>>>26)|0,rs&=67108863,S=Math.imul(Tt,pt),h=Math.imul(Tt,dt),h=h+Math.imul(Ut,pt)|0,A=Math.imul(Ut,dt),S=S+Math.imul(Lt,ft)|0,h=h+Math.imul(Lt,Yt)|0,h=h+Math.imul(Mt,ft)|0,A=A+Math.imul(Mt,Yt)|0,S=S+Math.imul(Ct,Jt)|0,h=h+Math.imul(Ct,Xt)|0,h=h+Math.imul(zt,Jt)|0,A=A+Math.imul(zt,Xt)|0,S=S+Math.imul(xt,Qt)|0,h=h+Math.imul(xt,te)|0,h=h+Math.imul(_t,Qt)|0,A=A+Math.imul(_t,te)|0,S=S+Math.imul(Et,ee)|0,h=h+Math.imul(Et,ne)|0,h=h+Math.imul(bt,ee)|0,A=A+Math.imul(bt,ne)|0,S=S+Math.imul(at,re)|0,h=h+Math.imul(at,ie)|0,h=h+Math.imul(ht,re)|0,A=A+Math.imul(ht,ie)|0,S=S+Math.imul(Z,se)|0,h=h+Math.imul(Z,oe)|0,h=h+Math.imul(X,se)|0,A=A+Math.imul(X,oe)|0;var is=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(is>>>26)|0,is&=67108863,S=Math.imul(Pt,pt),h=Math.imul(Pt,dt),h=h+Math.imul(m,pt)|0,A=Math.imul(m,dt),S=S+Math.imul(Tt,ft)|0,h=h+Math.imul(Tt,Yt)|0,h=h+Math.imul(Ut,ft)|0,A=A+Math.imul(Ut,Yt)|0,S=S+Math.imul(Lt,Jt)|0,h=h+Math.imul(Lt,Xt)|0,h=h+Math.imul(Mt,Jt)|0,A=A+Math.imul(Mt,Xt)|0,S=S+Math.imul(Ct,Qt)|0,h=h+Math.imul(Ct,te)|0,h=h+Math.imul(zt,Qt)|0,A=A+Math.imul(zt,te)|0,S=S+Math.imul(xt,ee)|0,h=h+Math.imul(xt,ne)|0,h=h+Math.imul(_t,ee)|0,A=A+Math.imul(_t,ne)|0,S=S+Math.imul(Et,re)|0,h=h+Math.imul(Et,ie)|0,h=h+Math.imul(bt,re)|0,A=A+Math.imul(bt,ie)|0,S=S+Math.imul(at,se)|0,h=h+Math.imul(at,oe)|0,h=h+Math.imul(ht,se)|0,A=A+Math.imul(ht,oe)|0,S=S+Math.imul(Z,ae)|0,h=h+Math.imul(Z,ce)|0,h=h+Math.imul(X,ae)|0,A=A+Math.imul(X,ce)|0;var ss=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ss>>>26)|0,ss&=67108863,S=Math.imul(f,pt),h=Math.imul(f,dt),h=h+Math.imul(_,pt)|0,A=Math.imul(_,dt),S=S+Math.imul(Pt,ft)|0,h=h+Math.imul(Pt,Yt)|0,h=h+Math.imul(m,ft)|0,A=A+Math.imul(m,Yt)|0,S=S+Math.imul(Tt,Jt)|0,h=h+Math.imul(Tt,Xt)|0,h=h+Math.imul(Ut,Jt)|0,A=A+Math.imul(Ut,Xt)|0,S=S+Math.imul(Lt,Qt)|0,h=h+Math.imul(Lt,te)|0,h=h+Math.imul(Mt,Qt)|0,A=A+Math.imul(Mt,te)|0,S=S+Math.imul(Ct,ee)|0,h=h+Math.imul(Ct,ne)|0,h=h+Math.imul(zt,ee)|0,A=A+Math.imul(zt,ne)|0,S=S+Math.imul(xt,re)|0,h=h+Math.imul(xt,ie)|0,h=h+Math.imul(_t,re)|0,A=A+Math.imul(_t,ie)|0,S=S+Math.imul(Et,se)|0,h=h+Math.imul(Et,oe)|0,h=h+Math.imul(bt,se)|0,A=A+Math.imul(bt,oe)|0,S=S+Math.imul(at,ae)|0,h=h+Math.imul(at,ce)|0,h=h+Math.imul(ht,ae)|0,A=A+Math.imul(ht,ce)|0,S=S+Math.imul(Z,ue)|0,h=h+Math.imul(Z,le)|0,h=h+Math.imul(X,ue)|0,A=A+Math.imul(X,le)|0;var os=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(os>>>26)|0,os&=67108863,S=Math.imul(O,pt),h=Math.imul(O,dt),h=h+Math.imul(W,pt)|0,A=Math.imul(W,dt),S=S+Math.imul(f,ft)|0,h=h+Math.imul(f,Yt)|0,h=h+Math.imul(_,ft)|0,A=A+Math.imul(_,Yt)|0,S=S+Math.imul(Pt,Jt)|0,h=h+Math.imul(Pt,Xt)|0,h=h+Math.imul(m,Jt)|0,A=A+Math.imul(m,Xt)|0,S=S+Math.imul(Tt,Qt)|0,h=h+Math.imul(Tt,te)|0,h=h+Math.imul(Ut,Qt)|0,A=A+Math.imul(Ut,te)|0,S=S+Math.imul(Lt,ee)|0,h=h+Math.imul(Lt,ne)|0,h=h+Math.imul(Mt,ee)|0,A=A+Math.imul(Mt,ne)|0,S=S+Math.imul(Ct,re)|0,h=h+Math.imul(Ct,ie)|0,h=h+Math.imul(zt,re)|0,A=A+Math.imul(zt,ie)|0,S=S+Math.imul(xt,se)|0,h=h+Math.imul(xt,oe)|0,h=h+Math.imul(_t,se)|0,A=A+Math.imul(_t,oe)|0,S=S+Math.imul(Et,ae)|0,h=h+Math.imul(Et,ce)|0,h=h+Math.imul(bt,ae)|0,A=A+Math.imul(bt,ce)|0,S=S+Math.imul(at,ue)|0,h=h+Math.imul(at,le)|0,h=h+Math.imul(ht,ue)|0,A=A+Math.imul(ht,le)|0,S=S+Math.imul(Z,fe)|0,h=h+Math.imul(Z,he)|0,h=h+Math.imul(X,fe)|0,A=A+Math.imul(X,he)|0;var as=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(as>>>26)|0,as&=67108863,S=Math.imul(O,ft),h=Math.imul(O,Yt),h=h+Math.imul(W,ft)|0,A=Math.imul(W,Yt),S=S+Math.imul(f,Jt)|0,h=h+Math.imul(f,Xt)|0,h=h+Math.imul(_,Jt)|0,A=A+Math.imul(_,Xt)|0,S=S+Math.imul(Pt,Qt)|0,h=h+Math.imul(Pt,te)|0,h=h+Math.imul(m,Qt)|0,A=A+Math.imul(m,te)|0,S=S+Math.imul(Tt,ee)|0,h=h+Math.imul(Tt,ne)|0,h=h+Math.imul(Ut,ee)|0,A=A+Math.imul(Ut,ne)|0,S=S+Math.imul(Lt,re)|0,h=h+Math.imul(Lt,ie)|0,h=h+Math.imul(Mt,re)|0,A=A+Math.imul(Mt,ie)|0,S=S+Math.imul(Ct,se)|0,h=h+Math.imul(Ct,oe)|0,h=h+Math.imul(zt,se)|0,A=A+Math.imul(zt,oe)|0,S=S+Math.imul(xt,ae)|0,h=h+Math.imul(xt,ce)|0,h=h+Math.imul(_t,ae)|0,A=A+Math.imul(_t,ce)|0,S=S+Math.imul(Et,ue)|0,h=h+Math.imul(Et,le)|0,h=h+Math.imul(bt,ue)|0,A=A+Math.imul(bt,le)|0,S=S+Math.imul(at,fe)|0,h=h+Math.imul(at,he)|0,h=h+Math.imul(ht,fe)|0,A=A+Math.imul(ht,he)|0;var cs=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(cs>>>26)|0,cs&=67108863,S=Math.imul(O,Jt),h=Math.imul(O,Xt),h=h+Math.imul(W,Jt)|0,A=Math.imul(W,Xt),S=S+Math.imul(f,Qt)|0,h=h+Math.imul(f,te)|0,h=h+Math.imul(_,Qt)|0,A=A+Math.imul(_,te)|0,S=S+Math.imul(Pt,ee)|0,h=h+Math.imul(Pt,ne)|0,h=h+Math.imul(m,ee)|0,A=A+Math.imul(m,ne)|0,S=S+Math.imul(Tt,re)|0,h=h+Math.imul(Tt,ie)|0,h=h+Math.imul(Ut,re)|0,A=A+Math.imul(Ut,ie)|0,S=S+Math.imul(Lt,se)|0,h=h+Math.imul(Lt,oe)|0,h=h+Math.imul(Mt,se)|0,A=A+Math.imul(Mt,oe)|0,S=S+Math.imul(Ct,ae)|0,h=h+Math.imul(Ct,ce)|0,h=h+Math.imul(zt,ae)|0,A=A+Math.imul(zt,ce)|0,S=S+Math.imul(xt,ue)|0,h=h+Math.imul(xt,le)|0,h=h+Math.imul(_t,ue)|0,A=A+Math.imul(_t,le)|0,S=S+Math.imul(Et,fe)|0,h=h+Math.imul(Et,he)|0,h=h+Math.imul(bt,fe)|0,A=A+Math.imul(bt,he)|0;var us=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(us>>>26)|0,us&=67108863,S=Math.imul(O,Qt),h=Math.imul(O,te),h=h+Math.imul(W,Qt)|0,A=Math.imul(W,te),S=S+Math.imul(f,ee)|0,h=h+Math.imul(f,ne)|0,h=h+Math.imul(_,ee)|0,A=A+Math.imul(_,ne)|0,S=S+Math.imul(Pt,re)|0,h=h+Math.imul(Pt,ie)|0,h=h+Math.imul(m,re)|0,A=A+Math.imul(m,ie)|0,S=S+Math.imul(Tt,se)|0,h=h+Math.imul(Tt,oe)|0,h=h+Math.imul(Ut,se)|0,A=A+Math.imul(Ut,oe)|0,S=S+Math.imul(Lt,ae)|0,h=h+Math.imul(Lt,ce)|0,h=h+Math.imul(Mt,ae)|0,A=A+Math.imul(Mt,ce)|0,S=S+Math.imul(Ct,ue)|0,h=h+Math.imul(Ct,le)|0,h=h+Math.imul(zt,ue)|0,A=A+Math.imul(zt,le)|0,S=S+Math.imul(xt,fe)|0,h=h+Math.imul(xt,he)|0,h=h+Math.imul(_t,fe)|0,A=A+Math.imul(_t,he)|0;var ls=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ls>>>26)|0,ls&=67108863,S=Math.imul(O,ee),h=Math.imul(O,ne),h=h+Math.imul(W,ee)|0,A=Math.imul(W,ne),S=S+Math.imul(f,re)|0,h=h+Math.imul(f,ie)|0,h=h+Math.imul(_,re)|0,A=A+Math.imul(_,ie)|0,S=S+Math.imul(Pt,se)|0,h=h+Math.imul(Pt,oe)|0,h=h+Math.imul(m,se)|0,A=A+Math.imul(m,oe)|0,S=S+Math.imul(Tt,ae)|0,h=h+Math.imul(Tt,ce)|0,h=h+Math.imul(Ut,ae)|0,A=A+Math.imul(Ut,ce)|0,S=S+Math.imul(Lt,ue)|0,h=h+Math.imul(Lt,le)|0,h=h+Math.imul(Mt,ue)|0,A=A+Math.imul(Mt,le)|0,S=S+Math.imul(Ct,fe)|0,h=h+Math.imul(Ct,he)|0,h=h+Math.imul(zt,fe)|0,A=A+Math.imul(zt,he)|0;var fs=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(fs>>>26)|0,fs&=67108863,S=Math.imul(O,re),h=Math.imul(O,ie),h=h+Math.imul(W,re)|0,A=Math.imul(W,ie),S=S+Math.imul(f,se)|0,h=h+Math.imul(f,oe)|0,h=h+Math.imul(_,se)|0,A=A+Math.imul(_,oe)|0,S=S+Math.imul(Pt,ae)|0,h=h+Math.imul(Pt,ce)|0,h=h+Math.imul(m,ae)|0,A=A+Math.imul(m,ce)|0,S=S+Math.imul(Tt,ue)|0,h=h+Math.imul(Tt,le)|0,h=h+Math.imul(Ut,ue)|0,A=A+Math.imul(Ut,le)|0,S=S+Math.imul(Lt,fe)|0,h=h+Math.imul(Lt,he)|0,h=h+Math.imul(Mt,fe)|0,A=A+Math.imul(Mt,he)|0;var hs=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(hs>>>26)|0,hs&=67108863,S=Math.imul(O,se),h=Math.imul(O,oe),h=h+Math.imul(W,se)|0,A=Math.imul(W,oe),S=S+Math.imul(f,ae)|0,h=h+Math.imul(f,ce)|0,h=h+Math.imul(_,ae)|0,A=A+Math.imul(_,ce)|0,S=S+Math.imul(Pt,ue)|0,h=h+Math.imul(Pt,le)|0,h=h+Math.imul(m,ue)|0,A=A+Math.imul(m,le)|0,S=S+Math.imul(Tt,fe)|0,h=h+Math.imul(Tt,he)|0,h=h+Math.imul(Ut,fe)|0,A=A+Math.imul(Ut,he)|0;var ds=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ds>>>26)|0,ds&=67108863,S=Math.imul(O,ae),h=Math.imul(O,ce),h=h+Math.imul(W,ae)|0,A=Math.imul(W,ce),S=S+Math.imul(f,ue)|0,h=h+Math.imul(f,le)|0,h=h+Math.imul(_,ue)|0,A=A+Math.imul(_,le)|0,S=S+Math.imul(Pt,fe)|0,h=h+Math.imul(Pt,he)|0,h=h+Math.imul(m,fe)|0,A=A+Math.imul(m,he)|0;var gs=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(gs>>>26)|0,gs&=67108863,S=Math.imul(O,ue),h=Math.imul(O,le),h=h+Math.imul(W,ue)|0,A=Math.imul(W,le),S=S+Math.imul(f,fe)|0,h=h+Math.imul(f,he)|0,h=h+Math.imul(_,fe)|0,A=A+Math.imul(_,he)|0;var ps=(L+S|0)+((h&8191)<<13)|0;L=(A+(h>>>13)|0)+(ps>>>26)|0,ps&=67108863,S=Math.imul(O,fe),h=Math.imul(O,he),h=h+Math.imul(W,fe)|0,A=Math.imul(W,he);var ys=(L+S|0)+((h&8191)<<13)|0;return L=(A+(h>>>13)|0)+(ys>>>26)|0,ys&=67108863,k[0]=Xi,k[1]=Qi,k[2]=ts,k[3]=es,k[4]=ns,k[5]=rs,k[6]=is,k[7]=ss,k[8]=os,k[9]=as,k[10]=cs,k[11]=us,k[12]=ls,k[13]=fs,k[14]=hs,k[15]=ds,k[16]=gs,k[17]=ps,k[18]=ys,L!==0&&(k[19]=L,p.length++),p};Math.imul||(N=C);function T(M,c,d){d.negative=c.negative^M.negative,d.length=M.length+c.length;for(var p=0,w=0,v=0;v<d.length-1;v++){var k=w;w=0;for(var L=p&67108863,S=Math.min(v,c.length-1),h=Math.max(0,v-M.length+1);h<=S;h++){var A=v-h,j=M.words[A]|0,Z=c.words[h]|0,X=j*Z,vt=X&67108863;k=k+(X/67108864|0)|0,vt=vt+L|0,L=vt&67108863,k=k+(vt>>>26)|0,w+=k>>>26,k&=67108863}d.words[v]=L,p=k,k=w}return p!==0?d.words[v]=p:d.length--,d._strip()}function P(M,c,d){return T(M,c,d)}i.prototype.mulTo=function(c,d){var p,w=this.length+c.length;return this.length===10&&c.length===10?p=N(this,c,d):w<63?p=C(this,c,d):w<1024?p=T(this,c,d):p=P(this,c,d),p},i.prototype.mul=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},i.prototype.mulf=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),P(this,c,d)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var p=0,w=0;w<this.length;w++){var v=(this.words[w]|0)*c,k=(v&67108863)+(p&67108863);p>>=26,p+=v/67108864|0,p+=k>>>26,this.words[w]=k&67108863}return p!==0&&(this.words[w]=p,this.length++),d?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var d=E(c);if(d.length===0)return new i(1);for(var p=this,w=0;w<d.length&&d[w]===0;w++,p=p.sqr());if(++w<d.length)for(var v=p.sqr();w<d.length;w++,v=v.sqr())d[w]!==0&&(p=p.mul(v));return p},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,w=67108863>>>26-d<<26-d,v;if(d!==0){var k=0;for(v=0;v<this.length;v++){var L=this.words[v]&w,S=(this.words[v]|0)-L<<d;this.words[v]=S|k,k=L>>>26-d}k&&(this.words[v]=k,this.length++)}if(p!==0){for(v=this.length-1;v>=0;v--)this.words[v+p]=this.words[v];for(v=0;v<p;v++)this.words[v]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,d,p){n(typeof c=="number"&&c>=0);var w;d?w=(d-d%26)/26:w=0;var v=c%26,k=Math.min((c-v)/26,this.length),L=67108863^67108863>>>v<<v,S=p;if(w-=k,w=Math.max(0,w),S){for(var h=0;h<k;h++)S.words[h]=this.words[h];S.length=k}if(k!==0)if(this.length>k)for(this.length-=k,h=0;h<this.length;h++)this.words[h]=this.words[h+k];else this.words[0]=0,this.length=1;var A=0;for(h=this.length-1;h>=0&&(A!==0||h>=w);h--){var j=this.words[h]|0;this.words[h]=A<<26-v|j>>>v,A=j&L}return S&&A!==0&&(S.words[S.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,d,p){return n(this.negative===0),this.iushrn(c,d,p)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,w=1<<d;if(this.length<=p)return!1;var v=this.words[p];return!!(v&w)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(d!==0&&p++,this.length=Math.min(p,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,d,p){var w=c.length+p,v;this._expand(w);var k,L=0;for(v=0;v<c.length;v++){k=(this.words[v+p]|0)+L;var S=(c.words[v]|0)*d;k-=S&67108863,L=(k>>26)-(S/67108864|0),this.words[v+p]=k&67108863}for(;v<this.length-p;v++)k=(this.words[v+p]|0)+L,L=k>>26,this.words[v+p]=k&67108863;if(L===0)return this._strip();for(n(L===-1),L=0,v=0;v<this.length;v++)k=-(this.words[v]|0)+L,L=k>>26,this.words[v]=k&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,d){var p=this.length-c.length,w=this.clone(),v=c,k=v.words[v.length-1]|0,L=this._countBits(k);p=26-L,p!==0&&(v=v.ushln(p),w.iushln(p),k=v.words[v.length-1]|0);var S=w.length-v.length,h;if(d!=="mod"){h=new i(null),h.length=S+1,h.words=new Array(h.length);for(var A=0;A<h.length;A++)h.words[A]=0}var j=w.clone()._ishlnsubmul(v,1,S);j.negative===0&&(w=j,h&&(h.words[S]=1));for(var Z=S-1;Z>=0;Z--){var X=(w.words[v.length+Z]|0)*67108864+(w.words[v.length+Z-1]|0);for(X=Math.min(X/k|0,67108863),w._ishlnsubmul(v,X,Z);w.negative!==0;)X--,w.negative=0,w._ishlnsubmul(v,1,Z),w.isZero()||(w.negative^=1);h&&(h.words[Z]=X)}return h&&h._strip(),w._strip(),d!=="div"&&p!==0&&w.iushrn(p),{div:h||null,mod:w}},i.prototype.divmod=function(c,d,p){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,v,k;return this.negative!==0&&c.negative===0?(k=this.neg().divmod(c,d),d!=="mod"&&(w=k.div.neg()),d!=="div"&&(v=k.mod.neg(),p&&v.negative!==0&&v.iadd(c)),{div:w,mod:v}):this.negative===0&&c.negative!==0?(k=this.divmod(c.neg(),d),d!=="mod"&&(w=k.div.neg()),{div:w,mod:k.mod}):this.negative&c.negative?(k=this.neg().divmod(c.neg(),d),d!=="div"&&(v=k.mod.neg(),p&&v.negative!==0&&v.isub(c)),{div:k.div,mod:v}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,d)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var p=d.div.negative!==0?d.mod.isub(c):d.mod,w=c.ushrn(1),v=c.andln(1),k=p.cmp(w);return k<0||v===1&&k===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var p=(1<<26)%c,w=0,v=this.length-1;v>=0;v--)w=(p*w+(this.words[v]|0))%c;return d?-w:w},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var v=(this.words[w]|0)+p*67108864;this.words[w]=v/c|0,p=v%c}return this._strip(),d?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new i(1),v=new i(0),k=new i(0),L=new i(1),S=0;d.isEven()&&p.isEven();)d.iushrn(1),p.iushrn(1),++S;for(var h=p.clone(),A=d.clone();!d.isZero();){for(var j=0,Z=1;!(d.words[0]&Z)&&j<26;++j,Z<<=1);if(j>0)for(d.iushrn(j);j-- >0;)(w.isOdd()||v.isOdd())&&(w.iadd(h),v.isub(A)),w.iushrn(1),v.iushrn(1);for(var X=0,vt=1;!(p.words[0]&vt)&&X<26;++X,vt<<=1);if(X>0)for(p.iushrn(X);X-- >0;)(k.isOdd()||L.isOdd())&&(k.iadd(h),L.isub(A)),k.iushrn(1),L.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(k),v.isub(L)):(p.isub(d),k.isub(w),L.isub(v))}return{a:k,b:L,gcd:p.iushln(S)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new i(1),v=new i(0),k=p.clone();d.cmpn(1)>0&&p.cmpn(1)>0;){for(var L=0,S=1;!(d.words[0]&S)&&L<26;++L,S<<=1);if(L>0)for(d.iushrn(L);L-- >0;)w.isOdd()&&w.iadd(k),w.iushrn(1);for(var h=0,A=1;!(p.words[0]&A)&&h<26;++h,A<<=1);if(h>0)for(p.iushrn(h);h-- >0;)v.isOdd()&&v.iadd(k),v.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(v)):(p.isub(d),v.isub(w))}var j;return d.cmpn(1)===0?j=w:j=v,j.cmpn(0)<0&&j.iadd(c),j},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),p=c.clone();d.negative=0,p.negative=0;for(var w=0;d.isEven()&&p.isEven();w++)d.iushrn(1),p.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;p.isEven();)p.iushrn(1);var v=d.cmp(p);if(v<0){var k=d;d=p,p=k}else if(v===0||p.cmpn(1)===0)break;d.isub(p)}while(!0);return p.iushln(w)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,p=(c-d)/26,w=1<<d;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var v=w,k=p;v!==0&&k<this.length;k++){var L=this.words[k]|0;L+=v,v=L>>>26,L&=67108863,this.words[k]=L}return v!==0&&(this.words[k]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var p;if(this.length>1)p=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var w=this.words[0]|0;p=w===c?0:w<c?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,v=c.words[p]|0;if(w!==v){w<v?d=-1:w>v&&(d=1);break}}return d},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new tt(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var q={k256:null,p224:null,p192:null,p25519:null};function D(M,c){this.name=M,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},D.prototype.ireduce=function(c){var d=c,p;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),p=d.bitLength();while(p>this.n);var w=p<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},D.prototype.split=function(c,d){c.iushrn(this.n,0,d)},D.prototype.imulK=function(c){return c.imul(this.k)};function K(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(K,D),K.prototype.split=function(c,d){for(var p=4194303,w=Math.min(c.length,9),v=0;v<w;v++)d.words[v]=c.words[v];if(d.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var k=c.words[9];for(d.words[d.length++]=k&p,v=10;v<c.length;v++){var L=c.words[v]|0;c.words[v-10]=(L&p)<<4|k>>>22,k=L}k>>>=22,c.words[v-10]=k,k===0&&c.length>10?c.length-=10:c.length-=9},K.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,p=0;p<c.length;p++){var w=c.words[p]|0;d+=w*977,c.words[p]=d&67108863,d=w*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function H(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(H,D);function V(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(V,D);function ut(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ut,D),ut.prototype.imulK=function(c){for(var d=0,p=0;p<c.length;p++){var w=(c.words[p]|0)*19+d,v=w&67108863;w>>>=26,c.words[p]=v,d=w}return d!==0&&(c.words[c.length++]=d),c},i._prime=function(c){if(q[c])return q[c];var d;if(c==="k256")d=new K;else if(c==="p224")d=new H;else if(c==="p192")d=new V;else if(c==="p25519")d=new ut;else throw new Error("Unknown prime "+c);return q[c]=d,d};function tt(M){if(typeof M=="string"){var c=i._prime(M);this.m=c.p,this.prime=c}else n(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}tt.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},tt.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},tt.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(y(c,c.umod(this.m)._forceRed(this)),c)},tt.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},tt.prototype.add=function(c,d){this._verify2(c,d);var p=c.add(d);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},tt.prototype.iadd=function(c,d){this._verify2(c,d);var p=c.iadd(d);return p.cmp(this.m)>=0&&p.isub(this.m),p},tt.prototype.sub=function(c,d){this._verify2(c,d);var p=c.sub(d);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},tt.prototype.isub=function(c,d){this._verify2(c,d);var p=c.isub(d);return p.cmpn(0)<0&&p.iadd(this.m),p},tt.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},tt.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},tt.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},tt.prototype.isqr=function(c){return this.imul(c,c.clone())},tt.prototype.sqr=function(c){return this.mul(c,c)},tt.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(c,p)}for(var w=this.m.subn(1),v=0;!w.isZero()&&w.andln(1)===0;)v++,w.iushrn(1);n(!w.isZero());var k=new i(1).toRed(this),L=k.redNeg(),S=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,S).cmp(L)!==0;)h.redIAdd(L);for(var A=this.pow(h,w),j=this.pow(c,w.addn(1).iushrn(1)),Z=this.pow(c,w),X=v;Z.cmp(k)!==0;){for(var vt=Z,at=0;vt.cmp(k)!==0;at++)vt=vt.redSqr();n(at<X);var ht=this.pow(A,new i(1).iushln(X-at-1));j=j.redMul(ht),A=ht.redSqr(),Z=Z.redMul(A),X=at}return j},tt.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},tt.prototype.pow=function(c,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var p=4,w=new Array(1<<p);w[0]=new i(1).toRed(this),w[1]=c;for(var v=2;v<w.length;v++)w[v]=this.mul(w[v-1],c);var k=w[0],L=0,S=0,h=d.bitLength()%26;for(h===0&&(h=26),v=d.length-1;v>=0;v--){for(var A=d.words[v],j=h-1;j>=0;j--){var Z=A>>j&1;if(k!==w[0]&&(k=this.sqr(k)),Z===0&&L===0){S=0;continue}L<<=1,L|=Z,S++,!(S!==p&&(v!==0||j!==0))&&(k=this.mul(k,w[L]),S=0,L=0)}h=26}return k},tt.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},tt.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},i.mont=function(c){return new et(c)};function et(M){tt.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(et,tt),et.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},et.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},et.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(w).iushrn(this.shift),k=v;return v.cmp(this.m)>=0?k=v.isub(this.m):v.cmpn(0)<0&&(k=v.iadd(this.m)),k._forceRed(this)},et.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new i(0)._forceRed(this);var p=c.mul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(w).iushrn(this.shift),k=v;return v.cmp(this.m)>=0?k=v.isub(this.m):v.cmpn(0)<0&&(k=v.iadd(this.m)),k._forceRed(this)},et.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,rn)})(Io);var yc=Io.exports;const da=Sr(yc);var to={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=gt,n=e.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=n(o);return a!==void 0?typeof u=="string"?g.fill(a,u):g.fill(a):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(to,to.exports);var wc=to.exports,ni=wc.Buffer;function Bf(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function y(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=ni.from(x)),!ni.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var I=0,R=0,E=0,C=x.length;E!==C&&x[E]===0;)E++,I++;for(var N=(C-E)*g+1>>>0,T=new Uint8Array(N);E!==C;){for(var P=x[E],q=0,D=N-1;(P!==0||q<R)&&D!==-1;D--,q++)P+=256*T[D]>>>0,T[D]=P%o>>>0,P=P/o>>>0;if(P!==0)throw new Error("Non-zero carry");R=q,E++}for(var K=N-R;K!==N&&T[K]===0;)K++;for(var H=a.repeat(I);K<N;++K)H+=r.charAt(T[K]);return H}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return ni.alloc(0);for(var I=0,R=0,E=0;x[I]===a;)R++,I++;for(var C=(x.length-I)*u+1>>>0,N=new Uint8Array(C);I<x.length;){var T=x.charCodeAt(I);if(T>255)return;var P=t[T];if(P===255)return;for(var q=0,D=C-1;(P!==0||q<E)&&D!==-1;D--,q++)P+=o*N[D]>>>0,N[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");E=q,I++}for(var K=C-E;K!==C&&N[K]===0;)K++;var H=ni.allocUnsafe(R+(C-K));H.fill(0,0,R);for(var V=R;K!==C;)H[V++]=N[K++];return H}function B(x){var I=b(x);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:b,decode:B}}var If=Bf,kf=If,Rf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Mf=kf(Rf);const Be=Sr(Mf),Tf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),An=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bn=new Uint32Array(64);class Cf extends sc{constructor(){super(64,32,8,!1),this.A=An[0]|0,this.B=An[1]|0,this.C=An[2]|0,this.D=An[3]|0,this.E=An[4]|0,this.F=An[5]|0,this.G=An[6]|0,this.H=An[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[t,e,n,s,i,o,a,u]}set(t,e,n,s,i,o,a,u){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,e){for(let b=0;b<16;b++,e+=4)Bn[b]=t.getUint32(e,!1);for(let b=16;b<64;b++){const B=Bn[b-15],x=Bn[b-2],I=on(B,7)^on(B,18)^B>>>3,R=on(x,17)^on(x,19)^x>>>10;Bn[b]=R+Bn[b-7]+I+Bn[b-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:g,H:y}=this;for(let b=0;b<64;b++){const B=on(a,6)^on(a,11)^on(a,25),x=y+B+gl(a,u,g)+Tf[b]+Bn[b]|0,R=(on(n,2)^on(n,13)^on(n,22))+pl(n,s,i)|0;y=g,g=u,u=a,a=o+x|0,o=i,i=s,s=n,n=x+R|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,g=g+this.G|0,y=y+this.H|0,this.set(n,s,i,o,a,u,g,y)}roundClean(){Bn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const eo=rc(()=>new Cf);var Ae={},ri=wc.Buffer;function Lf(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function y(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=ri.from(x)),!ri.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var I=0,R=0,E=0,C=x.length;E!==C&&x[E]===0;)E++,I++;for(var N=(C-E)*g+1>>>0,T=new Uint8Array(N);E!==C;){for(var P=x[E],q=0,D=N-1;(P!==0||q<R)&&D!==-1;D--,q++)P+=256*T[D]>>>0,T[D]=P%o>>>0,P=P/o>>>0;if(P!==0)throw new Error("Non-zero carry");R=q,E++}for(var K=N-R;K!==N&&T[K]===0;)K++;for(var H=a.repeat(I);K<N;++K)H+=r.charAt(T[K]);return H}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return ri.alloc(0);for(var I=0,R=0,E=0;x[I]===a;)R++,I++;for(var C=(x.length-I)*u+1>>>0,N=new Uint8Array(C);I<x.length;){var T=x.charCodeAt(I);if(T>255)return;var P=t[T];if(P===255)return;for(var q=0,D=C-1;(P!==0||q<E)&&D!==-1;D--,q++)P+=o*N[D]>>>0,N[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");E=q,I++}for(var K=C-E;K!==C&&N[K]===0;)K++;var H=ri.allocUnsafe(R+(C-K));H.fill(0,0,R);for(var V=R;K!==C;)H[V++]=N[K++];return H}function B(x){var I=b(x);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:b,decode:B}}var Nf=Lf,Uf=Nf,Pf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Of=Uf(Pf);function yn(r,t,e){return t<=r&&r<=e}function Oi(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Ff(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,u=o&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function zf(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var wi=-1;function ko(r){this.tokens=[].slice.call(r)}ko.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():wi},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var yr=-1;function As(r,t){if(r)throw TypeError("Decoder error");return t||65533}var mi="utf-8";function bi(r,t){if(!(this instanceof bi))return new bi(r,t);if(r=r!==void 0?String(r).toLowerCase():mi,r!==mi)throw new Error("Encoding not supported. Only utf-8 is supported");t=Oi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bi.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Oi(e),this._streaming||(this._decoder=new Df({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ko(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==yr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===yr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),zf(i)}};function vi(r,t){if(!(this instanceof vi))return new vi(r,t);if(r=r!==void 0?String(r).toLowerCase():mi,r!==mi)throw new Error("Encoding not supported. Only utf-8 is supported");t=Oi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}vi.prototype={encode:function(t,e){t=t?String(t):"",e=Oi(e),this._streaming||(this._encoder=new Wf(this._options)),this._streaming=!!e.stream;for(var n=[],s=new ko(Ff(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==yr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==yr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Df(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,u){if(u===wi&&s!==0)return s=0,As(t);if(u===wi)return yr;if(s===0){if(yn(u,0,127))return u;if(yn(u,194,223))s=1,e=u-192;else if(yn(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,e=u-224;else if(yn(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,e=u-240;else return As(t);return e=e<<6*s,null}if(!yn(u,i,o))return e=s=n=0,i=128,o=191,a.prepend(u),As(t);if(i=128,o=191,n+=1,e+=u-128<<6*(s-n),n!==s)return null;var g=e;return e=s=n=0,g}}function Wf(r){r.fatal,this.handler=function(t,e){if(e===wi)return yr;if(yn(e,0,127))return e;var n,s;yn(e,128,2047)?(n=1,s=192):yn(e,2048,65535)?(n=2,s=224):yn(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const qf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:bi,TextEncoder:vi},Symbol.toStringTag,{value:"Module"})),Kf=bo(qf);var $f=rn&&rn.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Hf=rn&&rn.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ln=rn&&rn.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},jf=rn&&rn.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&$f(t,r,e);return Hf(t,r),t},mc=rn&&rn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});var bc=Ae.deserializeUnchecked=Ac=Ae.deserialize=_c=Ae.serialize=Ae.BinaryReader=Ae.BinaryWriter=Ae.BorshError=Ae.baseDecode=Ae.baseEncode=void 0;const Mn=mc(yc),vc=mc(Of),Vf=jf(Kf),Gf=typeof TextDecoder!="function"?Vf.TextDecoder:TextDecoder,Zf=new Gf("utf-8",{fatal:!0});function Yf(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),vc.default.encode(Buffer.from(r))}Ae.baseEncode=Yf;function Jf(r){return Buffer.from(vc.default.decode(r))}Ae.baseDecode=Jf;const Bs=1024;class Le extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ae.BorshError=Le;class Ec{constructor(){this.buf=Buffer.alloc(Bs),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Bs)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Bs)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}Ae.BinaryWriter=Ec;function fn(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Le("Reached the end of buffer when deserializing")}throw i}}}class $e{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Mn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Mn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Mn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Mn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Le(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Zf.decode(e)}catch(n){throw new Le(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}ln([fn],$e.prototype,"readU8",null);ln([fn],$e.prototype,"readU16",null);ln([fn],$e.prototype,"readU32",null);ln([fn],$e.prototype,"readU64",null);ln([fn],$e.prototype,"readU128",null);ln([fn],$e.prototype,"readU256",null);ln([fn],$e.prototype,"readU512",null);ln([fn],$e.prototype,"readString",null);ln([fn],$e.prototype,"readFixedArray",null);ln([fn],$e.prototype,"readArray",null);Ae.BinaryReader=$e;function Sc(r){return r.charAt(0).toUpperCase()+r.slice(1)}function On(r,t,e,n,s){try{if(typeof n=="string")s[`write${Sc(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Le(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Le(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)On(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{On(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),On(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{On(r,t,o,n.key,s),On(r,t,i,n.value,s)});break}default:throw new Le(`FieldType ${n} unrecognized`)}else xc(r,e,s)}catch(i){throw i instanceof Le&&i.addToFieldPath(t),i}}function xc(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Le(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{On(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){e.writeU8(i),On(r,o,t[o],a,e);break}}}else throw new Le(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Xf(r,t,e=Ec){const n=new e;return xc(r,t,n),n.toArray()}var _c=Ae.serialize=Xf;function Fn(r,t,e,n){try{if(typeof e=="string")return n[`read${Sc(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(Fn(r,null,e[0],n));return s}else return n.readArray(()=>Fn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Fn(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=Fn(r,t,e.key,n),u=Fn(r,t,e.value,n);s.set(a,u)}return s}return Ro(r,e,n)}catch(s){throw s instanceof Le&&s.addToFieldPath(t),s}}function Ro(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Le(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=Fn(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new Le(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=Fn(r,i,o,e);return new t({[i]:a})}throw new Le(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Qf(r,t,e,n=$e){const s=new n(e),i=Ro(r,t,s);if(s.offset<e.length)throw new Le(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var Ac=Ae.deserialize=Qf;function th(r,t,e,n=$e){const s=new n(e);return Ro(r,t,s)}bc=Ae.deserializeUnchecked=th;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.s16=z.s8=z.nu64be=z.u48be=z.u40be=z.u32be=z.u24be=z.u16be=Ee=z.nu64=z.u48=z.u40=st=z.u32=z.u24=Ze=z.u16=kt=z.u8=jn=z.offset=z.greedy=z.Constant=z.UTF8=z.CString=z.Blob=z.Boolean=z.BitField=z.BitStructure=z.VariantLayout=z.Union=z.UnionLayoutDiscriminator=z.UnionDiscriminator=z.Structure=z.Sequence=z.DoubleBE=z.Double=z.FloatBE=z.Float=z.NearInt64BE=z.NearInt64=z.NearUInt64BE=z.NearUInt64=z.IntBE=z.Int=z.UIntBE=z.UInt=z.OffsetLayout=z.GreedyCount=z.ExternalLayout=z.bindConstructorLayout=z.nameWithProperty=z.Layout=z.uint8ArrayToBuffer=z.checkUint8Array=void 0;z.constant=z.utf8=z.cstr=Ft=z.blob=z.unionLayoutDiscriminator=z.union=Te=z.seq=z.bits=nt=z.struct=z.f64be=z.f64=z.f32be=z.f32=z.ns64be=z.s48be=z.s40be=z.s32be=z.s24be=z.s16be=De=z.ns64=z.s48=z.s40=z.s32=z.s24=void 0;const Mo=gt;function Ar(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}z.checkUint8Array=Ar;function It(r){return Ar(r),Mo.Buffer.from(r.buffer,r.byteOffset,r.length)}z.uint8ArrayToBuffer=It;class Rt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}z.Layout=Rt;function To(r,t){return t.property?r+"["+t.property+"]":r}z.nameWithProperty=To;function eh(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Rt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}z.bindConstructorLayout=eh;class Fe extends Rt{isCount(){throw new Error("ExternalLayout is abstract")}}z.ExternalLayout=Fe;class Bc extends Fe{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Ar(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}z.GreedyCount=Bc;class Co extends Fe{constructor(t,e=0,n){if(!(t instanceof Rt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Xe||this.layout instanceof nn}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}z.OffsetLayout=Co;class Xe extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return It(t).readUIntLE(e,this.span)}encode(t,e,n=0){return It(e).writeUIntLE(t,n,this.span),this.span}}z.UInt=Xe;class nn extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return It(t).readUIntBE(e,this.span)}encode(t,e,n=0){return It(e).writeUIntBE(t,n,this.span),this.span}}z.UIntBE=nn;class Yn extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return It(t).readIntLE(e,this.span)}encode(t,e,n=0){return It(e).writeIntLE(t,n,this.span),this.span}}z.Int=Yn;class Br extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return It(t).readIntBE(e,this.span)}encode(t,e,n=0){return It(e).writeIntBE(t,n,this.span),this.span}}z.IntBE=Br;const no=Math.pow(2,32);function Fi(r){const t=Math.floor(r/no),e=r-t*no;return{hi32:t,lo32:e}}function zi(r,t){return r*no+t}class Ic extends Rt{constructor(t){super(8,t)}decode(t,e=0){const n=It(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return zi(i,s)}encode(t,e,n=0){const s=Fi(t),i=It(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}z.NearUInt64=Ic;class kc extends Rt{constructor(t){super(8,t)}decode(t,e=0){const n=It(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return zi(s,i)}encode(t,e,n=0){const s=Fi(t),i=It(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}z.NearUInt64BE=kc;class Rc extends Rt{constructor(t){super(8,t)}decode(t,e=0){const n=It(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return zi(i,s)}encode(t,e,n=0){const s=Fi(t),i=It(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}z.NearInt64=Rc;class Mc extends Rt{constructor(t){super(8,t)}decode(t,e=0){const n=It(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return zi(s,i)}encode(t,e,n=0){const s=Fi(t),i=It(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}z.NearInt64BE=Mc;class Tc extends Rt{constructor(t){super(4,t)}decode(t,e=0){return It(t).readFloatLE(e)}encode(t,e,n=0){return It(e).writeFloatLE(t,n),4}}z.Float=Tc;class Cc extends Rt{constructor(t){super(4,t)}decode(t,e=0){return It(t).readFloatBE(e)}encode(t,e,n=0){return It(e).writeFloatBE(t,n),4}}z.FloatBE=Cc;class Lc extends Rt{constructor(t){super(8,t)}decode(t,e=0){return It(t).readDoubleLE(e)}encode(t,e,n=0){return It(e).writeDoubleLE(t,n),8}}z.Double=Lc;class Nc extends Rt{constructor(t){super(8,t)}decode(t,e=0){return It(t).readDoubleBE(e)}encode(t,e,n=0){return It(e).writeDoubleBE(t,n),8}}z.DoubleBE=Nc;class Uc extends Rt{constructor(t,e,n){if(!(t instanceof Rt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Fe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Fe)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Fe&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof Fe&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,a)=>o+s.encode(a,e,n+o),0);return this.count instanceof Fe&&this.count.encode(t.length,e,n),i}}z.Sequence=Uc;class Pc extends Rt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Rt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Ar(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const g=t[a.property];g!==void 0&&(o=a.encode(g,e,n),0>u&&(u=a.getSpan(e,n)))}i=n,n+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}z.Structure=Pc;class Lo{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}z.UnionDiscriminator=Lo;class Ei extends Lo{constructor(t,e){if(!(t instanceof Fe&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}z.UnionLayoutDiscriminator=Ei;class No extends Rt{constructor(t,e,n){let s;if(t instanceof Xe||t instanceof nn)s=new Ei(new Co(t));else if(t instanceof Fe&&t.isCount())s=new Ei(t);else if(t instanceof Lo)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Rt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Xe||t instanceof nn)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Xe||t instanceof nn,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(t,e+u)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(t[i.property],e,n),a+o.encode(t[o.property],e,n+a)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Oc(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}z.Union=No;class Oc extends Rt{constructor(t,e,n,s){if(!(t instanceof No))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Rt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}z.VariantLayout=Oc;function ir(r){return 0>r&&(r+=4294967296),r}class Uo extends Rt{constructor(t,e,n){if(!(t instanceof Xe||t instanceof nn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=ir(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Po(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Fc(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}z.BitStructure=Uo;class Po{constructor(t,e,n){if(!(t instanceof Uo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,a)=>o+a.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=ir(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return ir(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==ir(t&this.valueMask))throw new TypeError(To("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=ir(t<<this.start);this.container._packedSetValue(ir(e&~this.wordMask)|n)}}z.BitField=Po;let Fc=class extends Po{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};z.Boolean=Fc;class zc extends Rt{constructor(t,e){if(!(t instanceof Fe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Fe||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),It(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof Fe&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(To("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=It(t);return It(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof Fe&&this.length.encode(s,e,n),s}}z.Blob=zc;class Dc extends Rt{constructor(t){super(-1,t)}getSpan(t,e=0){Ar(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return It(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Mo.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=It(e);return s.copy(o,n),o[n+i]=0,i+1}}z.CString=Dc;class Wc extends Rt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Ar(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return It(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Mo.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(It(e),n),i}}z.UTF8=Wc;class qc extends Rt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}z.Constant=qc;z.greedy=(r,t)=>new Bc(r,t);var jn=z.offset=(r,t,e)=>new Co(r,t,e),kt=z.u8=r=>new Xe(1,r),Ze=z.u16=r=>new Xe(2,r);z.u24=r=>new Xe(3,r);var st=z.u32=r=>new Xe(4,r);z.u40=r=>new Xe(5,r);z.u48=r=>new Xe(6,r);var Ee=z.nu64=r=>new Ic(r);z.u16be=r=>new nn(2,r);z.u24be=r=>new nn(3,r);z.u32be=r=>new nn(4,r);z.u40be=r=>new nn(5,r);z.u48be=r=>new nn(6,r);z.nu64be=r=>new kc(r);z.s8=r=>new Yn(1,r);z.s16=r=>new Yn(2,r);z.s24=r=>new Yn(3,r);z.s32=r=>new Yn(4,r);z.s40=r=>new Yn(5,r);z.s48=r=>new Yn(6,r);var De=z.ns64=r=>new Rc(r);z.s16be=r=>new Br(2,r);z.s24be=r=>new Br(3,r);z.s32be=r=>new Br(4,r);z.s40be=r=>new Br(5,r);z.s48be=r=>new Br(6,r);z.ns64be=r=>new Mc(r);z.f32=r=>new Tc(r);z.f32be=r=>new Cc(r);z.f64=r=>new Lc(r);z.f64be=r=>new Nc(r);var nt=z.struct=(r,t,e)=>new Pc(r,t,e);z.bits=(r,t,e)=>new Uo(r,t,e);var Te=z.seq=(r,t,e)=>new Uc(r,t,e);z.union=(r,t,e)=>new No(r,t,e);z.unionLayoutDiscriminator=(r,t)=>new Ei(r,t);var Ft=z.blob=(r,t)=>new zc(r,t);z.cstr=r=>new Dc(r);z.utf8=(r,t)=>new Wc(r,t);z.constant=(r,t)=>new qc(r,t);var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});function nh(r){{const t=Buffer.from(r);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var rh=Gr.toBigIntLE=nh;function ih(r){{const t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Gr.toBigIntBE=ih;function sh(r,t){{const e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var oh=Gr.toBufferLE=sh;function ah(r,t){{const e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Gr.toBufferBE=ah;class ch extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function uh(r){return Zr(r)&&typeof r[Symbol.iterator]=="function"}function Zr(r){return typeof r=="object"&&r!=null}function Si(r){return Zr(r)&&!Array.isArray(r)}function sn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function lh(r){const{done:t,value:e}=r.next();return t?void 0:e}function fh(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${sn(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*ga(r,t,e,n){uh(r)||(r=[r]);for(const s of r){const i=fh(s,t,e,n);i&&(yield i)}}function*Oo(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let u="valid";for(const g of t.validator(r,a))g.explanation=e.message,u="not_valid",yield[g,void 0];for(let[g,y,b]of t.entries(r,a)){const B=Oo(y,b,{path:g===void 0?n:[...n,g],branch:g===void 0?s:[...s,y],coerce:i,mask:o,message:e.message});for(const x of B)x[0]?(u=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):i&&(y=x[1],g===void 0?r=y:r instanceof Map?r.set(g,y):r instanceof Set?r.add(y):Zr(r)&&(y!==void 0||g in r)&&(r[g]=y))}if(u!=="not_valid")for(const g of t.refiner(r,a))g.explanation=e.message,u="not_refined",yield[g,void 0];u==="valid"&&(yield[void 0,r])}let hn=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(u,g)=>{const y=s(u,g);return ga(y,g,this,u)}:this.validator=()=>[],i?this.refiner=(u,g)=>{const y=i(u,g);return ga(y,g,this,u)}:this.refiner=()=>[]}assert(t,e){return hh(t,this,e)}create(t,e){return Y(t,this,e)}is(t){return Kc(t,this)}mask(t,e){return dh(t,this,e)}validate(t,e={}){return Yr(t,this,e)}};function hh(r,t,e){const n=Yr(r,t,{message:e});if(n[0])throw n[0]}function Y(r,t,e){const n=Yr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function dh(r,t,e){const n=Yr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Kc(r,t){return!Yr(r,t)[0]}function Yr(r,t,e={}){const n=Oo(r,t,e),s=lh(n);return s[0]?[new ch(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Jn(r,t){return new hn({type:r,schema:null,validator:t})}function gh(){return Jn("any",()=>!0)}function J(r){return new hn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${sn(t)}`}})}function un(){return Jn("boolean",r=>typeof r=="boolean")}function Fo(r){return Jn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${sn(t)}`)}function Kt(r){const t=sn(r),e=typeof r;return new hn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${sn(n)}`}})}function ph(){return Jn("never",()=>!1)}function Q(r){return new hn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function F(){return Jn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${sn(r)}`)}function ot(r){return new hn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function $c(r,t){return new hn({type:"record",schema:null,*entries(e){if(Zr(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return Si(e)||`Expected an object, but received: ${sn(e)}`},coercer(e){return Si(e)?{...e}:e}})}function G(){return Jn("string",r=>typeof r=="string"||`Expected a string, but received: ${sn(r)}`)}function zo(r){const t=ph();return new hn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${sn(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function $(r){const t=Object.keys(r);return new hn({type:"type",schema:r,*entries(e){if(Zr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Si(e)||`Expected an object, but received: ${sn(e)}`},coercer(e){return Si(e)?{...e}:e}})}function Ne(r){const t=r.map(e=>e.type).join(" | ");return new hn({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Oo(e,i,n),[a]=o;if(a[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${sn(e)}`,...s]}})}function Ir(){return Jn("unknown",()=>!0)}function Jr(r,t,e){return new hn({...r,coercer:(n,s)=>Kc(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var ii,yh=new Uint8Array(16);function Hc(){if(!ii&&(ii=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ii))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ii(yh)}const wh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Di(r){return typeof r=="string"&&wh.test(r)}var ve=[];for(var Is=0;Is<256;++Is)ve.push((Is+256).toString(16).substr(1));function Wi(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ve[r[t+0]]+ve[r[t+1]]+ve[r[t+2]]+ve[r[t+3]]+"-"+ve[r[t+4]]+ve[r[t+5]]+"-"+ve[r[t+6]]+ve[r[t+7]]+"-"+ve[r[t+8]]+ve[r[t+9]]+"-"+ve[r[t+10]]+ve[r[t+11]]+ve[r[t+12]]+ve[r[t+13]]+ve[r[t+14]]+ve[r[t+15]]).toLowerCase();if(!Di(e))throw TypeError("Stringified UUID is invalid");return e}var pa,ks,Rs=0,Ms=0;function mh(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||pa,o=r.clockseq!==void 0?r.clockseq:ks;if(i==null||o==null){var a=r.random||(r.rng||Hc)();i==null&&(i=pa=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=ks=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Ms+1,y=u-Rs+(g-Ms)/1e4;if(y<0&&r.clockseq===void 0&&(o=o+1&16383),(y<0||u>Rs)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Rs=u,Ms=g,ks=o,u+=122192928e5;var b=((u&268435455)*1e4+g)%4294967296;s[n++]=b>>>24&255,s[n++]=b>>>16&255,s[n++]=b>>>8&255,s[n++]=b&255;var B=u/4294967296*1e4&268435455;s[n++]=B>>>8&255,s[n++]=B&255,s[n++]=B>>>24&15|16,s[n++]=B>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var x=0;x<6;++x)s[n+x]=i[x];return t||Wi(s)}function jc(r){if(!Di(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function bh(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var vh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Eh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Vc(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=bh(s)),typeof i=="string"&&(i=jc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(var g=0;g<16;++g)o[a+g]=u[g];return o}return Wi(u)}try{n.name=r}catch{}return n.DNS=vh,n.URL=Eh,n}function Sh(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return xh(_h(Ah(r),r.length*8))}function xh(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Gc(r){return(r+64>>>9<<4)+14+1}function _h(r,t){r[t>>5]|=128<<t%32,r[Gc(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,u=n,g=s,y=i;e=Ie(e,n,s,i,r[o],7,-680876936),i=Ie(i,e,n,s,r[o+1],12,-389564586),s=Ie(s,i,e,n,r[o+2],17,606105819),n=Ie(n,s,i,e,r[o+3],22,-1044525330),e=Ie(e,n,s,i,r[o+4],7,-176418897),i=Ie(i,e,n,s,r[o+5],12,1200080426),s=Ie(s,i,e,n,r[o+6],17,-1473231341),n=Ie(n,s,i,e,r[o+7],22,-45705983),e=Ie(e,n,s,i,r[o+8],7,1770035416),i=Ie(i,e,n,s,r[o+9],12,-1958414417),s=Ie(s,i,e,n,r[o+10],17,-42063),n=Ie(n,s,i,e,r[o+11],22,-1990404162),e=Ie(e,n,s,i,r[o+12],7,1804603682),i=Ie(i,e,n,s,r[o+13],12,-40341101),s=Ie(s,i,e,n,r[o+14],17,-1502002290),n=Ie(n,s,i,e,r[o+15],22,1236535329),e=ke(e,n,s,i,r[o+1],5,-165796510),i=ke(i,e,n,s,r[o+6],9,-1069501632),s=ke(s,i,e,n,r[o+11],14,643717713),n=ke(n,s,i,e,r[o],20,-373897302),e=ke(e,n,s,i,r[o+5],5,-701558691),i=ke(i,e,n,s,r[o+10],9,38016083),s=ke(s,i,e,n,r[o+15],14,-660478335),n=ke(n,s,i,e,r[o+4],20,-405537848),e=ke(e,n,s,i,r[o+9],5,568446438),i=ke(i,e,n,s,r[o+14],9,-1019803690),s=ke(s,i,e,n,r[o+3],14,-187363961),n=ke(n,s,i,e,r[o+8],20,1163531501),e=ke(e,n,s,i,r[o+13],5,-1444681467),i=ke(i,e,n,s,r[o+2],9,-51403784),s=ke(s,i,e,n,r[o+7],14,1735328473),n=ke(n,s,i,e,r[o+12],20,-1926607734),e=Re(e,n,s,i,r[o+5],4,-378558),i=Re(i,e,n,s,r[o+8],11,-2022574463),s=Re(s,i,e,n,r[o+11],16,1839030562),n=Re(n,s,i,e,r[o+14],23,-35309556),e=Re(e,n,s,i,r[o+1],4,-1530992060),i=Re(i,e,n,s,r[o+4],11,1272893353),s=Re(s,i,e,n,r[o+7],16,-155497632),n=Re(n,s,i,e,r[o+10],23,-1094730640),e=Re(e,n,s,i,r[o+13],4,681279174),i=Re(i,e,n,s,r[o],11,-358537222),s=Re(s,i,e,n,r[o+3],16,-722521979),n=Re(n,s,i,e,r[o+6],23,76029189),e=Re(e,n,s,i,r[o+9],4,-640364487),i=Re(i,e,n,s,r[o+12],11,-421815835),s=Re(s,i,e,n,r[o+15],16,530742520),n=Re(n,s,i,e,r[o+2],23,-995338651),e=Me(e,n,s,i,r[o],6,-198630844),i=Me(i,e,n,s,r[o+7],10,1126891415),s=Me(s,i,e,n,r[o+14],15,-1416354905),n=Me(n,s,i,e,r[o+5],21,-57434055),e=Me(e,n,s,i,r[o+12],6,1700485571),i=Me(i,e,n,s,r[o+3],10,-1894986606),s=Me(s,i,e,n,r[o+10],15,-1051523),n=Me(n,s,i,e,r[o+1],21,-2054922799),e=Me(e,n,s,i,r[o+8],6,1873313359),i=Me(i,e,n,s,r[o+15],10,-30611744),s=Me(s,i,e,n,r[o+6],15,-1560198380),n=Me(n,s,i,e,r[o+13],21,1309151649),e=Me(e,n,s,i,r[o+4],6,-145523070),i=Me(i,e,n,s,r[o+11],10,-1120210379),s=Me(s,i,e,n,r[o+2],15,718787259),n=Me(n,s,i,e,r[o+9],21,-343485551),e=Tn(e,a),n=Tn(n,u),s=Tn(s,g),i=Tn(i,y)}return[e,n,s,i]}function Ah(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Gc(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Tn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Bh(r,t){return r<<t|r>>>32-t}function qi(r,t,e,n,s,i){return Tn(Bh(Tn(Tn(t,r),Tn(n,i)),s),e)}function Ie(r,t,e,n,s,i,o){return qi(t&e|~t&n,r,t,s,i,o)}function ke(r,t,e,n,s,i,o){return qi(t&n|e&~n,r,t,s,i,o)}function Re(r,t,e,n,s,i,o){return qi(t^e^n,r,t,s,i,o)}function Me(r,t,e,n,s,i,o){return qi(e^(t|~n),r,t,s,i,o)}var Ih=Vc("v3",48,Sh);const kh=Ih;function Rh(r,t,e){r=r||{};var n=r.random||(r.rng||Hc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Wi(n)}function Mh(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Ts(r,t){return r<<t|r>>>32-t}function Th(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),u=0;u<o;++u){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=r[u*64+y*4]<<24|r[u*64+y*4+1]<<16|r[u*64+y*4+2]<<8|r[u*64+y*4+3];a[u]=g}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var B=new Uint32Array(80),x=0;x<16;++x)B[x]=a[b][x];for(var I=16;I<80;++I)B[I]=Ts(B[I-3]^B[I-8]^B[I-14]^B[I-16],1);for(var R=e[0],E=e[1],C=e[2],N=e[3],T=e[4],P=0;P<80;++P){var q=Math.floor(P/20),D=Ts(R,5)+Mh(q,E,C,N)+T+t[q]+B[P]>>>0;T=N,N=C,C=Ts(E,30)>>>0,E=R,R=D}e[0]=e[0]+R>>>0,e[1]=e[1]+E>>>0,e[2]=e[2]+C>>>0,e[3]=e[3]+N>>>0,e[4]=e[4]+T>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ch=Vc("v5",80,Th);const Lh=Ch,Nh="00000000-0000-0000-0000-000000000000";function Uh(r){if(!Di(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Ph=Object.freeze(Object.defineProperty({__proto__:null,NIL:Nh,parse:jc,stringify:Wi,v1:mh,v3:kh,v4:Rh,v5:Lh,validate:Di,version:Uh},Symbol.toStringTag,{value:"Module"})),Zc=bo(Ph),Oh=Zc.v4,Fh=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Oh()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var zh=Fh;const Dh=Zc.v4,Wh=zh,Wr=function(r,t){if(!(this instanceof Wr))return new Wr(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Dh()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var qh=Wr;Wr.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const g=typeof n=="function";try{i=Wh(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(y){if(g)return n(y);throw y}if(!g)return i}let u;try{u=JSON.stringify(i,this.options.replacer)}catch(g){return n(g)}return this.callServer(u,function(g,y){s._parseResponse(g,y,n)}),i};Wr.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const Kh=Sr(qh);var Yc={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,g,y){this.fn=u,this.context=g,this.once=y||!1}function i(u,g,y,b,B){if(typeof y!="function")throw new TypeError("The listener must be a function");var x=new s(y,b||u,B),I=e?e+g:g;return u._events[I]?u._events[I].fn?u._events[I]=[u._events[I],x]:u._events[I].push(x):(u._events[I]=x,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],y,b;if(this._eventsCount===0)return g;for(b in y=this._events)t.call(y,b)&&g.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(y)):g},a.prototype.listeners=function(g){var y=e?e+g:g,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var B=0,x=b.length,I=new Array(x);B<x;B++)I[B]=b[B].fn;return I},a.prototype.listenerCount=function(g){var y=e?e+g:g,b=this._events[y];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,y,b,B,x,I){var R=e?e+g:g;if(!this._events[R])return!1;var E=this._events[R],C=arguments.length,N,T;if(E.fn){switch(E.once&&this.removeListener(g,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,y),!0;case 3:return E.fn.call(E.context,y,b),!0;case 4:return E.fn.call(E.context,y,b,B),!0;case 5:return E.fn.call(E.context,y,b,B,x),!0;case 6:return E.fn.call(E.context,y,b,B,x,I),!0}for(T=1,N=new Array(C-1);T<C;T++)N[T-1]=arguments[T];E.fn.apply(E.context,N)}else{var P=E.length,q;for(T=0;T<P;T++)switch(E[T].once&&this.removeListener(g,E[T].fn,void 0,!0),C){case 1:E[T].fn.call(E[T].context);break;case 2:E[T].fn.call(E[T].context,y);break;case 3:E[T].fn.call(E[T].context,y,b);break;case 4:E[T].fn.call(E[T].context,y,b,B);break;default:if(!N)for(q=1,N=new Array(C-1);q<C;q++)N[q-1]=arguments[q];E[T].fn.apply(E[T].context,N)}}return!0},a.prototype.on=function(g,y,b){return i(this,g,y,b,!1)},a.prototype.once=function(g,y,b){return i(this,g,y,b,!0)},a.prototype.removeListener=function(g,y,b,B){var x=e?e+g:g;if(!this._events[x])return this;if(!y)return o(this,x),this;var I=this._events[x];if(I.fn)I.fn===y&&(!B||I.once)&&(!b||I.context===b)&&o(this,x);else{for(var R=0,E=[],C=I.length;R<C;R++)(I[R].fn!==y||B&&!I[R].once||b&&I[R].context!==b)&&E.push(I[R]);E.length?this._events[x]=E.length===1?E[0]:E:o(this,x)}return this},a.prototype.removeAllListeners=function(g){var y;return g?(y=e?e+g:g,this._events[y]&&o(this,y)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Yc);var $h=Yc.exports;const Jc=Sr($h);var Hh=class extends Jc{constructor(t,e,n){super();ye(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function jh(r,t){return new Hh(r,t)}var Vh=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Gh=class extends Jc{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},u,g){super();ye(this,"address");ye(this,"rpc_id");ye(this,"queue");ye(this,"options");ye(this,"autoconnect");ye(this,"ready");ye(this,"reconnect");ye(this,"reconnect_timer_id");ye(this,"reconnect_interval");ye(this,"max_reconnects");ye(this,"rest_options");ye(this,"current_reconnects");ye(this,"generate_request_id");ye(this,"socket");ye(this,"webSocketFactory");ye(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),g?this.dataPack=g:this.dataPack=new Vh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(u),s,g=>{if(g)return o(g);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=gt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class Xc extends nc{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ul(t);const n=So(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return yi(this),this.iHash.update(t),this}digestInto(t){yi(this),Ci(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qc=(r,t,e)=>new Xc(r,t).update(e).digest();Qc.create=(r,t)=>new Xc(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ya(r){r.lowS!==void 0&&bn("lowS",r.lowS),r.prehash!==void 0&&bn("prehash",r.prehash)}function Zh(r){const t=Ao(r);xr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Yh,hexToBytes:Jh}=Jl;class Xh extends Error{constructor(t=""){super(t)}}const pn={Err:Xh,_tlv:{encode:(r,t)=>{const{Err:e}=pn;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=or(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?or(s.length/2|128):"";return or(r)+i+s+t},decode(r,t){const{Err:e}=pn;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(n,n+u);if(g.length!==u)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const y of g)o=o<<8|y;if(n+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=pn;if(r<wn)throw new t("integer: negative integers are not allowed");let e=or(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=pn;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Yh(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=pn,s=typeof r=="string"?Jh(r):r;Vr(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,i),{v:g,l:y}=n.decode(2,u);if(y.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(g)}},hexFromSig(r){const{_tlv:t,_int:e}=pn,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},wn=BigInt(0),we=BigInt(1);BigInt(2);const wa=BigInt(3);BigInt(4);function Qh(r){const t=Zh(r),{Fp:e}=t,n=Pi(t.n,t.nBitLength),s=t.toBytes||((R,E,C)=>{const N=E.toAffine();return Zn(Uint8Array.from([4]),e.toBytes(N.x),e.toBytes(N.y))}),i=t.fromBytes||(R=>{const E=R.subarray(1),C=e.fromBytes(E.subarray(0,e.BYTES)),N=e.fromBytes(E.subarray(e.BYTES,2*e.BYTES));return{x:C,y:N}});function o(R){const{a:E,b:C}=t,N=e.sqr(R),T=e.mul(N,R);return e.add(e.add(T,e.mul(R,E)),C)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(R){return Ui(R,we,t.n)}function u(R){const{allowedPrivateKeyLengths:E,nByteLength:C,wrapPrivateKey:N,n:T}=t;if(E&&typeof R!="bigint"){if(Vn(R)&&(R=Gn(R)),typeof R!="string"||!E.includes(R.length))throw new Error("invalid private key");R=R.padStart(C*2,"0")}let P;try{P=typeof R=="bigint"?R:Hn(ge("private key",R,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof R)}return N&&(P=qt(P,T)),Ye("private key",P,we,T),P}function g(R){if(!(R instanceof B))throw new Error("ProjectivePoint expected")}const y=Dr((R,E)=>{const{px:C,py:N,pz:T}=R;if(e.eql(T,e.ONE))return{x:C,y:N};const P=R.is0();E==null&&(E=P?e.ONE:e.inv(T));const q=e.mul(C,E),D=e.mul(N,E),K=e.mul(T,E);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:q,y:D}}),b=Dr(R=>{if(R.is0()){if(t.allowInfinityPoint&&!e.is0(R.py))return;throw new Error("bad point: ZERO")}const{x:E,y:C}=R.toAffine();if(!e.isValid(E)||!e.isValid(C))throw new Error("bad point: x or y not FE");const N=e.sqr(C),T=o(E);if(!e.eql(N,T))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class B{constructor(E,C,N){if(this.px=E,this.py=C,this.pz=N,E==null||!e.isValid(E))throw new Error("x required");if(C==null||!e.isValid(C))throw new Error("y required");if(N==null||!e.isValid(N))throw new Error("z required");Object.freeze(this)}static fromAffine(E){const{x:C,y:N}=E||{};if(!E||!e.isValid(C)||!e.isValid(N))throw new Error("invalid affine point");if(E instanceof B)throw new Error("projective point not allowed");const T=P=>e.eql(P,e.ZERO);return T(C)&&T(N)?B.ZERO:new B(C,N,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const C=e.invertBatch(E.map(N=>N.pz));return E.map((N,T)=>N.toAffine(C[T])).map(B.fromAffine)}static fromHex(E){const C=B.fromAffine(i(ge("pointHex",E)));return C.assertValidity(),C}static fromPrivateKey(E){return B.BASE.multiply(u(E))}static msm(E,C){return pc(B,n,E,C)}_setWindowSize(E){I.setWindowSize(this,E)}assertValidity(){b(this)}hasEvenY(){const{y:E}=this.toAffine();if(e.isOdd)return!e.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){g(E);const{px:C,py:N,pz:T}=this,{px:P,py:q,pz:D}=E,K=e.eql(e.mul(C,D),e.mul(P,T)),H=e.eql(e.mul(N,D),e.mul(q,T));return K&&H}negate(){return new B(this.px,e.neg(this.py),this.pz)}double(){const{a:E,b:C}=t,N=e.mul(C,wa),{px:T,py:P,pz:q}=this;let D=e.ZERO,K=e.ZERO,H=e.ZERO,V=e.mul(T,T),ut=e.mul(P,P),tt=e.mul(q,q),et=e.mul(T,P);return et=e.add(et,et),H=e.mul(T,q),H=e.add(H,H),D=e.mul(E,H),K=e.mul(N,tt),K=e.add(D,K),D=e.sub(ut,K),K=e.add(ut,K),K=e.mul(D,K),D=e.mul(et,D),H=e.mul(N,H),tt=e.mul(E,tt),et=e.sub(V,tt),et=e.mul(E,et),et=e.add(et,H),H=e.add(V,V),V=e.add(H,V),V=e.add(V,tt),V=e.mul(V,et),K=e.add(K,V),tt=e.mul(P,q),tt=e.add(tt,tt),V=e.mul(tt,et),D=e.sub(D,V),H=e.mul(tt,ut),H=e.add(H,H),H=e.add(H,H),new B(D,K,H)}add(E){g(E);const{px:C,py:N,pz:T}=this,{px:P,py:q,pz:D}=E;let K=e.ZERO,H=e.ZERO,V=e.ZERO;const ut=t.a,tt=e.mul(t.b,wa);let et=e.mul(C,P),M=e.mul(N,q),c=e.mul(T,D),d=e.add(C,N),p=e.add(P,q);d=e.mul(d,p),p=e.add(et,M),d=e.sub(d,p),p=e.add(C,T);let w=e.add(P,D);return p=e.mul(p,w),w=e.add(et,c),p=e.sub(p,w),w=e.add(N,T),K=e.add(q,D),w=e.mul(w,K),K=e.add(M,c),w=e.sub(w,K),V=e.mul(ut,p),K=e.mul(tt,c),V=e.add(K,V),K=e.sub(M,V),V=e.add(M,V),H=e.mul(K,V),M=e.add(et,et),M=e.add(M,et),c=e.mul(ut,c),p=e.mul(tt,p),M=e.add(M,c),c=e.sub(et,c),c=e.mul(ut,c),p=e.add(p,c),et=e.mul(M,p),H=e.add(H,et),et=e.mul(w,p),K=e.mul(d,K),K=e.sub(K,et),et=e.mul(d,M),V=e.mul(w,V),V=e.add(V,et),new B(K,H,V)}subtract(E){return this.add(E.negate())}is0(){return this.equals(B.ZERO)}wNAF(E){return I.wNAFCached(this,E,B.normalizeZ)}multiplyUnsafe(E){const{endo:C,n:N}=t;Ye("scalar",E,wn,N);const T=B.ZERO;if(E===wn)return T;if(this.is0()||E===we)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,E,B.normalizeZ);let{k1neg:P,k1:q,k2neg:D,k2:K}=C.splitScalar(E),H=T,V=T,ut=this;for(;q>wn||K>wn;)q&we&&(H=H.add(ut)),K&we&&(V=V.add(ut)),ut=ut.double(),q>>=we,K>>=we;return P&&(H=H.negate()),D&&(V=V.negate()),V=new B(e.mul(V.px,C.beta),V.py,V.pz),H.add(V)}multiply(E){const{endo:C,n:N}=t;Ye("scalar",E,we,N);let T,P;if(C){const{k1neg:q,k1:D,k2neg:K,k2:H}=C.splitScalar(E);let{p:V,f:ut}=this.wNAF(D),{p:tt,f:et}=this.wNAF(H);V=I.constTimeNegate(q,V),tt=I.constTimeNegate(K,tt),tt=new B(e.mul(tt.px,C.beta),tt.py,tt.pz),T=V.add(tt),P=ut.add(et)}else{const{p:q,f:D}=this.wNAF(E);T=q,P=D}return B.normalizeZ([T,P])[0]}multiplyAndAddUnsafe(E,C,N){const T=B.BASE,P=(D,K)=>K===wn||K===we||!D.equals(T)?D.multiplyUnsafe(K):D.multiply(K),q=P(this,C).add(P(E,N));return q.is0()?void 0:q}toAffine(E){return y(this,E)}isTorsionFree(){const{h:E,isTorsionFree:C}=t;if(E===we)return!0;if(C)return C(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:C}=t;return E===we?this:C?C(B,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return bn("isCompressed",E),this.assertValidity(),s(B,this,E)}toHex(E=!0){return bn("isCompressed",E),Gn(this.toRawBytes(E))}}B.BASE=new B(t.Gx,t.Gy,e.ONE),B.ZERO=new B(e.ZERO,e.ONE,e.ZERO);const x=t.nBitLength,I=gc(B,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:B,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function td(r){const t=Ao(r);return xr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ed(r){const t=td(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(c){return qt(c,n)}function a(c){return Qs(c,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:g,weierstrassEquation:y,isWithinCurveOrder:b}=Qh({...t,toBytes(c,d,p){const w=d.toAffine(),v=e.toBytes(w.x),k=Zn;return bn("isCompressed",p),p?k(Uint8Array.from([d.hasEvenY()?2:3]),v):k(Uint8Array.from([4]),v,e.toBytes(w.y))},fromBytes(c){const d=c.length,p=c[0],w=c.subarray(1);if(d===s&&(p===2||p===3)){const v=Hn(w);if(!Ui(v,we,e.ORDER))throw new Error("Point is not on curve");const k=y(v);let L;try{L=e.sqrt(k)}catch(A){const j=A instanceof Error?": "+A.message:"";throw new Error("Point is not on curve"+j)}const S=(L&we)===we;return(p&1)===1!==S&&(L=e.neg(L)),{x:v,y:L}}else if(d===i&&p===4){const v=e.fromBytes(w.subarray(0,e.BYTES)),k=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:v,y:k}}else{const v=s,k=i;throw new Error("invalid Point, expected length of "+v+", or uncompressed "+k+", got "+d)}}}),B=c=>Gn(pr(c,t.nByteLength));function x(c){const d=n>>we;return c>d}function I(c){return x(c)?o(-c):c}const R=(c,d,p)=>Hn(c.slice(d,p));class E{constructor(d,p,w){this.r=d,this.s=p,this.recovery=w,this.assertValidity()}static fromCompact(d){const p=t.nByteLength;return d=ge("compactSignature",d,p*2),new E(R(d,0,p),R(d,p,2*p))}static fromDER(d){const{r:p,s:w}=pn.toSig(ge("DER",d));return new E(p,w)}assertValidity(){Ye("r",this.r,we,n),Ye("s",this.s,we,n)}addRecoveryBit(d){return new E(this.r,this.s,d)}recoverPublicKey(d){const{r:p,s:w,recovery:v}=this,k=D(ge("msgHash",d));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const L=v===2||v===3?p+t.n:p;if(L>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const S=v&1?"03":"02",h=u.fromHex(S+B(L)),A=a(L),j=o(-k*A),Z=o(w*A),X=u.BASE.multiplyAndAddUnsafe(h,j,Z);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return gr(this.toDERHex())}toDERHex(){return pn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gr(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const C={isValidPrivateKey(c){try{return g(c),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const c=fc(t.n);return cf(t.randomBytes(c),t.n)},precompute(c=8,d=u.BASE){return d._setWindowSize(c),d.multiply(BigInt(3)),d}};function N(c,d=!0){return u.fromPrivateKey(c).toRawBytes(d)}function T(c){const d=Vn(c),p=typeof c=="string",w=(d||p)&&c.length;return d?w===s||w===i:p?w===2*s||w===2*i:c instanceof u}function P(c,d,p=!0){if(T(c))throw new Error("first arg must be private key");if(!T(d))throw new Error("second arg must be public key");return u.fromHex(d).multiply(g(c)).toRawBytes(p)}const q=t.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const d=Hn(c),p=c.length*8-t.nBitLength;return p>0?d>>BigInt(p):d},D=t.bits2int_modN||function(c){return o(q(c))},K=_o(t.nBitLength);function H(c){return Ye("num < 2^"+t.nBitLength,c,wn,K),pr(c,t.nByteLength)}function V(c,d,p=ut){if(["recovered","canonical"].some(at=>at in p))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:v}=t;let{lowS:k,prehash:L,extraEntropy:S}=p;k==null&&(k=!0),c=ge("msgHash",c),ya(p),L&&(c=ge("prehashed msgHash",w(c)));const h=D(c),A=g(d),j=[H(A),H(h)];if(S!=null&&S!==!1){const at=S===!0?v(e.BYTES):S;j.push(ge("extraEntropy",at))}const Z=Zn(...j),X=h;function vt(at){const ht=q(at);if(!b(ht))return;const jt=a(ht),Et=u.BASE.multiply(ht).toAffine(),bt=o(Et.x);if(bt===wn)return;const Zt=o(jt*o(X+bt*A));if(Zt===wn)return;let xt=(Et.x===bt?0:2)|Number(Et.y&we),_t=Zt;return k&&x(Zt)&&(_t=I(Zt),xt^=1),new E(bt,_t,xt)}return{seed:Z,k2sig:vt}}const ut={lowS:t.lowS,prehash:!1},tt={lowS:t.lowS,prehash:!1};function et(c,d,p=ut){const{seed:w,k2sig:v}=V(c,d,p),k=t;return cc(k.hash.outputLen,k.nByteLength,k.hmac)(w,v)}u.BASE._setWindowSize(8);function M(c,d,p,w=tt){var xt;const v=c;d=ge("msgHash",d),p=ge("publicKey",p);const{lowS:k,prehash:L,format:S}=w;if(ya(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(S!==void 0&&S!=="compact"&&S!=="der")throw new Error("format must be compact or der");const h=typeof v=="string"||Vn(v),A=!h&&!S&&typeof v=="object"&&v!==null&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!h&&!A)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,Z;try{if(A&&(j=new E(v.r,v.s)),h){try{S!=="compact"&&(j=E.fromDER(v))}catch(_t){if(!(_t instanceof pn.Err))throw _t}!j&&S!=="der"&&(j=E.fromCompact(v))}Z=u.fromHex(p)}catch{return!1}if(!j||k&&j.hasHighS())return!1;L&&(d=t.hash(d));const{r:X,s:vt}=j,at=D(d),ht=a(vt),jt=o(at*ht),Et=o(X*ht),bt=(xt=u.BASE.multiplyAndAddUnsafe(Z,jt,Et))==null?void 0:xt.toAffine();return bt?o(bt.x)===X:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:P,sign:et,verify:M,ProjectivePoint:u,Signature:E,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nd(r){return{hash:r,hmac:(t,...e)=>Qc(r,t,hl(...e)),randomBytes:ic}}function rd(r,t){const e=n=>ed({...r,...nd(n)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ma=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),id=BigInt(1),ro=BigInt(2),ba=(r,t)=>(r+t/ro)/t;function sd(r){const t=tu,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),g=r*r*r%t,y=g*g*r%t,b=Vt(y,e,t)*y%t,B=Vt(b,e,t)*y%t,x=Vt(B,ro,t)*g%t,I=Vt(x,s,t)*x%t,R=Vt(I,i,t)*I%t,E=Vt(R,a,t)*R%t,C=Vt(E,u,t)*E%t,N=Vt(C,a,t)*R%t,T=Vt(N,e,t)*y%t,P=Vt(T,o,t)*I%t,q=Vt(P,n,t)*g%t,D=Vt(q,ro,t);if(!io.eql(io.sqr(D),r))throw new Error("Cannot find square root");return D}const io=Pi(tu,void 0,void 0,{sqrt:sd}),od=rd({a:BigInt(0),b:BigInt(7),Fp:io,n:ma,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=ma,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-id*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=ba(i*r,t),u=ba(-n*r,t);let g=qt(r-a*e-u*s,t),y=qt(-a*n-u*i,t);const b=g>o,B=y>o;if(b&&(g=t-g),B&&(y=t-y),g>o||y>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:g,k2neg:B,k2:y}}}},eo);BigInt(0);_r.utils.randomPrivateKey;const va=()=>{const r=_r.utils.randomPrivateKey(),t=so(r),e=new Uint8Array(64);return e.set(r),e.set(t,32),{publicKey:t,secretKey:e}},so=_r.getPublicKey;function Ea(r){try{return _r.ExtendedPoint.fromHex(r),!0}catch{return!1}}const eu=(r,t)=>_r.sign(r,t.slice(0,32)),ad=_r.verify,Se=r=>gt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?gt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):gt.Buffer.from(r);class cd{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(_c(li,this))}static decode(t){return Ac(li,this,t)}static decodeUnchecked(t){return bc(li,this,t)}}const li=new Map;var nu;const ud=32,Ln=32;function ld(r){return r._bn!==void 0}let Sa=1;class ct extends cd{constructor(t){if(super({}),this._bn=void 0,ld(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Be.decode(t);if(e.length!=Ln)throw new Error("Invalid public key input");this._bn=new da(e)}else this._bn=new da(t);if(this._bn.byteLength()>Ln)throw new Error("Invalid public key input")}}static unique(){const t=new ct(Sa);return Sa+=1,new ct(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Be.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===Ln)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),n.toBuffer()]),i=eo(s);return new ct(i)}static createProgramAddressSync(t,e){let n=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>ud)throw new TypeError("Max seed length exceeded");n=gt.Buffer.concat([n,Se(i)])}),n=gt.Buffer.concat([n,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=eo(n);if(Ea(s))throw new Error("Invalid seeds, address must fall off the curve");return new ct(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(gt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ct(t);return Ea(e.toBytes())}}nu=ct;ct.default=new nu("11111111111111111111111111111111");li.set(ct,{kind:"struct",fields:[["_bn","u256"]]});new ct("BPFLoader1111111111111111111111111111111111");const fr=1280-40-8,Do=127,qr=64;class ru extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ru.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class iu extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(iu.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Cr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Cr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class xi{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const St=(r="publicKey")=>Ft(32,r),fd=(r="signature")=>Ft(64,r),ar=(r="string")=>{const t=nt([st("length"),st("lengthPadding"),Ft(jn(st(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const u={chars:gt.Buffer.from(i,"utf8")};return n(u,o,a)},s.alloc=i=>st().span+st().span+gt.Buffer.from(i,"utf8").length,s},hd=(r="authorized")=>nt([St("staker"),St("withdrawer")],r),dd=(r="lockup")=>nt([De("unixTimestamp"),De("epoch"),St("custodian")],r),gd=(r="voteInit")=>nt([St("nodePubkey"),St("authorizedVoter"),St("authorizedWithdrawer"),kt("commission")],r),pd=(r="voteAuthorizeWithSeedArgs")=>nt([st("voteAuthorizationType"),St("currentAuthorityDerivedKeyOwnerPubkey"),ar("currentAuthorityDerivedKeySeed"),St("newAuthorized")],r);function su(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return su({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function We(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function qe(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Wt(r,t){if(!r)throw new Error(t||"Assertion failed")}class Ki{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const u=s(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new Ki(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Wt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),n=t.filter(([,u])=>u.isSigner&&!u.isWritable),s=t.filter(([,u])=>!u.isSigner&&u.isWritable),i=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Wt(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Wt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([u])=>new ct(u)),...n.map(([u])=>new ct(u)),...s.map(([u])=>new ct(u)),...i.map(([u])=>new ct(u))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new ct(i),u=t.findIndex(g=>g.equals(a));u>=0&&(Wt(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const ou="Reached end of buffer unexpectedly";function mn(r){if(r.length===0)throw new Error(ou);return r.shift()}function Ke(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(ou);return r.splice(...t)}class vn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ct(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Be.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new xi(this.staticAccountKeys)}static compile(t){const e=Ki.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new xi(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Be.encode(a.data)}));return new vn({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];qe(e,t);const n=this.instructions.map(b=>{const{accounts:B,programIdIndex:x}=b,I=Array.from(Be.decode(b.data));let R=[];qe(R,B.length);let E=[];return qe(E,I.length),{programIdIndex:x,keyIndicesCount:gt.Buffer.from(R),keyIndices:B,dataLength:gt.Buffer.from(E),data:I}});let s=[];qe(s,n.length);let i=gt.Buffer.alloc(fr);gt.Buffer.from(s).copy(i);let o=s.length;n.forEach(b=>{const x=nt([kt("programIdIndex"),Ft(b.keyIndicesCount.length,"keyIndicesCount"),Te(kt("keyIndex"),b.keyIndices.length,"keyIndices"),Ft(b.dataLength.length,"dataLength"),Te(kt("userdatum"),b.data.length,"data")]).encode(b,i,o);o+=x}),i=i.slice(0,o);const a=nt([Ft(1,"numRequiredSignatures"),Ft(1,"numReadonlySignedAccounts"),Ft(1,"numReadonlyUnsignedAccounts"),Ft(e.length,"keyCount"),Te(St("key"),t,"keys"),St("recentBlockhash")]),u={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(b=>Se(b.toBytes())),recentBlockhash:Be.decode(this.recentBlockhash)};let g=gt.Buffer.alloc(2048);const y=a.encode(u,g);return i.copy(g,y),g.slice(0,y+i.length)}static from(t){let e=[...t];const n=mn(e);if(n!==(n&Do))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=mn(e),i=mn(e),o=We(e);let a=[];for(let B=0;B<o;B++){const x=Ke(e,0,Ln);a.push(new ct(gt.Buffer.from(x)))}const u=Ke(e,0,Ln),g=We(e);let y=[];for(let B=0;B<g;B++){const x=mn(e),I=We(e),R=Ke(e,0,I),E=We(e),C=Ke(e,0,E),N=Be.encode(gt.Buffer.from(C));y.push({programIdIndex:x,accounts:R,data:N})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Be.encode(gt.Buffer.from(u)),accountKeys:a,instructions:y};return new vn(b)}}class Kr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new xi(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Ki.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const y of i){const b=e.extractTableLookup(y);if(b!==void 0){const[B,{writable:x,readonly:I}]=b;n.push(B),s.writable.push(...x),s.readonly.push(...I)}}const[o,a]=e.getMessageComponents(),g=new xi(a,s).compileInstructions(t.instructions);return new Kr({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:n})}serialize(){const t=Array();qe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();qe(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();qe(i,this.addressTableLookups.length);const o=nt([kt("prefix"),nt([kt("numRequiredSignatures"),kt("numReadonlySignedAccounts"),kt("numReadonlyUnsignedAccounts")],"header"),Ft(t.length,"staticAccountKeysLength"),Te(St(),this.staticAccountKeys.length,"staticAccountKeys"),St("recentBlockhash"),Ft(n.length,"instructionsLength"),Ft(e.length,"serializedInstructions"),Ft(i.length,"addressTableLookupsLength"),Ft(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(fr),u=128,g=o.encode({prefix:u,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(y=>y.toBytes()),recentBlockhash:Be.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(fr);for(const n of this.compiledInstructions){const s=Array();qe(s,n.accountKeyIndexes.length);const i=Array();qe(i,n.data.length);const o=nt([kt("programIdIndex"),Ft(s.length,"encodedAccountKeyIndexesLength"),Te(kt(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ft(i.length,"encodedDataLength"),Ft(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(fr);for(const n of this.addressTableLookups){const s=Array();qe(s,n.writableIndexes.length);const i=Array();qe(i,n.readonlyIndexes.length);const o=nt([St("accountKey"),Ft(s.length,"encodedWritableIndexesLength"),Te(kt(),n.writableIndexes.length,"writableIndexes"),Ft(i.length,"encodedReadonlyIndexesLength"),Te(kt(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=mn(e),s=n&Do;Wt(n!==s,"Expected versioned message but received legacy message");const i=s;Wt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:mn(e),numReadonlySignedAccounts:mn(e),numReadonlyUnsignedAccounts:mn(e)},a=[],u=We(e);for(let I=0;I<u;I++)a.push(new ct(Ke(e,0,Ln)));const g=Be.encode(Ke(e,0,Ln)),y=We(e),b=[];for(let I=0;I<y;I++){const R=mn(e),E=We(e),C=Ke(e,0,E),N=We(e),T=new Uint8Array(Ke(e,0,N));b.push({programIdIndex:R,accountKeyIndexes:C,data:T})}const B=We(e),x=[];for(let I=0;I<B;I++){const R=new ct(Ke(e,0,Ln)),E=We(e),C=Ke(e,0,E),N=We(e),T=Ke(e,0,N);x.push({accountKey:R,writableIndexes:C,readonlyIndexes:T})}return new Kr({header:o,staticAccountKeys:a,recentBlockhash:g,compiledInstructions:b,addressTableLookups:x})}}const Wo={deserializeMessageVersion(r){const t=r[0],e=t&Do;return e===t?"legacy":e},deserialize:r=>{const t=Wo.deserializeMessageVersion(r);if(t==="legacy")return vn.from(r);if(t===0)return Kr.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let In=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const yd=gt.Buffer.alloc(qr).fill(0);class tn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Je{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new tn(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];e.forEach(R=>{R.keys.forEach(C=>{i.push({...C})});const E=R.programId.toString();s.includes(E)||s.push(E)}),s.forEach(R=>{i.push({pubkey:new ct(R),isSigner:!1,isWritable:!1})});const o=[];i.forEach(R=>{const E=R.pubkey.toString(),C=o.findIndex(N=>N.pubkey.toString()===E);C>-1?(o[C].isWritable=o[C].isWritable||R.isWritable,o[C].isSigner=o[C].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,E){if(R.isSigner!==E.isSigner)return R.isSigner?-1:1;if(R.isWritable!==E.isWritable)return R.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",C)});const a=o.findIndex(R=>R.pubkey.equals(n));if(a>-1){const[R]=o.splice(a,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const R of this.signatures){const E=o.findIndex(C=>C.pubkey.equals(R.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let u=0,g=0,y=0;const b=[],B=[];o.forEach(({pubkey:R,isSigner:E,isWritable:C})=>{E?(b.push(R.toString()),u+=1,C||(g+=1)):(B.push(R.toString()),C||(y+=1))});const x=b.concat(B),I=e.map(R=>{const{data:E,programId:C}=R;return{programIdIndex:x.indexOf(C.toString()),accounts:R.keys.map(N=>x.indexOf(N.pubkey.toString())),data:Be.encode(E)}});return I.forEach(R=>{Wt(R.programIdIndex>=0),R.accounts.forEach(E=>Wt(E>=0))}),new vn({header:{numRequiredSignatures:u,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:y},accountKeys:x,recentBlockhash:t,instructions:I})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=eu(n,s.secretKey);this._addSignature(s.publicKey,Se(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Wt(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):ad(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];qe(n,e.length);const s=n.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return Wt(e.length<256),gt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(Wt(o.length===64,"signature has invalid length"),gt.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),Wt(i.length<=fr,`Transaction too large: ${i.length} > ${fr}`),i}get keys(){return Wt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Wt(this.instructions.length===1),this.instructions[0].programId}get data(){return Wt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=We(e);let s=[];for(let i=0;i<n;i++){const o=Ke(e,0,qr);s.push(Be.encode(gt.Buffer.from(o)))}return Je.populate(vn.from(e),s)}static populate(t,e=[]){const n=new Je;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==Be.encode(yd)?null:Be.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new tn({keys:i,programId:t.accountKeys[s.programIdIndex],data:Be.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class $r{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Wt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(qr));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();qe(e,this.signatures.length);const n=nt([Ft(e.length,"encodedSignaturesLength"),Te(fd(),this.signatures.length,"signatures"),Ft(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=We(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Ke(e,0,qr)));const i=Wo.deserialize(new Uint8Array(e));return new $r(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));Wt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=eu(e,s.secretKey)}}addSignature(t,e){Wt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Wt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const wd=160,md=64,bd=wd/md,vd=1e3/bd;new ct("SysvarC1ock11111111111111111111111111111111");new ct("SysvarEpochSchedu1e111111111111111111111111");new ct("Sysvar1nstructions1111111111111111111111111");const Cs=new ct("SysvarRecentB1ockHashes11111111111111111111"),xa=new ct("SysvarRent111111111111111111111111111111111");new ct("SysvarRewards111111111111111111111111111111");new ct("SysvarS1otHashes111111111111111111111111111");new ct("SysvarS1otHistory11111111111111111111111111");new ct("SysvarStakeHistory1111111111111111111111111");class _a extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(u=>u)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class it extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function sr(r){return new Promise(t=>setTimeout(t,r))}function je(r,t){const e=r.layout.span>=0?r.layout.span:su(r,t),n=gt.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const Ed=Ee("lamportsPerSignature"),au=nt([st("version"),st("state"),St("authorizedPubkey"),St("nonce"),nt([Ed],"feeCalculator")]),Aa=au.span;class qo{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=au.decode(Se(t),0);return new qo({authorizedPubkey:new ct(e.authorizedPubkey),nonce:new ct(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Sd=r=>{const t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},xd=r=>t=>{const e=Ft(r,t),{encode:n,decode:s}=Sd(e),i=e;return i.decode=(o,a)=>{const u=s(o,a);return rh(gt.Buffer.from(u))},i.encode=(o,a,u)=>{const g=oh(o,r);return n(g,a,u)},i},wr=xd(8),Ve=Object.freeze({Create:{index:0,layout:nt([st("instruction"),De("lamports"),De("space"),St("programId")])},Assign:{index:1,layout:nt([st("instruction"),St("programId")])},Transfer:{index:2,layout:nt([st("instruction"),wr("lamports")])},CreateWithSeed:{index:3,layout:nt([st("instruction"),St("base"),ar("seed"),De("lamports"),De("space"),St("programId")])},AdvanceNonceAccount:{index:4,layout:nt([st("instruction")])},WithdrawNonceAccount:{index:5,layout:nt([st("instruction"),De("lamports")])},InitializeNonceAccount:{index:6,layout:nt([st("instruction"),St("authorized")])},AuthorizeNonceAccount:{index:7,layout:nt([st("instruction"),St("authorized")])},Allocate:{index:8,layout:nt([st("instruction"),De("space")])},AllocateWithSeed:{index:9,layout:nt([st("instruction"),St("base"),ar("seed"),De("space"),St("programId")])},AssignWithSeed:{index:10,layout:nt([st("instruction"),St("base"),ar("seed"),St("programId")])},TransferWithSeed:{index:11,layout:nt([st("instruction"),wr("lamports"),ar("seed"),St("programId")])},UpgradeNonceAccount:{index:12,layout:nt([st("instruction")])}});class _i{constructor(){}static createAccount(t){const e=Ve.Create,n=je(e,{lamports:t.lamports,space:t.space,programId:Se(t.programId.toBuffer())});return new tn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Ve.TransferWithSeed;e=je(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:Se(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ve.Transfer;e=je(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new tn({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Ve.AssignWithSeed;e=je(s,{base:Se(t.basePubkey.toBuffer()),seed:t.seed,programId:Se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ve.Assign;e=je(s,{programId:Se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new tn({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ve.CreateWithSeed,n=je(e,{base:Se(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Se(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new tn({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new Je;"basePubkey"in t&&"seed"in t?e.add(_i.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Aa,programId:this.programId})):e.add(_i.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Aa,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Ve.InitializeNonceAccount,n=je(e,{authorized:Se(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Cs,isSigner:!1,isWritable:!1},{pubkey:xa,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new tn(s)}static nonceAdvance(t){const e=Ve.AdvanceNonceAccount,n=je(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Cs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new tn(s)}static nonceWithdraw(t){const e=Ve.WithdrawNonceAccount,n=je(e,{lamports:t.lamports});return new tn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Cs,isSigner:!1,isWritable:!1},{pubkey:xa,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Ve.AuthorizeNonceAccount,n=je(e,{authorized:Se(t.newAuthorizedPubkey.toBuffer())});return new tn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Ve.AllocateWithSeed;e=je(s,{base:Se(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ve.Allocate;e=je(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new tn({keys:n,programId:this.programId,data:e})}}_i.programId=new ct("11111111111111111111111111111111");new ct("BPFLoader2111111111111111111111111111111111");function _d(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ls,Ba;function Ad(){if(Ba)return Ls;Ba=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,a,u,g,y,b;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(b=r.call(n),b==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=e(n[i],!0)+",";return o>-1&&(a+=e(n[i],!0)),a+"]"}else if(b==="[object Object]"){for(u=t(n).sort(),o=u.length,a="",i=0;i<o;)g=u[i],y=e(n[g],!1),y!==void 0&&(a&&(a+=","),a+=JSON.stringify(g)+":"+y),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ls=function(n){var s=e(n,!1);if(s!==void 0)return""+s},Ls}var Bd=Ad(),Ia=_d(Bd);const Rr=32;function Ns(r){let t=0;for(;r>1;)r/=2,t++;return t}function Id(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class kd{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ns(Id(t+Rr+1))-Ns(Rr)-1,n=this.getSlotsInEpoch(e),s=t-(n-Rr);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Rr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ns(Rr)):this.slotsPerEpoch}}var Rd=globalThis.fetch;class Md extends Gh{constructor(t,e,n){const s=i=>{const o=jh(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Td(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const ka=56;class Ra{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Td(Cd,t),n=t.length-ka;Wt(n>=0,"lookup table is invalid"),Wt(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=nt([Te(St(),s,"addresses")]).decode(t.slice(ka));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ct(e.authority[0]):void 0,addresses:i.map(o=>new ct(o))}}}const Cd={index:1,layout:nt([st("typeIndex"),wr("deactivationSlot"),Ee("lastExtendedSlot"),kt("lastExtendedStartIndex"),kt(),Te(St(),jn(kt(),-1),"authority")])},Ld=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Nd(r){const t=r.match(Ld);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${i}`}const Ht=Jr(Fo(ct),G(),r=>new ct(r)),cu=zo([G(),Kt("base64")]),Ko=Jr(Fo(gt.Buffer),cu,r=>gt.Buffer.from(r[0],"base64")),Ud=30*1e3;function Pd(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Nt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Ma(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function uu(r){return Ne([$({jsonrpc:Kt("2.0"),id:G(),result:r}),$({jsonrpc:Kt("2.0"),id:G(),error:$({code:Ir(),message:G(),data:ot(gh())})})])}const Od=uu(Ir());function mt(r){return Jr(uu(r),Od,t=>"error"in t?t:{...t,result:Y(t.result,r)})}function Gt(r){return mt($({context:$({slot:F()}),value:r}))}function $i(r){return $({context:$({slot:F()}),value:r})}function Us(r,t){return r===0?new Kr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ct(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Be.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new vn(t)}const Fd=$({foundation:F(),foundationTerm:F(),initial:F(),taper:F(),terminal:F()}),zd=mt(J(Q($({epoch:F(),effectiveSlot:F(),amount:F(),postBalance:F(),commission:ot(Q(F()))})))),Dd=J($({slot:F(),prioritizationFee:F()})),Wd=$({total:F(),validator:F(),foundation:F(),epoch:F()}),qd=$({epoch:F(),slotIndex:F(),slotsInEpoch:F(),absoluteSlot:F(),blockHeight:ot(F()),transactionCount:ot(F())}),Kd=$({slotsPerEpoch:F(),leaderScheduleSlotOffset:F(),warmup:un(),firstNormalEpoch:F(),firstNormalSlot:F()}),$d=$c(G(),J(F())),Xn=Q(Ne([$({}),G()])),Hd=$({err:Xn}),jd=Kt("receivedSignature"),Vd=$({"solana-core":G(),"feature-set":ot(F())}),Gd=$({program:G(),programId:Ht,parsed:Ir()}),Zd=$({programId:Ht,accounts:J(Ht),data:G()}),Ta=Gt($({err:Q(Ne([$({}),G()])),logs:Q(J(G())),accounts:ot(Q(J(Q($({executable:un(),owner:G(),lamports:F(),data:J(G()),rentEpoch:ot(F())}))))),unitsConsumed:ot(F()),returnData:ot(Q($({programId:G(),data:zo([G(),Kt("base64")])}))),innerInstructions:ot(Q(J($({index:F(),instructions:J(Ne([Gd,Zd]))}))))})),Yd=Gt($({byIdentity:$c(G(),J(F())),range:$({firstSlot:F(),lastSlot:F()})}));function Jd(r,t,e,n,s,i){const o=e||Rd;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(y,b)=>{const B=await new Promise((x,I)=>{try{n(y,b,(R,E)=>x([R,E]))}catch(R){I(R)}});return await o(...B)}),new Kh(async(y,b)=>{const B={method:"POST",body:y,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},J0)};try{let x=5,I,R=500;for(;u?I=await u(r,B):I=await o(r,B),!(I.status!==429||s===!0||(x-=1,x===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${R}ms delay...`),await sr(R),R*=2;const E=await I.text();I.ok?b(null,E):b(new Error(`${I.status} ${I.statusText}: ${E}`))}catch(x){x instanceof Error&&b(x)}},{})}function Xd(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function Qd(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const t0=mt(Fd),e0=mt(Wd),n0=mt(Dd),r0=mt(qd),i0=mt(Kd),s0=mt($d),o0=mt(F()),a0=Gt($({total:F(),circulating:F(),nonCirculating:F(),nonCirculatingAccounts:J(Ht)})),oo=$({amount:G(),uiAmount:Q(F()),decimals:F(),uiAmountString:ot(G())}),c0=Gt(J($({address:Ht,amount:G(),uiAmount:Q(F()),decimals:F(),uiAmountString:ot(G())}))),u0=Gt(J($({pubkey:Ht,account:$({executable:un(),owner:Ht,lamports:F(),data:Ko,rentEpoch:F()})}))),ao=$({program:G(),parsed:Ir(),space:F()}),l0=Gt(J($({pubkey:Ht,account:$({executable:un(),owner:Ht,lamports:F(),data:ao,rentEpoch:F()})}))),f0=Gt(J($({lamports:F(),address:Ht}))),Hr=$({executable:un(),owner:Ht,lamports:F(),data:Ko,rentEpoch:F()}),h0=$({pubkey:Ht,account:Hr}),d0=Jr(Ne([Fo(gt.Buffer),ao]),Ne([cu,ao]),r=>Array.isArray(r)?Y(r,Ko):r),co=$({executable:un(),owner:Ht,lamports:F(),data:d0,rentEpoch:F()}),g0=$({pubkey:Ht,account:co}),p0=$({state:Ne([Kt("active"),Kt("inactive"),Kt("activating"),Kt("deactivating")]),active:F(),inactive:F()}),y0=mt(J($({signature:G(),slot:F(),err:Xn,memo:Q(G()),blockTime:ot(Q(F()))}))),w0=mt(J($({signature:G(),slot:F(),err:Xn,memo:Q(G()),blockTime:ot(Q(F()))}))),m0=$({subscription:F(),result:$i(Hr)}),b0=$({pubkey:Ht,account:Hr}),v0=$({subscription:F(),result:$i(b0)}),E0=$({parent:F(),slot:F(),root:F()}),S0=$({subscription:F(),result:E0}),x0=Ne([$({type:Ne([Kt("firstShredReceived"),Kt("completed"),Kt("optimisticConfirmation"),Kt("root")]),slot:F(),timestamp:F()}),$({type:Kt("createdBank"),parent:F(),slot:F(),timestamp:F()}),$({type:Kt("frozen"),slot:F(),timestamp:F(),stats:$({numTransactionEntries:F(),numSuccessfulTransactions:F(),numFailedTransactions:F(),maxTransactionsPerEntry:F()})}),$({type:Kt("dead"),slot:F(),timestamp:F(),err:G()})]),_0=$({subscription:F(),result:x0}),A0=$({subscription:F(),result:$i(Ne([Hd,jd]))}),B0=$({subscription:F(),result:F()}),I0=$({pubkey:G(),gossip:Q(G()),tpu:Q(G()),rpc:Q(G()),version:Q(G())}),Ca=$({votePubkey:G(),nodePubkey:G(),activatedStake:F(),epochVoteAccount:un(),epochCredits:J(zo([F(),F(),F()])),commission:F(),lastVote:F(),rootSlot:Q(F())}),k0=mt($({current:J(Ca),delinquent:J(Ca)})),R0=Ne([Kt("processed"),Kt("confirmed"),Kt("finalized")]),M0=$({slot:F(),confirmations:Q(F()),err:Xn,confirmationStatus:ot(R0)}),T0=Gt(J(Q(M0))),C0=mt(F()),lu=$({accountKey:Ht,writableIndexes:J(F()),readonlyIndexes:J(F())}),$o=$({signatures:J(G()),message:$({accountKeys:J(G()),header:$({numRequiredSignatures:F(),numReadonlySignedAccounts:F(),numReadonlyUnsignedAccounts:F()}),instructions:J($({accounts:J(F()),data:G(),programIdIndex:F()})),recentBlockhash:G(),addressTableLookups:ot(J(lu))})}),fu=$({pubkey:Ht,signer:un(),writable:un(),source:ot(Ne([Kt("transaction"),Kt("lookupTable")]))}),hu=$({accountKeys:J(fu),signatures:J(G())}),du=$({parsed:Ir(),program:G(),programId:Ht}),gu=$({accounts:J(Ht),data:G(),programId:Ht}),L0=Ne([gu,du]),N0=Ne([$({parsed:Ir(),program:G(),programId:G()}),$({accounts:J(G()),data:G(),programId:G()})]),pu=Jr(L0,N0,r=>"accounts"in r?Y(r,gu):Y(r,du)),yu=$({signatures:J(G()),message:$({accountKeys:J(fu),instructions:J(pu),recentBlockhash:G(),addressTableLookups:ot(Q(J(lu)))})}),Ai=$({accountIndex:F(),mint:G(),owner:ot(G()),programId:ot(G()),uiTokenAmount:oo}),wu=$({writable:J(Ht),readonly:J(Ht)}),Hi=$({err:Xn,fee:F(),innerInstructions:ot(Q(J($({index:F(),instructions:J($({accounts:J(F()),data:G(),programIdIndex:F()}))})))),preBalances:J(F()),postBalances:J(F()),logMessages:ot(Q(J(G()))),preTokenBalances:ot(Q(J(Ai))),postTokenBalances:ot(Q(J(Ai))),loadedAddresses:ot(wu),computeUnitsConsumed:ot(F())}),Ho=$({err:Xn,fee:F(),innerInstructions:ot(Q(J($({index:F(),instructions:J(pu)})))),preBalances:J(F()),postBalances:J(F()),logMessages:ot(Q(J(G()))),preTokenBalances:ot(Q(J(Ai))),postTokenBalances:ot(Q(J(Ai))),loadedAddresses:ot(wu),computeUnitsConsumed:ot(F())}),kr=Ne([Kt(0),Kt("legacy")]),Qn=$({pubkey:G(),lamports:F(),postBalance:Q(F()),rewardType:Q(G()),commission:ot(Q(F()))}),U0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:J($({transaction:$o,meta:Q(Hi),version:ot(kr)})),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),P0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),O0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:J($({transaction:hu,meta:Q(Hi),version:ot(kr)})),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),F0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:J($({transaction:yu,meta:Q(Ho),version:ot(kr)})),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),z0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:J($({transaction:hu,meta:Q(Ho),version:ot(kr)})),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),D0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),rewards:ot(J(Qn)),blockTime:Q(F()),blockHeight:Q(F())}))),W0=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:J($({transaction:$o,meta:Q(Hi)})),rewards:ot(J(Qn)),blockTime:Q(F())}))),La=mt(Q($({blockhash:G(),previousBlockhash:G(),parentSlot:F(),signatures:J(G()),blockTime:Q(F())}))),Ps=mt(Q($({slot:F(),meta:Q(Hi),blockTime:ot(Q(F())),transaction:$o,version:ot(kr)}))),si=mt(Q($({slot:F(),transaction:yu,meta:Q(Ho),blockTime:ot(Q(F())),version:ot(kr)}))),q0=Gt($({blockhash:G(),lastValidBlockHeight:F()})),K0=Gt(un()),$0=$({slot:F(),numTransactions:F(),numSlots:F(),samplePeriodSecs:F()}),H0=mt(J($0)),j0=Gt(Q($({feeCalculator:$({lamportsPerSignature:F()})}))),V0=mt(G()),G0=mt(G()),Z0=$({err:Xn,logs:J(G()),signature:G()}),Y0=$({result:$i(Z0),subscription:F()}),J0={"solana-client":"js/1.0.0-maintenance"};class X0{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async y=>{const{commitment:b,config:B}=Nt(y),x=this._buildArgs([],b,void 0,B),I=Ia(x);return g[I]=g[I]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",x),E=Y(R,mt(F()));if("error"in E)throw new it(E.error,"failed to get block height information");return E.result}finally{delete g[I]}})(),await g[I]}})();let n,s,i,o,a,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=Pd(t),this._rpcWsEndpoint=n||Nd(t),this._rpcClient=Jd(t,s,i,o,a,u),this._rpcRequest=Xd(this._rpcClient),this._rpcBatchRequest=Qd(this._rpcClient),this._rpcWebSocket=new Md(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=Y(o,Gt(F()));if("error"in a)throw new it(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=Y(e,mt(Q(F())));if("error"in n)throw new it(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Y(t,mt(F()));if("error"in e)throw new it(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Y(t,o0);if("error"in e)throw new it(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=Y(n,a0);if("error"in s)throw new it(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=Y(s,Gt(oo));if("error"in i)throw new it(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=Y(s,Gt(oo));if("error"in i)throw new it(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Nt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",a),g=Y(u,u0);if("error"in g)throw new it(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Y(o,l0);if("error"in a)throw new it(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Y(s,f0);if("error"in i)throw new it(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Y(s,c0);if("error"in i)throw new it(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Y(o,Gt(Q(Hr)));if("error"in a)throw new it(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Y(o,Gt(Q(co)));if("error"in a)throw new it(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),u=Y(a,Gt(J(Q(co))));if("error"in u)throw new it(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),u=Y(a,Gt(J(Q(Hr))));if("error"in u)throw new it(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Nt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=Y(a,mt(p0));if("error"in u)throw new it(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Nt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Ma(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),g=J(h0),y=o.withContext===!0?Y(u,Gt(g)):Y(u,mt(g));if("error"in y)throw new it(y.error,`failed to get accounts owned by program ${t.toBase58()}`);return y.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Y(o,mt(J(g0)));if("error"in a)throw new it(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Be.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Wt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((u,g)=>{try{n=this.onSignature(e,(b,B)=>{n=void 0;const x={context:B,value:b};u({__type:In.PROCESSED,response:x})},t);const y=new Promise(b=>{n==null?b():s=this._onSubscriptionStateChange(n,B=>{B==="subscribed"&&b()})});(async()=>{if(await y,i)return;const b=await this.getSignatureStatus(e);if(i||b==null)return;const{context:B,value:x}=b;if(x!=null)if(x!=null&&x.err)g(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:In.PROCESSED,response:{context:B,value:x}})}})()}catch(y){g(y)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(b=>{const B=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await B();if(!i){for(;x<=n;)if(await sr(1e3),i||(x=await B(),i))return;b({__type:In.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),g=this.getCancellationPromise(e);let y;try{const b=await Promise.race([g,u,o]);if(b.__type===In.PROCESSED)y=b.response;else throw new ru(s)}finally{i=!0,a()}return y}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const u=new Promise(x=>{let I=i,R=null;const E=async()=>{try{const{context:C,value:N}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return R=C.slot,N==null?void 0:N.nonce}catch{return I}};(async()=>{if(I=await E(),!a)for(;;){if(i!==I){x({__type:In.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await sr(2e3),a||(I=await E(),a))return}})()}),{abortConfirmation:g,confirmationPromise:y}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),b=this.getCancellationPromise(e);let B;try{const x=await Promise.race([b,y,u]);if(x.__type===In.PROCESSED)B=x.response;else{let I;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(x.slotInWhichNonceDidAdvance??n)){await sr(400);continue}I=R;break}if(I!=null&&I.value){const R=t||"finalized",{confirmationStatus:E}=I.value;switch(R){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new Cr(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new Cr(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new Cr(o);break;default:}B={context:I.context,value:{err:I.value.err}}}else throw new Cr(o)}}finally{a=!0,g()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(u=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:In.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const u=await Promise.race([o,s]);if(u.__type===In.PROCESSED)a=u.response;else throw new iu(e,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Y(t,mt(J(I0)));if("error"in e)throw new it(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=Y(n,k0);if("error"in s)throw new it(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=Y(i,mt(F()));if("error"in o)throw new it(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Y(i,mt(G()));if("error"in o)throw new it(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=Y(s,mt(J(Ht)));if("error"in i)throw new it(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Wt(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=Y(s,T0);if("error"in i)throw new it(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Y(i,mt(F()));if("error"in o)throw new it(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=Y(n,t0);if("error"in s)throw new it(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Nt(n),o=this._buildArgs([t.map(g=>g.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=Y(a,zd);if("error"in u)throw new it(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Y(t,e0);if("error"in e)throw new it(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Y(i,r0);if("error"in o)throw new it(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Y(t,i0);if("error"in e)throw new it(e.error,"failed to get epoch schedule");const n=e.result;return new kd(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Y(t,s0);if("error"in e)throw new it(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Y(s,C0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=Y(e,H0);if("error"in n)throw new it(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Y(s,j0);if("error"in i)throw new it(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=Se(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=Y(i,Gt(Q(F())));if("error"in o)throw new it(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Y(s,n0);if("error"in i)throw new it(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Y(i,q0);if("error"in o)throw new it(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Y(o,K0);if("error"in a)throw new it(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Y(t,mt(Vd));if("error"in e)throw new it(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Y(t,mt(G()));if("error"in e)throw new it(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Y(o,O0);if("error"in a)throw a.error;return a.result}case"none":{const a=Y(o,P0);if("error"in a)throw a.error;return a.result}default:{const a=Y(o,U0);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:g,meta:y,version:b})=>({meta:y,transaction:{...g,message:Us(b,g.message)},version:b}))}:null}}}catch(a){throw new it(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Y(o,z0);if("error"in a)throw a.error;return a.result}case"none":{const a=Y(o,D0);if("error"in a)throw a.error;return a.result}default:{const a=Y(o,F0);if("error"in a)throw a.error;return a.result}}}catch(a){throw new it(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...u}=t;n=a,e=u}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=Y(i,Yd);if("error"in o)throw new it(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Y(o,Ps);if("error"in a)throw new it(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:Us(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Y(o,si);if("error"in a)throw new it(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=Y(u,si);if("error"in g)throw new it(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=Y(u,Ps);if("error"in g)throw new it(g.error,"failed to get transactions");const y=g.result;return y&&{...y,transaction:{...y.transaction,message:Us(y.version,y.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=Y(s,W0);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:g})=>{const y=new vn(u.message);return{meta:g,transaction:{...u,message:y}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:g})=>({meta:g,transaction:Je.populate(u.message,u.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=Y(i,mt(J(F())));if("error"in o)throw new it(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Y(s,La);if("error"in i)throw new it(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Y(s,La);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=Y(s,Ps);if("error"in i)throw new it(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new vn(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Je.populate(a,u)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=Y(s,si);if("error"in i)throw new it(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=Y(o,si);if("error"in a)throw new it(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Y(i,y0);if("error"in o)throw new it(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=Y(i,w0);if("error"in o)throw new it(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Ra({key:t,state:Ra.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=qo.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Y(n,V0);if("error"in s)throw new it(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await sr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Ud;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await sr(vd/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Y(i,Gt(F()));if("error"in o)throw new it(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const R=t.serialize(),E=gt.Buffer.from(R).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const C=e||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(C.innerInstructions=e.innerInstructions);const N=[E,C],T=await this._rpcRequest("simulateTransaction",N),P=Y(T,Ta);if("error"in P)throw new Error("failed to simulate transaction: "+P.error.message);return P.result}let s;if(t instanceof Je){let I=t;s=new Je,s.feePayer=I.feePayer,s.instructions=t.instructions,s.nonceInfo=I.nonceInfo,s.signatures=I.signatures}else s=Je.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let I=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(I);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const E=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else I=!0}}const o=s._compile(),a=o.serialize(),g=s._serialize(a).toString("base64"),y={encoding:"base64",commitment:this.commitment};if(n){const I=(Array.isArray(n)?n:o.nonProgramIds()).map(R=>R.toBase58());y.accounts={encoding:"base64",addresses:I}}i&&(y.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(y.innerInstructions=e.innerInstructions);const b=[g,y],B=await this._rpcRequest("simulateTransaction",b),x=Y(B,Ta);if("error"in x){let I;if("data"in x.error&&(I=x.error.data.logs,I&&Array.isArray(I))){const R=`
    `,E=R+I.join(R);console.error(x.error.message,E)}throw new _a({action:"simulate",signature:"",transactionMessage:x.error.message,logs:I})}return x.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=Se(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),u=Y(a,G0);if("error"in u){let g;throw"data"in u.error&&(g=u.error.data.logs),new _a({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:g})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=Y(t,m0);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=Ia([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Wt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Nt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=Y(t,v0);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Nt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Ma(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=Y(t,Y0);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=Y(t,S0);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=Y(t,_0);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=Y(t,A0);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(u,g)=>{e(u,g);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=Y(t,B0);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class fi{constructor(t){this._keypair=void 0,this._keypair=t??va()}static generate(){return new fi(va())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const n=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=so(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new fi({publicKey:n,secretKey:t})}static fromSeed(t){const e=so(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new fi({publicKey:e,secretKey:n})}get publicKey(){return new ct(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:nt([st("instruction"),wr("recentSlot"),kt("bumpSeed")])},FreezeLookupTable:{index:1,layout:nt([st("instruction")])},ExtendLookupTable:{index:2,layout:nt([st("instruction"),wr(),Te(St(),jn(st(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:nt([st("instruction")])},CloseLookupTable:{index:4,layout:nt([st("instruction")])}});new ct("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:nt([kt("instruction"),st("units"),st("additionalFee")])},RequestHeapFrame:{index:1,layout:nt([kt("instruction"),st("bytes")])},SetComputeUnitLimit:{index:2,layout:nt([kt("instruction"),st("units")])},SetComputeUnitPrice:{index:3,layout:nt([kt("instruction"),wr("microLamports")])}});new ct("ComputeBudget111111111111111111111111111111");nt([kt("numSignatures"),kt("padding"),Ze("signatureOffset"),Ze("signatureInstructionIndex"),Ze("publicKeyOffset"),Ze("publicKeyInstructionIndex"),Ze("messageDataOffset"),Ze("messageDataSize"),Ze("messageInstructionIndex")]);new ct("Ed25519SigVerify111111111111111111111111111");od.utils.isValidPrivateKey;nt([kt("numSignatures"),Ze("signatureOffset"),kt("signatureInstructionIndex"),Ze("ethAddressOffset"),kt("ethAddressInstructionIndex"),Ze("messageDataOffset"),Ze("messageDataSize"),kt("messageInstructionIndex"),Ft(20,"ethAddress"),Ft(64,"signature"),kt("recoveryId")]);new ct("KeccakSecp256k11111111111111111111111111111");var mu;new ct("StakeConfig11111111111111111111111111111111");class bu{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}mu=bu;bu.default=new mu(0,0,ct.default);Object.freeze({Initialize:{index:0,layout:nt([st("instruction"),hd(),dd()])},Authorize:{index:1,layout:nt([st("instruction"),St("newAuthorized"),st("stakeAuthorizationType")])},Delegate:{index:2,layout:nt([st("instruction")])},Split:{index:3,layout:nt([st("instruction"),De("lamports")])},Withdraw:{index:4,layout:nt([st("instruction"),De("lamports")])},Deactivate:{index:5,layout:nt([st("instruction")])},Merge:{index:7,layout:nt([st("instruction")])},AuthorizeWithSeed:{index:8,layout:nt([st("instruction"),St("newAuthorized"),st("stakeAuthorizationType"),ar("authoritySeed"),St("authorityOwner")])}});new ct("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:nt([st("instruction"),gd()])},Authorize:{index:1,layout:nt([st("instruction"),St("newAuthorized"),st("voteAuthorizationType")])},Withdraw:{index:3,layout:nt([st("instruction"),De("lamports")])},UpdateValidatorIdentity:{index:4,layout:nt([st("instruction")])},AuthorizeWithSeed:{index:10,layout:nt([st("instruction"),pd()])}});new ct("Vote111111111111111111111111111111111111111");new ct("Va1idator1nfo111111111111111111111111111111");$({name:G(),website:ot(G()),details:ot(G()),iconUrl:ot(G()),keybaseUsername:ot(G())});new ct("Vote111111111111111111111111111111111111111");nt([St("nodePubkey"),St("authorizedWithdrawer"),kt("commission"),Ee(),Te(nt([Ee("slot"),st("confirmationCount")]),jn(st(),-8),"votes"),kt("rootSlotValid"),Ee("rootSlot"),Ee(),Te(nt([Ee("epoch"),St("authorizedVoter")]),jn(st(),-8),"authorizedVoters"),nt([Te(nt([St("authorizedPubkey"),Ee("epochOfLastAuthorizedSwitch"),Ee("targetEpoch")]),32,"buf"),Ee("idx"),kt("isEmpty")],"priorVoters"),Ee(),Te(nt([Ee("epoch"),Ee("credits"),Ee("prevCredits")]),jn(st(),-8),"epochCredits"),nt([Ee("slot"),Ee("timestamp")],"lastTimestamp")]);const vu=lt.createContext({});function Q0(){return lt.useContext(vu)}const xy=({children:r,endpoint:t,config:e={commitment:"confirmed"}})=>{const n=lt.useMemo(()=>new X0(t,e),[t,e]);return vo.createElement(vu.Provider,{value:{connection:n}},r)};var Eu={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,g,y){this.fn=u,this.context=g,this.once=y||!1}function i(u,g,y,b,B){if(typeof y!="function")throw new TypeError("The listener must be a function");var x=new s(y,b||u,B),I=e?e+g:g;return u._events[I]?u._events[I].fn?u._events[I]=[u._events[I],x]:u._events[I].push(x):(u._events[I]=x,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],y,b;if(this._eventsCount===0)return g;for(b in y=this._events)t.call(y,b)&&g.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(y)):g},a.prototype.listeners=function(g){var y=e?e+g:g,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var B=0,x=b.length,I=new Array(x);B<x;B++)I[B]=b[B].fn;return I},a.prototype.listenerCount=function(g){var y=e?e+g:g,b=this._events[y];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,y,b,B,x,I){var R=e?e+g:g;if(!this._events[R])return!1;var E=this._events[R],C=arguments.length,N,T;if(E.fn){switch(E.once&&this.removeListener(g,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,y),!0;case 3:return E.fn.call(E.context,y,b),!0;case 4:return E.fn.call(E.context,y,b,B),!0;case 5:return E.fn.call(E.context,y,b,B,x),!0;case 6:return E.fn.call(E.context,y,b,B,x,I),!0}for(T=1,N=new Array(C-1);T<C;T++)N[T-1]=arguments[T];E.fn.apply(E.context,N)}else{var P=E.length,q;for(T=0;T<P;T++)switch(E[T].once&&this.removeListener(g,E[T].fn,void 0,!0),C){case 1:E[T].fn.call(E[T].context);break;case 2:E[T].fn.call(E[T].context,y);break;case 3:E[T].fn.call(E[T].context,y,b);break;case 4:E[T].fn.call(E[T].context,y,b,B);break;default:if(!N)for(q=1,N=new Array(C-1);q<C;q++)N[q-1]=arguments[q];E[T].fn.apply(E[T].context,N)}}return!0},a.prototype.on=function(g,y,b){return i(this,g,y,b,!1)},a.prototype.once=function(g,y,b){return i(this,g,y,b,!0)},a.prototype.removeListener=function(g,y,b,B){var x=e?e+g:g;if(!this._events[x])return this;if(!y)return o(this,x),this;var I=this._events[x];if(I.fn)I.fn===y&&(!B||I.once)&&(!b||I.context===b)&&o(this,x);else{for(var R=0,E=[],C=I.length;R<C;R++)(I[R].fn!==y||B&&!I[R].once||b&&I[R].context!==b)&&E.push(I[R]);E.length?this._events[x]=E.length===1?E[0]:E:o(this,x)}return this},a.prototype.removeAllListeners=function(g){var y;return g?(y=e?e+g:g,this._events[y]&&o(this,y)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Eu);var tg=Eu.exports;const eg=Sr(tg);class Ce extends Error{constructor(t,e){super(t),this.error=e}}class hr extends Ce{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class _y extends Ce{constructor(){super(...arguments),this.name="WalletLoadError"}}class Lr extends Ce{constructor(){super(...arguments),this.name="WalletConfigError"}}class Nr extends Ce{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Su extends Ce{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class ng extends Ce{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class cr extends Ce{constructor(){super(...arguments),this.name="WalletAccountError"}}class xu extends Ce{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class cn extends Ce{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class zn extends Ce{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Dn extends Ce{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class _u extends Ce{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class Na extends Ce{constructor(){super(...arguments),this.name="WalletSignInError"}}var Dt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Dt||(Dt={}));class Au extends eg{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const s=this.publicKey;if(!s)throw new cn;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function Ay(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const i of t)i()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function By(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function Wn(r){return"version"in r}class rg extends Au{async sendTransaction(t,e,n={}){let s=!0;try{if(Wn(t)){if(!this.supportedTransactionVersions)throw new zn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new zn(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const i=t.serialize();return await e.sendRawTransaction(i,n)}catch(i){throw i instanceof Dn?(s=!1,i):new zn(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;t=await this.prepareTransaction(t,e,o),i!=null&&i.length&&t.partialSign(...i),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(i){throw i instanceof Dn?(s=!1,i):new zn(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(Wn(n)){if(!this.supportedTransactionVersions)throw new Dn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Dn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class ig extends rg{}class sg extends ig{}const Rn="solana:signAndSendTransaction",Os="solana:signIn",Mr="solana:signMessage",xe="solana:signTransaction",Bu="standard:connect",Ua="standard:disconnect",Iu="standard:events";function og(r){return Bu in r.features&&Iu in r.features&&(Rn in r.features||xe in r.features)}var Pa;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Pa||(Pa={}));class Oa extends Ce{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const ag=[],ji={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){en("call","select")},connect(){return Promise.reject(en("call","connect"))},disconnect(){return Promise.reject(en("call","disconnect"))},sendTransaction(){return Promise.reject(en("call","sendTransaction"))},signTransaction(){return Promise.reject(en("call","signTransaction"))},signAllTransactions(){return Promise.reject(en("call","signAllTransactions"))},signMessage(){return Promise.reject(en("call","signMessage"))},signIn(){return Promise.reject(en("call","signIn"))}};Object.defineProperty(ji,"wallets",{get(){return en("read","wallets"),ag}});Object.defineProperty(ji,"wallet",{get(){return en("read","wallet"),null}});Object.defineProperty(ji,"publicKey",{get(){return en("read","publicKey"),null}});function en(r,t){const e=new Error(`You have tried to ${r} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const ku=lt.createContext(ji);function Iy(){return lt.useContext(ku)}function cg(r,t){const e=lt.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return t}),n=e[0],s=lt.useRef(!0);return lt.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),e}function Fs(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Fa="solana:mainnet",ug="solana:devnet",lg="solana:testnet",fg="solana:localnet",hg="https://api.mainnet-beta.solana.com";function dg(r){return r.includes(hg)?Fa:/\bdevnet\b/i.test(r)?ug:/\btestnet\b/i.test(r)?lg:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?fg:Fa}function gg(r){let t=`${r.domain} wants you to sign in with your Solana account:
`;t+=`${r.address}`,r.statement&&(t+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const n of r.resources)e.push(`- ${n}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}const En={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Sn extends Error{constructor(...t){const[e,n,s]=t;super(n),this.code=e,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class Ru extends Error{constructor(...t){const[e,n,s,i]=t;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function pe(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(y){try{g(n.next(y))}catch(b){o(b)}}function u(y){try{g(n.throw(y))}catch(b){o(b)}}function g(y){y.done?i(y.value):s(y.value).then(a,u)}g((n=n.apply(r,t||[])).next())})}function zs(r,t){return pe(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s})}function pg(r){return window.btoa(r)}function yg(r){return gg(r)}function wg(r){return pg(yg(r))}const mg="solana:signTransactions",za="solana:cloneAuthorization";function bg(r,t){return new Proxy({},{get(e,n){return e[n]==null&&(e[n]=function(s){return pe(this,void 0,void 0,function*(){const{method:i,params:o}=vg(n,s,r),a=yield t(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Sg(o.sign_in_payload,a,t)),Eg(n,a,r)})}),e[n]},defineProperty(){return!1},deleteProperty(){return!1}})}function vg(r,t,e){let n=t,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(e==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(e){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function Eg(r,t,e){switch(r){case"getCapabilities":{const n=t;switch(e){case"legacy":{const s=[mg];return n.supports_clone_authorization===!0&&s.push(za),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(za)})}}}return t}function Sg(r,t,e){var n;return pe(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=t.accounts[0].address,o=wg(Object.assign(Object.assign({},r),{domain:s,address:i})),a=yield e("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const qn=4;function xg(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(qn);return new DataView(t).setUint32(0,r,!1),new Uint8Array(t)}const uo=12,Mu=65;function _g(r,t,e){return pe(this,void 0,void 0,function*(){const n=xg(t),s=new Uint8Array(uo);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(Cu(n,s),e,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function Tu(r,t){return pe(this,void 0,void 0,function*(){const e=r.slice(0,qn),n=r.slice(qn,qn+uo),s=r.slice(qn+uo),i=yield crypto.subtle.decrypt(Cu(e,n),t,s);return Ag().decode(i)})}function Cu(r,t){return{additionalData:r,iv:t,name:"AES-GCM",tagLength:128}}let Ds;function Ag(){return Ds===void 0&&(Ds=new TextDecoder("utf-8")),Ds}function Bg(){return pe(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Ws(){return pe(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Ig(r,t){return pe(this,void 0,void 0,function*(){const e=JSON.stringify(r),n=r.id;return _g(e,n,t)})}function kg(r,t){return pe(this,void 0,void 0,function*(){const e=yield Tu(r,t),n=JSON.parse(e);if(Object.hasOwnProperty.call(n,"error"))throw new Ru(n.id,n.error.code,n.error.message);return n})}function Rg(r,t,e){return pe(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",r.slice(0,Mu),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},e,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Mg(r,t){return pe(this,void 0,void 0,function*(){const e=yield Tu(r,t),n=JSON.parse(e);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new Sn(En.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}function Tg(){return Lu(49152+Math.floor(Math.random()*(65535-49152+1)))}function Lu(r){if(r<49152||r>65535)throw new Sn(En.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Cg(r){let t="";const e=new Uint8Array(r),n=e.byteLength;for(let s=0;s<n;s++)t+=String.fromCharCode(e[s]);return window.btoa(t)}function Lg(r){return r.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const Ng="solana-wallet";function Da(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Ug(r,t){let e=null;if(t){try{e=new URL(t)}catch{}if((e==null?void 0:e.protocol)!=="https:")throw new Sn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${Ng}:/`));const n=r.startsWith("/")?r:[...Da(e.pathname),...Da(r)].join("/");return new URL(n,e)}function Pg(r,t,e,n=["v1"]){return pe(this,void 0,void 0,function*(){const s=Lu(t),i=yield crypto.subtle.exportKey("raw",r),o=Cg(i),a=Ug("v1/associate/local",e);return a.searchParams.set("association",Lg(o)),a.searchParams.set("port",`${s}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}const Bi={Firefox:0,Other:1};function Og(){return navigator.userAgent.indexOf("Firefox/")!==-1?Bi.Firefox:Bi.Other}function Fg(){return new Promise((r,t)=>{function e(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){e(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{e(),t()},2e3)})}let Tr=null;function zg(r){Tr==null&&(Tr=document.createElement("iframe"),Tr.style.display="none",document.body.appendChild(Tr)),Tr.contentWindow.location.href=r.toString()}function Dg(r){return pe(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const t=Og();switch(t){case Bi.Firefox:zg(r);break;case Bi.Other:{const e=Fg();window.location.assign(r),yield e;break}default:}}catch{throw new Sn(En.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Wg(r,t){return pe(this,void 0,void 0,function*(){const e=Tg(),n=yield Pg(r,e,t);return yield Dg(n),e})}const Wa={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},qg="com.solana.mobilewalletadapter.v1";function Kg(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Sn(En.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function $g(r){let t;try{t=new URL(r)}catch{throw new Sn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new Sn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function qa(r){return new DataView(r).getUint32(0,!1)}function Hg(r,t){return pe(this,void 0,void 0,function*(){Kg();const e=yield Bg(),s=`ws://localhost:${yield Wg(e.publicKey,t==null?void 0:t.baseUri)}/solana-wallet`;let i;const o=(()=>{const y=[...Wa.retryDelayScheduleMs];return()=>y.length>1?y.shift():y[0]})();let a=1,u=0,g={__type:"disconnected"};return new Promise((y,b)=>{let B;const x={},I=()=>pe(this,void 0,void 0,function*(){if(g.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${g.__type}\`.`);return}B.removeEventListener("open",I);const{associationKeypair:q}=g,D=yield Ws();B.send(yield zs(D.publicKey,q.privateKey)),g={__type:"hello_req_sent",associationPublicKey:q.publicKey,ecdhPrivateKey:D.privateKey}}),R=q=>{q.wasClean?g={__type:"disconnected"}:b(new Sn(En.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${q.code}: ${q.reason}).`,{closeEvent:q})),N()},E=q=>pe(this,void 0,void 0,function*(){N(),Date.now()-i>=Wa.timeoutMs?b(new Sn(En.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(D=>{const K=o();T=window.setTimeout(D,K)}),P())}),C=q=>pe(this,void 0,void 0,function*(){const D=yield q.data.arrayBuffer();switch(g.__type){case"connecting":if(D.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const K=yield Ws();B.send(yield zs(K.publicKey,e.privateKey)),g={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:K.privateKey};break;case"connected":try{const H=D.slice(0,qn),V=qa(H);if(V!==u+1)throw new Error("Encrypted message has invalid sequence number");u=V;const ut=yield kg(D,g.sharedSecret),tt=x[ut.id];delete x[ut.id],tt.resolve(ut.result)}catch(H){if(H instanceof Ru){const V=x[H.jsonRpcMessageId];delete x[H.jsonRpcMessageId],V.reject(H)}else throw H}break;case"hello_req_sent":{if(D.byteLength===0){const et=yield Ws();B.send(yield zs(et.publicKey,e.privateKey)),g={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:et.privateKey};break}const H=yield Rg(D,g.associationPublicKey,g.ecdhPrivateKey),V=D.slice(Mu),ut=V.byteLength!==0?yield(()=>pe(this,void 0,void 0,function*(){const et=V.slice(0,qn),M=qa(et);if(M!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=M,Mg(V,H)}))():{protocol_version:"legacy"};g={__type:"connected",sharedSecret:H,sessionProperties:ut};const tt=bg(ut.protocol_version,(et,M)=>pe(this,void 0,void 0,function*(){const c=a++;return B.send(yield Ig({id:c,jsonrpc:"2.0",method:et,params:M??{}},H)),new Promise((d,p)=>{x[c]={resolve(w){switch(et){case"authorize":case"reauthorize":{const{wallet_uri_base:v}=w;if(v!=null)try{$g(v)}catch(k){p(k);return}break}}d(w)},reject:p}})}));try{y(yield r(tt))}catch(et){b(et)}finally{N(),B.close()}break}}});let N,T;const P=()=>{N&&N(),g={__type:"connecting",associationKeypair:e},i===void 0&&(i=Date.now()),B=new WebSocket(s,[qg]),B.addEventListener("open",I),B.addEventListener("close",R),B.addEventListener("error",E),B.addEventListener("message",C),N=()=>{window.clearTimeout(T),B.removeEventListener("open",I),B.removeEventListener("close",R),B.removeEventListener("error",E),B.removeEventListener("message",C)}};P()})})}function jg(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function y(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var I=0,R=0,E=0,C=x.length;E!==C&&x[E]===0;)E++,I++;for(var N=(C-E)*g+1>>>0,T=new Uint8Array(N);E!==C;){for(var P=x[E],q=0,D=N-1;(P!==0||q<R)&&D!==-1;D--,q++)P+=256*T[D]>>>0,T[D]=P%o>>>0,P=P/o>>>0;if(P!==0)throw new Error("Non-zero carry");R=q,E++}for(var K=N-R;K!==N&&T[K]===0;)K++;for(var H=a.repeat(I);K<N;++K)H+=r.charAt(T[K]);return H}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var I=0,R=0,E=0;x[I]===a;)R++,I++;for(var C=(x.length-I)*u+1>>>0,N=new Uint8Array(C);x[I];){var T=x.charCodeAt(I);if(T>255)return;var P=t[T];if(P===255)return;for(var q=0,D=C-1;(P!==0||q<E)&&D!==-1;D--,q++)P+=o*N[D]>>>0,N[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");E=q,I++}for(var K=C-E;K!==C&&N[K]===0;)K++;for(var H=new Uint8Array(R+(C-K)),V=R;K!==C;)H[V++]=N[K++];return H}function B(x){var I=b(x);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:y,decodeUnsafe:b,decode:B}}var Vg=jg;const Gg=Vg,Zg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Yg=Gg(Zg);const Nu=Sr(Yg);function qs(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(e[n[s]]=r[n[s]]);return e}function oi(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(y){try{g(n.next(y))}catch(b){o(b)}}function u(y){try{g(n.throw(y))}catch(b){o(b)}}function g(y){y.done?i(y.value):s(y.value).then(a,u)}g((n=n.apply(r,t||[])).next())})}function Uu(r){return window.btoa(String.fromCharCode.call(null,...r))}function Ks(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function Ka(r){const t="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return Uu(t)}function Jg(r){const e=r[0]*qr+1;return Wo.deserializeMessageVersion(r.slice(e,r.length))==="legacy"?Je.from(r):$r.deserialize(r)}function Xg(r,t){return oi(this,void 0,void 0,function*(){return yield Hg(n=>{const s=new Proxy({},{get(i,o){if(i[o]==null)switch(o){case"signAndSendTransactions":i[o]=function(a){var{minContextSlot:u,commitment:g,skipPreflight:y,maxRetries:b,waitForCommitmentToSendNextTransaction:B,transactions:x}=a,I=qs(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return oi(this,void 0,void 0,function*(){const R=x.map(Ka),E={min_context_slot:u,commitment:g,skip_preflight:y,max_retries:b,wait_for_commitment_to_send_next_transaction:B},{signatures:C}=yield n.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},I),Object.values(E).some(T=>T!=null)?{options:E}:null),{payloads:R}));return C.map(Ks).map(Nu.encode)})};break;case"signMessages":i[o]=function(a){var{payloads:u}=a,g=qs(a,["payloads"]);return oi(this,void 0,void 0,function*(){const y=u.map(Uu),{signed_payloads:b}=yield n.signMessages(Object.assign(Object.assign({},g),{payloads:y}));return b.map(Ks)})};break;case"signTransactions":i[o]=function(a){var{transactions:u}=a,g=qs(a,["transactions"]);return oi(this,void 0,void 0,function*(){const y=u.map(Ka),{signed_payloads:b}=yield n.signTransactions(Object.assign(Object.assign({},g),{payloads:y}));return b.map(Ks).map(Jg)})};break;default:{i[o]=n[o];break}}return i[o]},defineProperty(){return!1},deleteProperty(){return!1}});return r(s)},t)})}var Qg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Pu={},He={};let jo;const tp=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];He.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};He.getSymbolTotalCodewords=function(t){return tp[t]};He.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};He.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');jo=t};He.isKanjiModeEnabled=function(){return typeof jo<"u"};He.toSJIS=function(t){return jo(t)};var Vi={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return t(n)}catch{return s}}})(Vi);function Ou(){this.buffer=[],this.length=0}Ou.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ep=Ou;function Xr(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Xr.prototype.set=function(r,t,e,n){const s=r*this.size+t;this.data[s]=e,n&&(this.reservedBit[s]=!0)};Xr.prototype.get=function(r,t){return this.data[r*this.size+t]};Xr.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};Xr.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var np=Xr,Fu={};(function(r){const t=He.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let u=1;u<s-1;u++)a[u]=a[u-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let u=0;u<o;u++)a===0&&u===0||a===0&&u===o-1||a===o-1&&u===0||s.push([i[a],i[u]]);return s}})(Fu);var zu={};const rp=He.getSymbolSize,$a=7;zu.getPositions=function(t){const e=rp(t);return[[0,0],[e-$a,0],[0,e-$a]]};var Du={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,u=0,g=null,y=null;for(let b=0;b<i;b++){a=u=0,g=y=null;for(let B=0;B<i;B++){let x=s.get(b,B);x===g?a++:(a>=5&&(o+=t.N1+(a-5)),g=x,a=1),x=s.get(B,b),x===y?u++:(u>=5&&(o+=t.N1+(u-5)),y=x,u=1)}a>=5&&(o+=t.N1+(a-5)),u>=5&&(o+=t.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let u=0;u<i-1;u++){const g=s.get(a,u)+s.get(a,u+1)+s.get(a+1,u)+s.get(a+1,u+1);(g===4||g===0)&&o++}return o*t.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,u=0;for(let g=0;g<i;g++){a=u=0;for(let y=0;y<i;y++)a=a<<1&2047|s.get(g,y),y>=10&&(a===1488||a===93)&&o++,u=u<<1&2047|s.get(y,g),y>=10&&(u===1488||u===93)&&o++}return o*t.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function e(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let u=0;u<o;u++)i.isReserved(u,a)||i.xor(u,a,e(s,u,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,u=1/0;for(let g=0;g<o;g++){i(g),r.applyMask(g,s);const y=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(g,s),y<u&&(u=y,a=g)}return a}})(Du);var Gi={};const Cn=Vi,ai=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ci=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Gi.getBlocksCount=function(t,e){switch(e){case Cn.L:return ai[(t-1)*4+0];case Cn.M:return ai[(t-1)*4+1];case Cn.Q:return ai[(t-1)*4+2];case Cn.H:return ai[(t-1)*4+3];default:return}};Gi.getTotalCodewordsCount=function(t,e){switch(e){case Cn.L:return ci[(t-1)*4+0];case Cn.M:return ci[(t-1)*4+1];case Cn.Q:return ci[(t-1)*4+2];case Cn.H:return ci[(t-1)*4+3];default:return}};var Wu={},Zi={};const Pr=new Uint8Array(512),Ii=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)Pr[e]=t,Ii[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)Pr[e]=Pr[e-255]})();Zi.log=function(t){if(t<1)throw new Error("log("+t+")");return Ii[t]};Zi.exp=function(t){return Pr[t]};Zi.mul=function(t,e){return t===0||e===0?0:Pr[Ii[t]+Ii[e]]};(function(r){const t=Zi;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=t.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=t.mul(s[u],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(Wu);const qu=Wu;function Vo(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Vo.prototype.initialize=function(t){this.degree=t,this.genPoly=qu.generateECPolynomial(this.degree)};Vo.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=qu.mod(e,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var ip=Vo,Ku={},Nn={},Go={};Go.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var dn={};const $u="[0-9]+",sp="[A-Z $%*+\\-./:]+";let jr="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";jr=jr.replace(/u/g,"\\u");const op="(?:(?![A-Z0-9 $%*+\\-./:]|"+jr+`)(?:.|[\r
]))+`;dn.KANJI=new RegExp(jr,"g");dn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");dn.BYTE=new RegExp(op,"g");dn.NUMERIC=new RegExp($u,"g");dn.ALPHANUMERIC=new RegExp(sp,"g");const ap=new RegExp("^"+jr+"$"),cp=new RegExp("^"+$u+"$"),up=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");dn.testKanji=function(t){return ap.test(t)};dn.testNumeric=function(t){return cp.test(t)};dn.testAlphanumeric=function(t){return up.test(t)};(function(r){const t=Go,e=dn;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(Nn);(function(r){const t=He,e=Gi,n=Vi,s=Nn,i=Go,o=7973,a=t.getBCHDigit(o);function u(B,x,I){for(let R=1;R<=40;R++)if(x<=r.getCapacity(R,I,B))return R}function g(B,x){return s.getCharCountIndicator(B,x)+4}function y(B,x){let I=0;return B.forEach(function(R){const E=g(R.mode,x);I+=E+R.getBitsLength()}),I}function b(B,x){for(let I=1;I<=40;I++)if(y(B,I)<=r.getCapacity(I,x,s.MIXED))return I}r.from=function(x,I){return i.isValid(x)?parseInt(x,10):I},r.getCapacity=function(x,I,R){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof R>"u"&&(R=s.BYTE);const E=t.getSymbolTotalCodewords(x),C=e.getTotalCodewordsCount(x,I),N=(E-C)*8;if(R===s.MIXED)return N;const T=N-g(R,x);switch(R){case s.NUMERIC:return Math.floor(T/10*3);case s.ALPHANUMERIC:return Math.floor(T/11*2);case s.KANJI:return Math.floor(T/13);case s.BYTE:default:return Math.floor(T/8)}},r.getBestVersionForData=function(x,I){let R;const E=n.from(I,n.M);if(Array.isArray(x)){if(x.length>1)return b(x,E);if(x.length===0)return 1;R=x[0]}else R=x;return u(R.mode,R.getLength(),E)},r.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let I=x<<12;for(;t.getBCHDigit(I)-a>=0;)I^=o<<t.getBCHDigit(I)-a;return x<<12|I}})(Ku);var Hu={};const lo=He,ju=1335,lp=21522,Ha=lo.getBCHDigit(ju);Hu.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;lo.getBCHDigit(s)-Ha>=0;)s^=ju<<lo.getBCHDigit(s)-Ha;return(n<<10|s)^lp};var Vu={};const fp=Nn;function mr(r){this.mode=fp.NUMERIC,this.data=r.toString()}mr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};mr.prototype.getLength=function(){return this.data.length};mr.prototype.getBitsLength=function(){return mr.getBitsLength(this.data.length)};mr.prototype.write=function(t){let e,n,s;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),s=parseInt(n,10),t.put(s,i*3+1))};var hp=mr;const dp=Nn,$s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function br(r){this.mode=dp.ALPHANUMERIC,this.data=r}br.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};br.prototype.getLength=function(){return this.data.length};br.prototype.getBitsLength=function(){return br.getBitsLength(this.data.length)};br.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=$s.indexOf(this.data[e])*45;n+=$s.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put($s.indexOf(this.data[e]),6)};var gp=br;const pp=Nn;function vr(r){this.mode=pp.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}vr.getBitsLength=function(t){return t*8};vr.prototype.getLength=function(){return this.data.length};vr.prototype.getBitsLength=function(){return vr.getBitsLength(this.data.length)};vr.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};var yp=vr;const wp=Nn,mp=He;function Er(r){this.mode=wp.KANJI,this.data=r}Er.getBitsLength=function(t){return t*13};Er.prototype.getLength=function(){return this.data.length};Er.prototype.getBitsLength=function(){return Er.getBitsLength(this.data.length)};Er.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=mp.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};var bp=Er,Gu={exports:{}};(function(r){var t={single_source_shortest_paths:function(e,n,s){var i={},o={};o[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var u,g,y,b,B,x,I,R,E;!a.empty();){u=a.pop(),g=u.value,b=u.cost,B=e[g]||{};for(y in B)B.hasOwnProperty(y)&&(x=B[y],I=b+x,R=o[y],E=typeof o[y]>"u",(E||R>I)&&(o[y]=I,a.push(y,I),i[y]=g))}if(typeof s<"u"&&typeof o[s]>"u"){var C=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(C)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Gu);var vp=Gu.exports;(function(r){const t=Nn,e=hp,n=gp,s=yp,i=bp,o=dn,a=He,u=vp;function g(C){return unescape(encodeURIComponent(C)).length}function y(C,N,T){const P=[];let q;for(;(q=C.exec(T))!==null;)P.push({data:q[0],index:q.index,mode:N,length:q[0].length});return P}function b(C){const N=y(o.NUMERIC,t.NUMERIC,C),T=y(o.ALPHANUMERIC,t.ALPHANUMERIC,C);let P,q;return a.isKanjiModeEnabled()?(P=y(o.BYTE,t.BYTE,C),q=y(o.KANJI,t.KANJI,C)):(P=y(o.BYTE_KANJI,t.BYTE,C),q=[]),N.concat(T,P,q).sort(function(K,H){return K.index-H.index}).map(function(K){return{data:K.data,mode:K.mode,length:K.length}})}function B(C,N){switch(N){case t.NUMERIC:return e.getBitsLength(C);case t.ALPHANUMERIC:return n.getBitsLength(C);case t.KANJI:return i.getBitsLength(C);case t.BYTE:return s.getBitsLength(C)}}function x(C){return C.reduce(function(N,T){const P=N.length-1>=0?N[N.length-1]:null;return P&&P.mode===T.mode?(N[N.length-1].data+=T.data,N):(N.push(T),N)},[])}function I(C){const N=[];for(let T=0;T<C.length;T++){const P=C[T];switch(P.mode){case t.NUMERIC:N.push([P,{data:P.data,mode:t.ALPHANUMERIC,length:P.length},{data:P.data,mode:t.BYTE,length:P.length}]);break;case t.ALPHANUMERIC:N.push([P,{data:P.data,mode:t.BYTE,length:P.length}]);break;case t.KANJI:N.push([P,{data:P.data,mode:t.BYTE,length:g(P.data)}]);break;case t.BYTE:N.push([{data:P.data,mode:t.BYTE,length:g(P.data)}])}}return N}function R(C,N){const T={},P={start:{}};let q=["start"];for(let D=0;D<C.length;D++){const K=C[D],H=[];for(let V=0;V<K.length;V++){const ut=K[V],tt=""+D+V;H.push(tt),T[tt]={node:ut,lastCount:0},P[tt]={};for(let et=0;et<q.length;et++){const M=q[et];T[M]&&T[M].node.mode===ut.mode?(P[M][tt]=B(T[M].lastCount+ut.length,ut.mode)-B(T[M].lastCount,ut.mode),T[M].lastCount+=ut.length):(T[M]&&(T[M].lastCount=ut.length),P[M][tt]=B(ut.length,ut.mode)+4+t.getCharCountIndicator(ut.mode,N))}}q=H}for(let D=0;D<q.length;D++)P[q[D]].end=0;return{map:P,table:T}}function E(C,N){let T;const P=t.getBestModeForData(C);if(T=t.from(N,P),T!==t.BYTE&&T.bit<P.bit)throw new Error('"'+C+'" cannot be encoded with mode '+t.toString(T)+`.
 Suggested mode is: `+t.toString(P));switch(T===t.KANJI&&!a.isKanjiModeEnabled()&&(T=t.BYTE),T){case t.NUMERIC:return new e(C);case t.ALPHANUMERIC:return new n(C);case t.KANJI:return new i(C);case t.BYTE:return new s(C)}}r.fromArray=function(N){return N.reduce(function(T,P){return typeof P=="string"?T.push(E(P,null)):P.data&&T.push(E(P.data,P.mode)),T},[])},r.fromString=function(N,T){const P=b(N,a.isKanjiModeEnabled()),q=I(P),D=R(q,T),K=u.find_path(D.map,"start","end"),H=[];for(let V=1;V<K.length-1;V++)H.push(D.table[K[V]].node);return r.fromArray(x(H))},r.rawSplit=function(N){return r.fromArray(b(N,a.isKanjiModeEnabled()))}})(Vu);const Yi=He,Hs=Vi,Ep=ep,Sp=np,xp=Fu,_p=zu,fo=Du,ho=Gi,Ap=ip,ki=Ku,Bp=Hu,Ip=Nn,js=Vu;function kp(r,t){const e=r.size,n=_p.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||e<=i+a))for(let u=-1;u<=7;u++)o+u<=-1||e<=o+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?r.set(i+a,o+u,!0,!0):r.set(i+a,o+u,!1,!0))}}function Rp(r){const t=r.size;for(let e=8;e<t-8;e++){const n=e%2===0;r.set(e,6,n,!0),r.set(6,e,n,!0)}}function Mp(r,t){const e=xp.getPositions(t);for(let n=0;n<e.length;n++){const s=e[n][0],i=e[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?r.set(s+o,i+a,!0,!0):r.set(s+o,i+a,!1,!0)}}function Tp(r,t){const e=r.size,n=ki.getEncodedBits(t);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+e-8-3,o=(n>>a&1)===1,r.set(s,i,o,!0),r.set(i,s,o,!0)}function Vs(r,t,e){const n=r.size,s=Bp.getEncodedBits(t,e);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?r.set(i,8,o,!0):i<8?r.set(i+1,8,o,!0):r.set(n-15+i,8,o,!0),i<8?r.set(8,n-i-1,o,!0):i<9?r.set(8,15-i-1+1,o,!0):r.set(8,15-i-1,o,!0);r.set(n-8,8,1,!0)}function Cp(r,t){const e=r.size;let n=-1,s=e-1,i=7,o=0;for(let a=e-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!r.isReserved(s,a-u)){let g=!1;o<t.length&&(g=(t[o]>>>i&1)===1),r.set(s,a-u,g),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||e<=s){s-=n,n=-n;break}}}function Lp(r,t,e){const n=new Ep;e.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),Ip.getCharCountIndicator(u.mode,r)),u.write(n)});const s=Yi.getSymbolTotalCodewords(r),i=ho.getTotalCodewordsCount(r,t),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let u=0;u<a;u++)n.put(u%2?17:236,8);return Np(n,r,t)}function Np(r,t,e){const n=Yi.getSymbolTotalCodewords(t),s=ho.getTotalCodewordsCount(t,e),i=n-s,o=ho.getBlocksCount(t,e),a=n%o,u=o-a,g=Math.floor(n/o),y=Math.floor(i/o),b=y+1,B=g-y,x=new Ap(B);let I=0;const R=new Array(o),E=new Array(o);let C=0;const N=new Uint8Array(r.buffer);for(let K=0;K<o;K++){const H=K<u?y:b;R[K]=N.slice(I,I+H),E[K]=x.encode(R[K]),I+=H,C=Math.max(C,H)}const T=new Uint8Array(n);let P=0,q,D;for(q=0;q<C;q++)for(D=0;D<o;D++)q<R[D].length&&(T[P++]=R[D][q]);for(q=0;q<B;q++)for(D=0;D<o;D++)T[P++]=E[D][q];return T}function Up(r,t,e,n){let s;if(Array.isArray(r))s=js.fromArray(r);else if(typeof r=="string"){let g=t;if(!g){const y=js.rawSplit(r);g=ki.getBestVersionForData(y,e)}s=js.fromString(r,g||40)}else throw new Error("Invalid data");const i=ki.getBestVersionForData(s,e);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Lp(t,e,s),a=Yi.getSymbolSize(t),u=new Sp(a);return kp(u,t),Rp(u),Mp(u,t),Vs(u,e,0),t>=7&&Tp(u,t),Cp(u,o),isNaN(n)&&(n=fo.getBestMask(u,Vs.bind(null,u,e))),fo.applyMask(n,u),Vs(u,e,n),{modules:u,version:t,errorCorrectionLevel:e,maskPattern:n,segments:s}}Pu.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Hs.M,s,i;return typeof e<"u"&&(n=Hs.from(e.errorCorrectionLevel,Hs.M),s=ki.from(e.version),i=fo.from(e.maskPattern),e.toSJISFunc&&Yi.setToSJISFunction(e.toSJISFunc)),Up(t,s,n,i)};var Zu={},Zo={};(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,u=r.getScale(o,i),g=Math.floor((o+i.margin*2)*u),y=i.margin*u,b=[i.color.light,i.color.dark];for(let B=0;B<g;B++)for(let x=0;x<g;x++){let I=(B*g+x)*4,R=i.color.light;if(B>=y&&x>=y&&B<g-y&&x<g-y){const E=Math.floor((B-y)/u),C=Math.floor((x-y)/u);R=b[a[E*o+C]?1:0]}n[I++]=R.r,n[I++]=R.g,n[I++]=R.b,n[I]=R.a}}})(Zo);(function(r){const t=Zo;function e(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let u=a,g=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(g=n()),u=t.getOptions(u);const y=t.getImageWidth(i.modules.size,u),b=g.getContext("2d"),B=b.createImageData(y,y);return t.qrToImageData(B.data,i,u),e(b,g,y),b.putImageData(B,0,0),g},r.renderToDataURL=function(i,o,a){let u=a;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const g=r.render(i,o,u),y=u.type||"image/png",b=u.rendererOpts||{};return g.toDataURL(y,b.quality)}})(Zu);var Yu={};const Pp=Zo;function ja(r,t){const e=r.a/255,n=t+'="'+r.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function Gs(r,t,e){let n=r+t;return typeof e<"u"&&(n+=" "+e),n}function Op(r,t,e){let n="",s=0,i=!1,o=0;for(let a=0;a<r.length;a++){const u=Math.floor(a%t),g=Math.floor(a/t);!u&&!i&&(i=!0),r[a]?(o++,a>0&&u>0&&r[a-1]||(n+=i?Gs("M",u+e,.5+g+e):Gs("m",s,0),s=0,i=!1),u+1<t&&r[a+1]||(n+=Gs("h",o),o=0)):s++}return n}Yu.render=function(t,e,n){const s=Pp.getOptions(e),i=t.modules.size,o=t.modules.data,a=i+s.margin*2,u=s.color.light.a?"<path "+ja(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",g="<path "+ja(s.color.dark,"stroke")+' d="'+Op(o,i,s.margin)+'"/>',y='viewBox="0 0 '+a+" "+a+'"',B='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+y+' shape-rendering="crispEdges">'+u+g+`</svg>
`;return typeof n=="function"&&n(null,B),B};const Fp=Qg,go=Pu,Ju=Zu,zp=Yu;function Yo(r,t,e,n,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!Fp())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=e,e=t,t=n=void 0):o===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=e,e=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(e=t,t=n=void 0):o===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(u,g){try{const y=go.create(e,n);u(r(y,t,n))}catch(y){g(y)}})}try{const u=go.create(e,n);s(null,r(u,t,n))}catch(u){s(u)}}go.create;Yo.bind(null,Ju.render);Yo.bind(null,Ju.renderToDataURL);Yo.bind(null,function(r,t,e){return zp.render(r,e)});function At(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(y){try{g(n.next(y))}catch(b){o(b)}}function u(y){try{g(n.throw(y))}catch(b){o(b)}}function g(y){y.done?i(y.value):s(y.value).then(a,u)}g((n=n.apply(r,t||[])).next())})}function hi(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function Dp(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const kn="Mobile Wallet Adapter",Wp=64;function qp(r){const t=hi(r);return new ct(t)}function Va(r){return"version"in r}function Kp(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class $p extends sg{constructor(t){var e;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=kn,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=Dp()?Dt.Loadable:Dt.Unsupported,this._authorizationResultCache=t.authorizationResultCache,this._addressSelector=t.addressSelector,this._appIdentity=t.appIdentity,this._chain=(e=t.chain)!==null&&e!==void 0?e:Kp(t.cluster),this._hostAuthority=t.remoteHostAuthority,this._onWalletNotFound=t.onWalletNotFound,this._readyState!==Dt.Unsupported&&this._authorizationResultCache.get().then(n=>{n&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=qp(this._selectedAddress)}catch(t){throw new xu(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Dt.Installed&&this.emit("readyStateChange",this._readyState=Dt.Installed)}runWithGuard(t){return At(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return At(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return At(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){if(this._readyState!==Dt.Installed&&this._readyState!==Dt.Loadable)throw new hr;this._connecting=!0;try{const t=yield this._authorizationResultCache.get();t&&this.handleAuthorizationResult(t)}catch(t){throw new Nr(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}connect(){return At(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){if(this._readyState!==Dt.Installed&&this._readyState!==Dt.Loadable)throw new hr;this._connecting=!0;try{yield this.performAuthorization()}catch(t){throw new Nr(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}performAuthorization(t){return At(this,void 0,void 0,function*(){try{const e=yield this._authorizationResultCache.get();return e?(this.handleAuthorizationResult(e),e):yield this.transact(n=>At(this,void 0,void 0,function*(){const s=yield n.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:t});return Promise.all([this._authorizationResultCache.set(s),this.handleAuthorizationResult(s)]),s}))}catch(e){throw new Nr(e instanceof Error&&e.message||"Unknown error",e)}})}handleAuthorizationResult(t){var e;return At(this,void 0,void 0,function*(){const n=this._authorizationResult==null||((e=this._authorizationResult)===null||e===void 0?void 0:e.accounts.length)!==t.accounts.length||this._authorizationResult.accounts.some((s,i)=>s.address!==t.accounts[i].address);if(this._authorizationResult=t,this.declareWalletAsInstalled(),n){const s=yield this._addressSelector.select(t.accounts.map(({address:i})=>i));s!==this._selectedAddress&&(this._selectedAddress=s,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(t,e){return At(this,void 0,void 0,function*(){try{const n=yield t.authorize({auth_token:e,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new Su(n instanceof Error&&(n==null?void 0:n.message)||"Unknown error",n)}})}disconnect(){return At(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(t){var e;return At(this,void 0,void 0,function*(){const n=(e=this._authorizationResult)===null||e===void 0?void 0:e.wallet_uri_base,s=n?{baseUri:n}:void 0,i=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield Xg(t,Object.assign(Object.assign({},s),i))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new cn;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(t){return At(this,void 0,void 0,function*(){const{authToken:e}=this.assertIsAuthorized();try{return yield this.transact(n=>At(this,void 0,void 0,function*(){return yield this.performReauthorization(n,e),yield n.signTransactions({transactions:t})}))}catch(n){throw new Dn(n==null?void 0:n.message,n)}})}sendTransaction(t,e,n){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const{authToken:s}=this.assertIsAuthorized(),i=n==null?void 0:n.minContextSlot;try{return yield this.transact(o=>At(this,void 0,void 0,function*(){function a(){let b;switch(e.commitment){case"confirmed":case"finalized":case"processed":b=e.commitment;break;default:b="finalized"}let B;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":B=n.preflightCommitment;break;case void 0:B=b;break;default:B="finalized"}return(B==="finalized"?2:B==="confirmed"?1:0)<(b==="finalized"?2:b==="confirmed"?1:0)?B:b}const[u,g,y]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,s),Va(t)?null:(()=>At(this,void 0,void 0,function*(){var b;if(t.feePayer||(t.feePayer=(b=this.publicKey)!==null&&b!==void 0?b:void 0),t.recentBlockhash==null){const{blockhash:B}=yield e.getLatestBlockhash({commitment:a()});t.recentBlockhash=B}}))()]);if(u.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:i,transactions:[t]}))[0];{const[b]=yield o.signTransactions({transactions:[t]});if(Va(b))return yield e.sendTransaction(b);{const B=b.serialize();return yield e.sendRawTransaction(B,Object.assign(Object.assign({},n),{preflightCommitment:a()}))}}}))}catch(o){throw new zn(o==null?void 0:o.message,o)}}))})}signTransaction(t){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const[e]=yield this.performSignTransactions([t]);return e}))})}signAllTransactions(t){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){return yield this.performSignTransactions(t)}))})}signMessage(t){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const{authToken:e,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(s=>At(this,void 0,void 0,function*(){yield this.performReauthorization(s,e);const[i]=yield s.signMessages({addresses:[n],payloads:[t]});return i.slice(-Wp)}))}catch(s){throw new _u(s==null?void 0:s.message,s)}}))})}signIn(t){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){var e,n;if(this._readyState!==Dt.Installed&&this._readyState!==Dt.Loadable)throw new hr;this._connecting=!0;try{const s=yield this.performAuthorization(Object.assign(Object.assign({},t),{domain:(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:window.location.host}));if(!s.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const i=s.sign_in_result.address;return{account:Object.assign(Object.assign({},(n=s.accounts.find(a=>a.address==i))!==null&&n!==void 0?n:{address:i}),{publicKey:hi(i)}),signedMessage:hi(s.sign_in_result.signed_message),signature:hi(s.sign_in_result.signature)}}catch(s){throw new Nr(s instanceof Error&&s.message||"Unknown error",s)}finally{this._connecting=!1}}))})}}function Hp(){return{select(r){return At(this,void 0,void 0,function*(){return r[0]})}}}const Zs="SolanaMobileWalletAdapterDefaultAuthorizationCache";function jp(){let r;try{r=window.localStorage}catch{}return{clear(){return At(this,void 0,void 0,function*(){if(r)try{r.removeItem(Zs)}catch{}})},get(){return At(this,void 0,void 0,function*(){if(r)try{return JSON.parse(r.getItem(Zs))||void 0}catch{}})},set(t){return At(this,void 0,void 0,function*(){if(r)try{r.setItem(Zs,JSON.stringify(t))}catch{}})}}}function Vp(r){return At(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(r.url)})}function Gp(){return Vp}var Zp=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},Yp=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},di;function ky(r){const t=({register:e})=>e(r);try{window.dispatchEvent(new Jp(t))}catch(e){console.error(`wallet-standard:register-wallet event could not be dispatched
`,e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error(`wallet-standard:app-ready event listener could not be added
`,e)}}class Jp extends Event{get detail(){return Zp(this,di,"f")}get type(){return"wallet-standard:register-wallet"}constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),di.set(this,void 0),Yp(this,di,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}di=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function Xp(r,t){if(r===t)return!0;const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}var rt=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},de=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},_e,Oe,Kn,$n,Un,Ur,Ri,Bt,Mi,po,gi,yo,Or,wo,Ga,Za,Ya,Ja;class Qp extends Au{get name(){return rt(this,Bt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return rt(this,Bt,"f").icon}get readyState(){return rt(this,Mi,"f")}get publicKey(){return rt(this,Kn,"f")}get connecting(){return rt(this,$n,"f")}get supportedTransactionVersions(){return rt(this,Ri,"f")}get wallet(){return rt(this,Bt,"f")}get standard(){return!0}constructor({wallet:t}){super(),_e.add(this),Oe.set(this,void 0),Kn.set(this,void 0),$n.set(this,void 0),Un.set(this,void 0),Ur.set(this,void 0),Ri.set(this,void 0),Bt.set(this,void 0),Mi.set(this,typeof window>"u"||typeof document>"u"?Dt.Unsupported:Dt.Installed),wo.set(this,e=>{if("accounts"in e){const n=rt(this,Bt,"f").accounts[0];rt(this,Oe,"f")&&!rt(this,Un,"f")&&n!==rt(this,Oe,"f")&&(n?rt(this,_e,"m",gi).call(this,n):(this.emit("error",new Su),rt(this,_e,"m",yo).call(this)))}"features"in e&&rt(this,_e,"m",Or).call(this)}),de(this,Bt,t,"f"),de(this,Oe,null,"f"),de(this,Kn,null,"f"),de(this,$n,!1,"f"),de(this,Un,!1,"f"),de(this,Ur,rt(this,Bt,"f").features[Iu].on("change",rt(this,wo,"f")),"f"),rt(this,_e,"m",Or).call(this)}destroy(){de(this,Oe,null,"f"),de(this,Kn,null,"f"),de(this,$n,!1,"f"),de(this,Un,!1,"f");const t=rt(this,Ur,"f");t&&(de(this,Ur,null,"f"),t())}async autoConnect(){return rt(this,_e,"m",po).call(this,{silent:!0})}async connect(){return rt(this,_e,"m",po).call(this)}async disconnect(){if(Ua in rt(this,Bt,"f").features)try{de(this,Un,!0,"f"),await rt(this,Bt,"f").features[Ua].disconnect()}catch(t){this.emit("error",new ng(t==null?void 0:t.message,t))}finally{de(this,Un,!1,"f")}rt(this,_e,"m",yo).call(this)}async sendTransaction(t,e,n={}){try{const s=rt(this,Oe,"f");if(!s)throw new cn;let i;if(Rn in rt(this,Bt,"f").features)if(s.features.includes(Rn))i=Rn;else if(xe in rt(this,Bt,"f").features&&s.features.includes(xe))i=xe;else throw new cr;else if(xe in rt(this,Bt,"f").features){if(!s.features.includes(xe))throw new cr;i=xe}else throw new Lr;const o=dg(e.rpcEndpoint);if(!s.chains.includes(o))throw new zn;try{const{signers:a,...u}=n;let g;if(Wn(t)?(a!=null&&a.length&&t.sign(a),g=t.serialize()):(t=await this.prepareTransaction(t,e,u),a!=null&&a.length&&t.partialSign(...a),g=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Rn){const[y]=await rt(this,Bt,"f").features[Rn].signAndSendTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:Fs(u.preflightCommitment||e.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return Nu.encode(y.signature)}else{const[y]=await rt(this,Bt,"f").features[xe].signTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:Fs(u.preflightCommitment||e.commitment),minContextSlot:u.minContextSlot}});return await e.sendRawTransaction(y.signedTransaction,{...u,preflightCommitment:Fs(u.preflightCommitment||e.commitment)})}}catch(a){throw a instanceof Ce?a:new zn(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}Oe=new WeakMap,Kn=new WeakMap,$n=new WeakMap,Un=new WeakMap,Ur=new WeakMap,Ri=new WeakMap,Bt=new WeakMap,Mi=new WeakMap,wo=new WeakMap,_e=new WeakSet,po=async function(t){try{if(this.connected||this.connecting)return;if(rt(this,Mi,"f")!==Dt.Installed)throw new hr;if(de(this,$n,!0,"f"),!rt(this,Bt,"f").accounts.length)try{await rt(this,Bt,"f").features[Bu].connect(t)}catch(n){throw new Nr(n==null?void 0:n.message,n)}const e=rt(this,Bt,"f").accounts[0];if(!e)throw new cr;rt(this,_e,"m",gi).call(this,e)}catch(e){throw this.emit("error",e),e}finally{de(this,$n,!1,"f")}},gi=function(t){let e;try{e=new ct(t.address)}catch(n){throw new xu(n==null?void 0:n.message,n)}de(this,Oe,t,"f"),de(this,Kn,e,"f"),rt(this,_e,"m",Or).call(this),this.emit("connect",e)},yo=function(){de(this,Oe,null,"f"),de(this,Kn,null,"f"),rt(this,_e,"m",Or).call(this),this.emit("disconnect")},Or=function(){var e,n;const t=Rn in rt(this,Bt,"f").features?rt(this,Bt,"f").features[Rn].supportedTransactionVersions:rt(this,Bt,"f").features[xe].supportedTransactionVersions;de(this,Ri,Xp(t,["legacy"])?null:new Set(t),"f"),xe in rt(this,Bt,"f").features&&((e=rt(this,Oe,"f"))!=null&&e.features.includes(xe))?(this.signTransaction=rt(this,_e,"m",Ga),this.signAllTransactions=rt(this,_e,"m",Za)):(delete this.signTransaction,delete this.signAllTransactions),Mr in rt(this,Bt,"f").features&&((n=rt(this,Oe,"f"))!=null&&n.features.includes(Mr))?this.signMessage=rt(this,_e,"m",Ya):delete this.signMessage,Os in rt(this,Bt,"f").features?this.signIn=rt(this,_e,"m",Ja):delete this.signIn},Ga=async function(t){try{const e=rt(this,Oe,"f");if(!e)throw new cn;if(!(xe in rt(this,Bt,"f").features))throw new Lr;if(!e.features.includes(xe))throw new cr;try{const s=(await rt(this,Bt,"f").features[xe].signTransaction({account:e,transaction:Wn(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Wn(t)?$r.deserialize(s):Je.from(s)}catch(n){throw n instanceof Ce?n:new Dn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Za=async function(t){try{const e=rt(this,Oe,"f");if(!e)throw new cn;if(!(xe in rt(this,Bt,"f").features))throw new Lr;if(!e.features.includes(xe))throw new cr;try{const n=await rt(this,Bt,"f").features[xe].signTransaction(...t.map(s=>({account:e,transaction:Wn(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((s,i)=>{const o=n[i].signedTransaction;return Wn(s)?$r.deserialize(o):Je.from(o)})}catch(n){throw new Dn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Ya=async function(t){try{const e=rt(this,Oe,"f");if(!e)throw new cn;if(!(Mr in rt(this,Bt,"f").features))throw new Lr;if(!e.features.includes(Mr))throw new cr;try{return(await rt(this,Bt,"f").features[Mr].signMessage({account:e,message:t}))[0].signature}catch(n){throw new _u(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Ja=async function(t={}){try{if(!(Os in rt(this,Bt,"f").features))throw new Lr;let e;try{[e]=await rt(this,Bt,"f").features[Os].signIn(t)}catch(n){throw new Na(n==null?void 0:n.message,n)}if(!e)throw new Na;return rt(this,_e,"m",gi).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const ty=og;var ey=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},ny=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},pi;let ze;const Ji=new Set;function ry(r){Fr=void 0,Ji.add(r)}function iy(r){Fr=void 0,Ji.delete(r)}const ur={};function sy(){if(ze||(ze=Object.freeze({register:Xa,get:oy,on:ay}),typeof window>"u"))return ze;const r=Object.freeze({register:Xa});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(r))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new cy(r))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return ze}function Xa(...r){var t;return r=r.filter(e=>!Ji.has(e)),r.length?(r.forEach(e=>ry(e)),(t=ur.register)==null||t.forEach(e=>mo(()=>e(...r))),function(){var n;r.forEach(s=>iy(s)),(n=ur.unregister)==null||n.forEach(s=>mo(()=>s(...r)))}):()=>{}}let Fr;function oy(){return Fr||(Fr=[...Ji]),Fr}function ay(r,t){var e;return(e=ur[r])!=null&&e.push(t)||(ur[r]=[t]),function(){var s;ur[r]=(s=ur[r])==null?void 0:s.filter(i=>t!==i)}}function mo(r){try{r()}catch(t){console.error(t)}}class cy extends Event{get detail(){return ey(this,pi,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),pi.set(this,void 0),ny(this,pi,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}pi=new WeakMap;function uy(){if(ze||(ze=sy(),typeof window>"u"))return ze;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),ze;const{register:t}=ze,e=(...n)=>n.forEach(s=>mo(()=>s({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),ze}return e(...r),ze}function ly(r){const t=Qa(()=>new Set),{get:e,on:n}=Qa(()=>uy()),[s,i]=lt.useState(()=>tc(e()));lt.useEffect(()=>{const a=[n("register",(...u)=>i(g=>[...g,...tc(u)])),n("unregister",(...u)=>i(g=>g.filter(y=>u.some(b=>b===y.wallet))))];return()=>a.forEach(u=>u())},[n]);const o=fy(s);return lt.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(g=>!a.has(g))).forEach(g=>g.destroy())},[o,s]),lt.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),lt.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(u=>u.name===a)?(t.has(a)||(t.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,t])}function Qa(r){const t=lt.useRef(void 0);return t.current===void 0&&(t.current={value:r()}),t.current.value}function fy(r){const t=lt.useRef(void 0);return lt.useEffect(()=>{t.current=r}),t.current}function tc(r){return r.filter(ty).map(t=>new Qp({wallet:t}))}var dr;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(dr||(dr={}));function hy(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function dy({adapters:r,userAgentString:t}){return r.some(e=>e.name!==kn&&e.readyState===Dt.Installed)?dr.DESKTOP_WEB:t&&/android/i.test(t)&&!hy(t)?dr.MOBILE_WEB:dr.DESKTOP_WEB}function gy(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function py({children:r,wallets:t,adapter:e,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const u=lt.useRef(!1),[g,y]=lt.useState(!1),b=lt.useRef(!1),[B,x]=lt.useState(!1),[I,R]=lt.useState(()=>(e==null?void 0:e.publicKey)??null),[E,C]=lt.useState(()=>(e==null?void 0:e.connected)??!1),N=lt.useRef(o);lt.useEffect(()=>(N.current=o,()=>{N.current=void 0}),[o]);const T=lt.useRef((d,p)=>(n.current||(N.current?N.current(d,p):(console.error(d,p),d instanceof hr&&typeof window<"u"&&p&&window.open(p.url,"_blank"))),d)),[P,q]=lt.useState(()=>t.map(d=>({adapter:d,readyState:d.readyState})).filter(({readyState:d})=>d!==Dt.Unsupported));lt.useEffect(()=>{q(p=>t.map((w,v)=>{const k=p[v];return k&&k.adapter===w&&k.readyState===w.readyState?k:{adapter:w,readyState:w.readyState}}).filter(({readyState:w})=>w!==Dt.Unsupported));function d(p){q(w=>{const v=w.findIndex(({adapter:L})=>L===this);if(v===-1)return w;const{adapter:k}=w[v];return[...w.slice(0,v),{adapter:k,readyState:p},...w.slice(v+1)].filter(({readyState:L})=>L!==Dt.Unsupported)})}return t.forEach(p=>p.on("readyStateChange",d,p)),()=>{t.forEach(p=>p.off("readyStateChange",d,p))}},[e,t]);const D=lt.useMemo(()=>P.find(d=>d.adapter===e)??null,[e,P]);lt.useEffect(()=>{if(!e)return;const d=v=>{R(v),u.current=!1,y(!1),C(!0),b.current=!1,x(!1)},p=()=>{n.current||(R(null),u.current=!1,y(!1),C(!1),b.current=!1,x(!1))},w=v=>{T.current(v,e)};return e.on("connect",d),e.on("disconnect",p),e.on("error",w),()=>{e.off("connect",d),e.off("disconnect",p),e.off("error",w),p()}},[e,n]);const K=lt.useRef(!1);lt.useEffect(()=>()=>{K.current=!1},[e]),lt.useEffect(()=>{K.current||u.current||E||!s||!((D==null?void 0:D.readyState)===Dt.Installed||(D==null?void 0:D.readyState)===Dt.Loadable)||(u.current=!0,y(!0),K.current=!0,async function(){try{await s()}catch{i()}finally{y(!1),u.current=!1}}())},[E,s,i,D]);const H=lt.useCallback(async(d,p,w)=>{if(!e)throw T.current(new Oa);if(!E)throw T.current(new cn,e);return await e.sendTransaction(d,p,w)},[e,E]),V=lt.useMemo(()=>e&&"signTransaction"in e?async d=>{if(!E)throw T.current(new cn,e);return await e.signTransaction(d)}:void 0,[e,E]),ut=lt.useMemo(()=>e&&"signAllTransactions"in e?async d=>{if(!E)throw T.current(new cn,e);return await e.signAllTransactions(d)}:void 0,[e,E]),tt=lt.useMemo(()=>e&&"signMessage"in e?async d=>{if(!E)throw T.current(new cn,e);return await e.signMessage(d)}:void 0,[e,E]),et=lt.useMemo(()=>e&&"signIn"in e?async d=>await e.signIn(d):void 0,[e]),M=lt.useCallback(async()=>{if(u.current||b.current||D!=null&&D.adapter.connected)return;if(!D)throw T.current(new Oa);const{adapter:d,readyState:p}=D;if(!(p===Dt.Installed||p===Dt.Loadable))throw T.current(new hr,d);u.current=!0,y(!0);try{await d.connect()}catch(w){throw i(),w}finally{y(!1),u.current=!1}},[i,D]),c=lt.useCallback(async()=>{if(!b.current&&e){b.current=!0,x(!0);try{await e.disconnect()}finally{x(!1),b.current=!1}}},[e]);return vo.createElement(ku.Provider,{value:{autoConnect:!!s,wallets:P,wallet:D,publicKey:I,connected:E,connecting:g,disconnecting:B,select:a,connect:M,disconnect:c,sendTransaction:H,signTransaction:V,signAllTransactions:ut,signMessage:tt,signIn:et}},r)}let Ys;function yy(){var r;return Ys===void 0&&(Ys=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),Ys}function ui(r){const t=yy();return dy({adapters:r,userAgentString:t})===dr.MOBILE_WEB}function wy(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function Ry({children:r,wallets:t,autoConnect:e,localStorageKey:n="walletName",onError:s}){const{connection:i}=Q0(),o=ly(t),a=lt.useMemo(()=>{if(!ui(o))return null;const N=o.find(T=>T.name===kn);return N||new $p({addressSelector:Hp(),appIdentity:{uri:wy()},authorizationResultCache:jp(),cluster:gy(i==null?void 0:i.rpcEndpoint),onWalletNotFound:Gp()})},[o,i==null?void 0:i.rpcEndpoint]),u=lt.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[g,y]=cg(n,ui(o)?kn:null),b=lt.useMemo(()=>u.find(N=>N.name===g)??null,[u,g]),B=lt.useCallback(N=>{g!==N&&(b&&b.name!==kn&&b.disconnect(),y(N))},[b,y,g]);lt.useEffect(()=>{if(!b)return;function N(){R.current||g===kn&&ui(o)||y(null)}return b.on("disconnect",N),()=>{b.off("disconnect",N)}},[b,o,y,g]);const x=lt.useRef(!1),I=lt.useMemo(()=>{if(!(!e||!b))return async()=>{(e===!0||await e(b))&&(x.current?await b.connect():await b.autoConnect())}},[e,b]),R=lt.useRef(!1);lt.useEffect(()=>{if(g===kn&&ui(o)){R.current=!1;return}function N(){R.current=!0}return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N)}},[o,g]);const E=lt.useCallback(()=>{b&&b.name!==kn&&B(null)},[b,B]),C=lt.useCallback(N=>{x.current=!0,B(N)},[B]);return vo.createElement(py,{wallets:u,adapter:b,isUnloadingRef:R,onAutoConnectRequest:I,onConnectError:E,onError:s,onSelectWallet:C},r)}export{Ft as A,ig as B,rh as C,oh as D,kt as E,nt as F,st as G,_i as H,xa as I,_c as J,Je as K,fi as L,Q0 as M,Pa as N,xy as O,ct as P,Ry as Q,gt as R,Fa as S,tn as T,Nu as U,$r as V,Dt as W,Su as a,xu as b,hr as c,Nr as d,cr as e,ng as f,cn as g,Wn as h,By as i,Ce as j,zn as k,Dn as l,_u as m,ug as n,lg as o,Bu as p,Ua as q,Iu as r,Ay as s,Rn as t,xe as u,Mr as v,ky as w,_y as x,Lr as y,Iy as z};
